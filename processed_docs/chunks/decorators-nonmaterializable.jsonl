{"chunk_id": "decorators-nonmaterializable-000", "document_id": "decorators-nonmaterializable", "content": "You can add the `@nonmaterializable` decorator on a struct to declare that the\ntype can exist only in the parameter domain (it can be used for metaprogramming\nonly, and not as a runtime type). And, if an instance of this type does\ntransition into the runtime domain, this decorator declares what type it\nbecomes there.\n\nTo use it, declare your type with `@nonmaterializable(TargetType)`, where\n`TargetType` is the type that the object should convert to if it becomes a\nruntime value (you must declare the `TargetType`). For example, if a struct is\nmarked as `@nonmaterializable(Foo)`, then anywhere that it goes from a\nparameter value to a runtime value, it automatically converts into the `Foo`\ntype.\n\nFor example, the following `ParamStruct` type can be used in the parameter\ndomain, but the `runtime_struct` instance of it is converted to a\n`RuntimeStruct` when it's materialized as a runtime value:\n\n```mojo\n@fieldwise_init\n@register_passable(\"trivial\")\nstruct RuntimeStruct:\n var value: Int", "position": 0, "token_count": 237, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "decorators-nonmaterializable-000", "document_id": "decorators-nonmaterializable", "position": 0, "token_count": 237, "has_code": true, "overlap_with_previous": false, "section_hierarchy": [], "file_path": "decorators/nonmaterializable.mdx", "url": "https://docs.modular.com/mojo/manual/decorators/nonmaterializable", "title": "@nonmaterializable", "category": null, "tags": [], "section_url": "https://docs.modular.com/mojo/manual/decorators/nonmaterializable"}}
{"chunk_id": "decorators-nonmaterializable-001", "document_id": "decorators-nonmaterializable", "content": "```mojo\n@fieldwise_init\n@register_passable(\"trivial\")\nstruct RuntimeStruct:\n var value: Int\n\n @implicit\n fn __init__(out self, nms: ParamStruct):\n self.value = nms.param_value\n\n@nonmaterializable(RuntimeStruct)\n@register_passable(\"trivial\")\nstruct ParamStruct[param_value: Int]:\n fn __init__(out self):\n pass\n\n fn __add__(\n self, rhs: ParamStruct\n ) -> ParamStruct[self.param_value + rhs.param_value]:\n return ParamStruct[self.param_value + rhs.param_value]()\n\ndef main():\n alias still_param_struct = ParamStruct[1]() + ParamStruct[2]()\n print(still_param_struct.param_value)\n # When materializing to a run-time variable, it is automatically converted,\n # even without a type annotation.\n var runtime_struct = still_param_struct\n print(runtime_struct.value)\n```\n\nThe materialized struct must have an `@implicit` conversion constructor that\ntakes an instance of the non-materializable struct as input (as shown in the\ncode example).\n\nAlso, since the non-materializable type only exists in the parameter domain, all\nof its methods must be able to run in the parameter domain.", "position": 1, "token_count": 244, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "decorators-nonmaterializable-001", "document_id": "decorators-nonmaterializable", "position": 1, "token_count": 244, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "decorators/nonmaterializable.mdx", "url": "https://docs.modular.com/mojo/manual/decorators/nonmaterializable", "title": "@nonmaterializable", "category": null, "tags": [], "section_url": "https://docs.modular.com/mojo/manual/decorators/nonmaterializable"}}

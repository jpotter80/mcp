{"chunk_id": "decorators-register-passable-000", "document_id": "decorators-register-passable", "content": "You can add the `@register_passable` decorator on a struct to tell Mojo that\nthe type should be passed in machine registers (such as a CPU register; subject\nto the details of the underlying architecture). For tiny data types like an\ninteger or floating-point number, this is much more efficient than storing\nvalues in stack memory. This means the type is always passed by value and\ncannot be passed by reference.\n\nThe basic `@register_passable` decorator does not change the fundamental\nbehavior of a type: it still needs an `__init__()` method; you need to add the\n[`Copyable` trait](/mojo/manual/lifecycle/life#copy-constructor) to make it\ncopyable; and it may have a\n[custom destructor](/mojo/manual/lifecycle/death#destructor) method, if\nnecessary. For example:\n\n```mojo\n@register_passable\nstruct Pair(Copyable):\n var a: Int\n var b: Int", "position": 0, "token_count": 221, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "decorators-register-passable-000", "document_id": "decorators-register-passable", "position": 0, "token_count": 221, "has_code": true, "overlap_with_previous": false, "section_hierarchy": [], "file_path": "decorators/register-passable.mdx", "url": "https://docs.modular.com/mojo/manual/decorators/register-passable", "title": "@register_passable", "category": null, "tags": [], "section_url": "https://docs.modular.com/mojo/manual/decorators/register-passable"}}
{"chunk_id": "decorators-register-passable-001", "document_id": "decorators-register-passable", "content": "```mojo\n@register_passable\nstruct Pair(Copyable):\n var a: Int\n var b: Int\n\n fn __init__(out self, one: Int, two: Int):\n self.a = one\n self.b = two\n\n fn __copyinit__(out self, existing: Self):\n self.a = existing.a\n self.b = existing.b\n\nfn test_pair():\n var x = Pair(5, 10)\n var y = x\n\n print(y.a, y.b)\n y.a = 10\n y.b = 20\n print(y.a, y.b)", "position": 1, "token_count": 142, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "decorators-register-passable-001", "document_id": "decorators-register-passable", "position": 1, "token_count": 142, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "decorators/register-passable.mdx", "url": "https://docs.modular.com/mojo/manual/decorators/register-passable", "title": "@register_passable", "category": null, "tags": [], "section_url": "https://docs.modular.com/mojo/manual/decorators/register-passable"}}
{"chunk_id": "decorators-register-passable-002", "document_id": "decorators-register-passable", "content": "```\n\n```mojo\ntest_pair()\n```\n\n```output\n5 10\n10 20\n```\n\nThis behavior is what we expect from `Pair`, with or without the decorator.\n\nYou should be aware of a few other observable effects:\n\n1. `@register_passable` types cannot hold instances of types\n that are not also `@register_passable`.\n\n2. `@register_passable` types do not have a predictable identity,\n and so the `self` pointer is not stable/predictable (e.g. in hash tables).\n\n3. `@register_passable` arguments and result are exposed to C and C++ directly,\n instead of being passed by-pointer.\n\n4. `@register_passable` types are always trivially movable by transferring the\n register value around without side effects. As such, they may not\n define an explicit [move\n constructor](/mojo/manual/lifecycle/life#move-constructor).", "position": 2, "token_count": 212, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "decorators-register-passable-002", "document_id": "decorators-register-passable", "position": 2, "token_count": 212, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "decorators/register-passable.mdx", "url": "https://docs.modular.com/mojo/manual/decorators/register-passable", "title": "@register_passable", "category": null, "tags": [], "section_url": "https://docs.modular.com/mojo/manual/decorators/register-passable"}}
{"chunk_id": "decorators-register-passable-003", "document_id": "decorators-register-passable", "content": "## `@register_passable(\"trivial\")`\n\nMost types that use `@register_passable` are just \"bags of bits,\" which we call\n\"trivial\" types. These trivial types are simple and should be copied, moved, and\ndestroyed without any custom copy or move constructors, or a destructor. For\nthese types, you can add the `\"trivial\"` argument, and Mojo synthesizes all the\nlifecycle methods except for the constructor:\n\n```mojo\n@fieldwise_init\n@register_passable(\"trivial\")\nstruct Pair:\n var a: Int\n var b: Int", "position": 3, "token_count": 136, "has_code": true, "section_hierarchy": ["`@register_passable(\"trivial\")`"], "metadata": {"chunk_id": "decorators-register-passable-003", "document_id": "decorators-register-passable", "position": 3, "token_count": 136, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["`@register_passable(\"trivial\")`"], "file_path": "decorators/register-passable.mdx", "url": "https://docs.modular.com/mojo/manual/decorators/register-passable", "title": "@register_passable", "category": null, "tags": [], "section_url": "https://docs.modular.com/mojo/manual/decorators/register-passable#registerpassabletrivial"}}
{"chunk_id": "decorators-register-passable-004", "document_id": "decorators-register-passable", "content": "```\n\nA trivial type acts like a register-passable type, with a few extra\ncharacteristics:\n\n- Its fields must also be trivial types.\n\n- The type is _trivially copyable_. It conforms to the `Copyable` trait, and can\n be copied by copying the bits from one location to another. As such, the type cannot\n define an explicit [copy\n constructor](/mojo/manual/lifecycle/life#copy-constructor).\n\n- The type is _trivially movable_. It conforms to the `Movable` trait, and can\n be moved by moving the bits from one location to another. As such, the type cannot\n define an explicit [move\n constructor](/mojo/manual/lifecycle/life#move-constructor).\n\n- The type is _trivially destructible_. It conforms to the `AnyType` trait and\n implements a trivial (no-op) destructor. As such, the type cannot define a\n explicit [destructor](/mojo/manual/lifecycle/death/#destructor).", "position": 4, "token_count": 232, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "decorators-register-passable-004", "document_id": "decorators-register-passable", "position": 4, "token_count": 232, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "decorators/register-passable.mdx", "url": "https://docs.modular.com/mojo/manual/decorators/register-passable", "title": "@register_passable", "category": null, "tags": [], "section_url": "https://docs.modular.com/mojo/manual/decorators/register-passable"}}
{"chunk_id": "decorators-register-passable-005", "document_id": "decorators-register-passable", "content": "Examples of trivial types include:\n\n- Arithmetic types such as `Int`, `Bool`, `Float64` etc.\n- Pointers (the address value is trivial, not the data being pointed to).\n- Arrays of other trivial types, including SIMD.\n\nFor more information about lifecycle methods (constructors and destructors)\nsee the section about [Value lifecycle](/mojo/manual/lifecycle/).\n\nnote TODO\n\nThis decorator is due for reconsideration. Lack of custom\ncopy/move/destroy logic and \"passability in a register\" are orthogonal concerns\nand should be split. This former logic should be subsumed into a more general\ndecorator, which is orthogonal to `@register_passable`.", "position": 5, "token_count": 158, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "decorators-register-passable-005", "document_id": "decorators-register-passable", "position": 5, "token_count": 158, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "decorators/register-passable.mdx", "url": "https://docs.modular.com/mojo/manual/decorators/register-passable", "title": "@register_passable", "category": null, "tags": [], "section_url": "https://docs.modular.com/mojo/manual/decorators/register-passable"}}

{"chunk_id": "dev-building-python-000", "document_id": "dev-building-python", "content": "The DuckDB Python package has its own repository at [`duckdb/duckdb-python`](https://github.com/duckdb/duckdb-python) and uses [pybind11](https://pybind11.readthedocs.io/en/stable/) to create Python bindings with DuckDB.", "position": 0, "token_count": 83, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "dev-building-python-000", "document_id": "dev-building-python", "position": 0, "token_count": 83, "has_code": false, "overlap_with_previous": false, "section_hierarchy": [], "file_path": "dev/building/python.md", "url": "/dev/building/python", "title": "Python", "category": null, "tags": [], "section_url": "/dev/building/python"}}
{"chunk_id": "dev-building-python-001", "document_id": "dev-building-python", "content": "## Prerequisites\n\nThis guide assumes:\n\n1. You have a working copy of the DuckDB Python package source (including git submodules and tags)\n2. You have [Astral UV](https://docs.astral.sh/uv/) version >= 0.8.0 installed\n3. You run commands from the root of the `duckdb-python` source\n\nWe are opinionated about using **Astral UV** for Python environment and dependency management. While using pip for a development environment with an editable install without build isolation is possible, we don't provide guidance for that approach in this guide.\n\nWe use **CLion** as our IDE. This guide doesn't include specific instructions for other IDEs, but the setup should be similar.", "position": 1, "token_count": 172, "has_code": false, "section_hierarchy": ["Prerequisites"], "metadata": {"chunk_id": "dev-building-python-001", "document_id": "dev-building-python", "position": 1, "token_count": 172, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Prerequisites"], "file_path": "dev/building/python.md", "url": "/dev/building/python", "title": "Python", "category": null, "tags": [], "section_url": "/dev/building/python#prerequisites"}}
{"chunk_id": "dev-building-python-002", "document_id": "dev-building-python", "content": "### 1. DuckDB Python Repository\n\nStart by [forking `duckdb-python`](https://github.com/duckdb/duckdb-python/fork) into a personal repository, then clone your fork:\n\n```bash\ngit clone --recurse-submodules YOUR_FORK_URL\ncd duckdb-python\ngit remote add upstream https://github.com/duckdb/duckdb-python.git\ngit fetch --all\n```\n\nIf you've already cloned without submodules:\n\n```bash\ngit submodule update --init --recursive\ngit remote add upstream https://github.com/duckdb/duckdb-python.git\ngit fetch --all", "position": 2, "token_count": 179, "has_code": true, "section_hierarchy": ["1. DuckDB Python Repository"], "metadata": {"chunk_id": "dev-building-python-002", "document_id": "dev-building-python", "position": 2, "token_count": 179, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["1. DuckDB Python Repository"], "file_path": "dev/building/python.md", "url": "/dev/building/python", "title": "Python", "category": null, "tags": [], "section_url": "/dev/building/python#1-duckdb-python-repository"}}
{"chunk_id": "dev-building-python-003", "document_id": "dev-building-python", "content": "```\n\n**Important notes:**\n- DuckDB is vendored as a git submodule and must be initialized\n- DuckDB version determination depends on local availability of git tags\n- If switching between branches with different submodule refs, add the git hooks:\n\n```bash\ngit config --local core.hooksPath .githooks/\n```", "position": 3, "token_count": 89, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "dev-building-python-003", "document_id": "dev-building-python", "position": 3, "token_count": 89, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/building/python.md", "url": "/dev/building/python", "title": "Python", "category": null, "tags": [], "section_url": "/dev/building/python"}}
{"chunk_id": "dev-building-python-004", "document_id": "dev-building-python", "content": "### 2. Install Astral uv\n\n[Install uv](https://docs.astral.sh/uv/getting-started/installation/) version >= 0.8.0.", "position": 4, "token_count": 46, "has_code": false, "section_hierarchy": ["2. Install Astral uv"], "metadata": {"chunk_id": "dev-building-python-004", "document_id": "dev-building-python", "position": 4, "token_count": 46, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["2. Install Astral uv"], "file_path": "dev/building/python.md", "url": "/dev/building/python", "title": "Python", "category": null, "tags": [], "section_url": "/dev/building/python#2-install-astral-uv"}}
{"chunk_id": "dev-building-python-005", "document_id": "dev-building-python", "content": "## Development Environment Setup\n\n### 1. Platform-Specific Setup\n\n**All Platforms:**\n- Python 3.9+ supported\n- uv >= 0.8.0 required\n- CMake and Ninja (installed via UV)\n- C++ compiler toolchain\n\n**Linux (Ubuntu 24.04):**\n\n```bash\nsudo apt-get update\nsudo apt-get install ccache\n```\n\n**macOS:**\n\n```bash", "position": 5, "token_count": 105, "has_code": true, "section_hierarchy": ["1. Platform-Specific Setup"], "metadata": {"chunk_id": "dev-building-python-005", "document_id": "dev-building-python", "position": 5, "token_count": 105, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["1. Platform-Specific Setup"], "file_path": "dev/building/python.md", "url": "/dev/building/python", "title": "Python", "category": null, "tags": [], "section_url": "/dev/building/python#1-platform-specific-setup"}}
{"chunk_id": "dev-building-python-006", "document_id": "dev-building-python", "content": "# Xcode command line tools\nxcode-select --install\n```\n\n**Windows:**\n- Visual Studio 2019+ with C++ support\n- Git for Windows\n\n### 2. Install Dependencies and Build\n\nSet up the development environment in two steps:\n\n```bash\n# Install all development dependencies without building the project\nuv sync --no-install-project", "position": 6, "token_count": 81, "has_code": true, "section_hierarchy": ["Install all development dependencies without building the project"], "metadata": {"chunk_id": "dev-building-python-006", "document_id": "dev-building-python", "position": 6, "token_count": 81, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Install all development dependencies without building the project"], "file_path": "dev/building/python.md", "url": "/dev/building/python", "title": "Python", "category": null, "tags": [], "section_url": "/dev/building/python#install-all-development-dependencies-without-building-the-project"}}
{"chunk_id": "dev-building-python-007", "document_id": "dev-building-python", "content": "# Build and install the project without build isolation\nuv sync --no-build-isolation\n```\n\n**Why two steps?**\n- `uv sync` performs editable installs by default with scikit-build-core using a persistent build-dir\n- The build happens in an isolated, ephemeral environment where cmake's paths point to non-existing directories\n- Installing dependencies first, then building without isolation ensures proper cmake integration", "position": 7, "token_count": 96, "has_code": true, "section_hierarchy": ["Build and install the project without build isolation"], "metadata": {"chunk_id": "dev-building-python-007", "document_id": "dev-building-python", "position": 7, "token_count": 96, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Build and install the project without build isolation"], "file_path": "dev/building/python.md", "url": "/dev/building/python", "title": "Python", "category": null, "tags": [], "section_url": "/dev/building/python#build-and-install-the-project-without-build-isolation"}}
{"chunk_id": "dev-building-python-008", "document_id": "dev-building-python", "content": "### 3. Enable Pre-Commit Hooks\n\nWe run a number of linting, formatting and type-checking in CI. You can run all of these manually, but to make your life easier you can install the exact same checks we run in CI as git hooks with pre-commit, which is already installed as part of the dev dependencies:\n\n```bash\nuvx pre-commit install\n```\n\nThis will run all required checks before letting your commit pass.\n\nYou can also install a post-checkout hook that always runs `git submodule update --init --recursive`. When you change branches between main and a bugfix branch, this makes sure the duckdb submodule is always correctly initialized:\n\n```bash\nuvx pre-commit install --hook-type post-checkout\n```\n\n### 4. Verify Installation\n\n```bash\nuv run python -c \"import duckdb; print(duckdb.sql('SELECT 42').fetchall())\"\n```", "position": 8, "token_count": 226, "has_code": true, "section_hierarchy": ["4. Verify Installation"], "metadata": {"chunk_id": "dev-building-python-008", "document_id": "dev-building-python", "position": 8, "token_count": 226, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["4. Verify Installation"], "file_path": "dev/building/python.md", "url": "/dev/building/python", "title": "Python", "category": null, "tags": [], "section_url": "/dev/building/python#4-verify-installation"}}
{"chunk_id": "dev-building-python-009", "document_id": "dev-building-python", "content": "## Development Workflow\n\n### Running Tests\n\nRun all tests:\n\n```bash\nuv run --no-build-isolation pytest ./tests --verbose\n```\n\nRun fast tests only (excludes slow directory):\n\n```bash\nuv run --no-build-isolation pytest ./tests --verbose --ignore=./tests/slow\n```", "position": 9, "token_count": 88, "has_code": true, "section_hierarchy": ["Running Tests"], "metadata": {"chunk_id": "dev-building-python-009", "document_id": "dev-building-python", "position": 9, "token_count": 88, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Running Tests"], "file_path": "dev/building/python.md", "url": "/dev/building/python", "title": "Python", "category": null, "tags": [], "section_url": "/dev/building/python#running-tests"}}
{"chunk_id": "dev-building-python-010", "document_id": "dev-building-python", "content": "### Test Coverage\n\nRun with coverage (compiles extension with `--coverage` for C++ coverage):\n\n```bash\nCOVERAGE=1 uv run --no-build-isolation coverage run -m pytest ./tests --verbose\n```\n\nCheck Python coverage:\n\n```bash\nuv run coverage html -d htmlcov-python\nuv run coverage report --format=markdown", "position": 10, "token_count": 90, "has_code": true, "section_hierarchy": ["Test Coverage"], "metadata": {"chunk_id": "dev-building-python-010", "document_id": "dev-building-python", "position": 10, "token_count": 90, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Test Coverage"], "file_path": "dev/building/python.md", "url": "/dev/building/python", "title": "Python", "category": null, "tags": [], "section_url": "/dev/building/python#test-coverage"}}
{"chunk_id": "dev-building-python-011", "document_id": "dev-building-python", "content": "```\n\nCheck Python coverage:\n\n```bash\nuv run coverage html -d htmlcov-python\nuv run coverage report --format=markdown\n```\n\nCheck C++ coverage:\n\n```bash\nuv run gcovr \\\n --gcov-ignore-errors all \\\n --root \"$PWD\" \\\n --filter \"${PWD}/src/duckdb_py\" \\\n --exclude '.*/\\.cache/.*' \\\n --gcov-exclude '.*/\\.cache/.*' \\\n --gcov-exclude '.*/external/.*' \\\n --gcov-exclude '.*/site-packages/.*' \\\n --exclude-unreachable-branches \\\n --exclude-throw-branches \\\n --html --html-details -o coverage-cpp.html \\\n build/coverage/src/duckdb_py \\\n --print-summary\n```", "position": 11, "token_count": 220, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "dev-building-python-011", "document_id": "dev-building-python", "position": 11, "token_count": 220, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/building/python.md", "url": "/dev/building/python", "title": "Python", "category": null, "tags": [], "section_url": "/dev/building/python"}}
{"chunk_id": "dev-building-python-012", "document_id": "dev-building-python", "content": "### Building Wheels\n\nBuild wheel for your system:\n\n```bash\nuv build\n```\n\nBuild for specific Python version:\n\n```bash\nuv build -p 3.9\n```\n\n### Cleaning Build Artifacts\n\n```bash\nuv cache clean\nrm -rf build .venv uv.lock\n```", "position": 12, "token_count": 69, "has_code": true, "section_hierarchy": ["Cleaning Build Artifacts"], "metadata": {"chunk_id": "dev-building-python-012", "document_id": "dev-building-python", "position": 12, "token_count": 69, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Cleaning Build Artifacts"], "file_path": "dev/building/python.md", "url": "/dev/building/python", "title": "Python", "category": null, "tags": [], "section_url": "/dev/building/python#cleaning-build-artifacts"}}
{"chunk_id": "dev-building-python-013", "document_id": "dev-building-python", "content": "## IDE Setup (CLion)\n\nFor CLion users, the project can be configured for C++ debugging of the Python extension:\n\n### CMake Profile Configuration\n\nIn **Settings** → **Build, Execution, Deployment** → **CMake**, create a Debug profile:\n\n- **Name:** Debug\n- **Build type:** Debug\n- **Generator:** Ninja\n- **CMake Options:**\n ```text\n -DCMAKE_PREFIX_PATH=$CMakeProjectDir$/.venv;$CMAKE_PREFIX_PATH\n ```", "position": 13, "token_count": 146, "has_code": true, "section_hierarchy": ["CMake Profile Configuration"], "metadata": {"chunk_id": "dev-building-python-013", "document_id": "dev-building-python", "position": 13, "token_count": 146, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["CMake Profile Configuration"], "file_path": "dev/building/python.md", "url": "/dev/building/python", "title": "Python", "category": null, "tags": [], "section_url": "/dev/building/python#cmake-profile-configuration"}}
{"chunk_id": "dev-building-python-014", "document_id": "dev-building-python", "content": "### Python Debug Configuration\n\nCreate a **CMake Application** run configuration:\n\n- **Name:** Python Debug\n- **Target:** `All targets`\n- **Executable:** `⟨PROJECT_DIR⟩/.venv/bin/python3`{:.language-sql .highlight}\n- **Program arguments:** `$FilePath$`\n- **Working directory:** `$ProjectFileDir$`\n\nThis allows setting C++ breakpoints and debugging Python scripts that use the DuckDB extension.", "position": 14, "token_count": 130, "has_code": false, "section_hierarchy": ["Python Debug Configuration"], "metadata": {"chunk_id": "dev-building-python-014", "document_id": "dev-building-python", "position": 14, "token_count": 130, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Python Debug Configuration"], "file_path": "dev/building/python.md", "url": "/dev/building/python", "title": "Python", "category": null, "tags": [], "section_url": "/dev/building/python#python-debug-configuration"}}
{"chunk_id": "dev-building-python-015", "document_id": "dev-building-python", "content": "## Debugging\n\n### Command Line Debugging\n\nSet breakpoints and debug with lldb:\n\n```bash", "position": 15, "token_count": 30, "has_code": true, "section_hierarchy": ["Command Line Debugging"], "metadata": {"chunk_id": "dev-building-python-015", "document_id": "dev-building-python", "position": 15, "token_count": 30, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Command Line Debugging"], "file_path": "dev/building/python.md", "url": "/dev/building/python", "title": "Python", "category": null, "tags": [], "section_url": "/dev/building/python#command-line-debugging"}}
{"chunk_id": "dev-building-python-016", "document_id": "dev-building-python", "content": "# Example Python script (test.py)\n# import duckdb\n# print(duckdb.sql(\"select * from range(1000)\").df())\n\nlldb -- .venv/bin/python3 test.py\n```\n\nIn lldb:\n\n```bash", "position": 16, "token_count": 68, "has_code": true, "section_hierarchy": ["print(duckdb.sql(\"select * from range(1000)\").df())"], "metadata": {"chunk_id": "dev-building-python-016", "document_id": "dev-building-python", "position": 16, "token_count": 68, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["print(duckdb.sql(\"select * from range(1000)\").df())"], "file_path": "dev/building/python.md", "url": "/dev/building/python", "title": "Python", "category": null, "tags": [], "section_url": "/dev/building/python#printduckdbsqlselect--from-range1000df"}}
{"chunk_id": "dev-building-python-017", "document_id": "dev-building-python", "content": "# Set breakpoint (library loads when imported)\n(lldb) br s -n duckdb::DuckDBPyRelation::FetchDF\n(lldb) r\n```\n\n## Cross-Platform Testing\n\nYou can run the packaging workflow manually on your fork for any branch, choosing platforms and test suites via the GitHub Actions web interface.\n\n## Troubleshooting\n\n### Build Issues\n\n**Missing git tags:** If you forked DuckDB Python, ensure you have the upstream tags:\n\n```bash\ngit remote add upstream https://github.com/duckdb/duckdb-python.git\ngit fetch --tags upstream\ngit push --tags\n```\n\n### Platform-Specific Issues\n\n**Windows compilation:** Ensure you have Visual Studio 2019+ with C++ support installed.", "position": 17, "token_count": 183, "has_code": true, "section_hierarchy": ["Platform-Specific Issues"], "metadata": {"chunk_id": "dev-building-python-017", "document_id": "dev-building-python", "position": 17, "token_count": 183, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Platform-Specific Issues"], "file_path": "dev/building/python.md", "url": "/dev/building/python", "title": "Python", "category": null, "tags": [], "section_url": "/dev/building/python#platform-specific-issues"}}

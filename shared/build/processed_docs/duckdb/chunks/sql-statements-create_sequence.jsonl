{"chunk_id": "sql-statements-create_sequence-000", "document_id": "sql-statements-create_sequence", "content": "The `CREATE SEQUENCE` statement creates a new sequence number generator.", "position": 0, "token_count": 15, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "sql-statements-create_sequence-000", "document_id": "sql-statements-create_sequence", "position": 0, "token_count": 15, "has_code": false, "overlap_with_previous": false, "section_hierarchy": [], "file_path": "sql/statements/create_sequence.md", "url": "/sql/statements/create_sequence", "title": "CREATE SEQUENCE Statement", "category": null, "tags": [], "section_url": "/sql/statements/create_sequence"}}
{"chunk_id": "sql-statements-create_sequence-001", "document_id": "sql-statements-create_sequence", "content": "## Examples\n\nGenerate an ascending sequence starting from 1:\n\n```sql\nCREATE SEQUENCE serial;\n```\n\nGenerate sequence from a given start number:\n\n```sql\nCREATE SEQUENCE serial START 101;\n```\n\nGenerate odd numbers using `INCREMENT BY`:\n\n```sql\nCREATE SEQUENCE serial START WITH 1 INCREMENT BY 2;\n```\n\nGenerate a descending sequence starting from 99:\n\n```sql\nCREATE SEQUENCE serial START WITH 99 INCREMENT BY -1 MAXVALUE 99;\n```\n\nBy default, cycles are not allowed and will result in error, e.g.:\n\n```console\nSequence Error:\nnextval: reached maximum value of sequence \"serial\" (10)\n```\n\n```sql\nCREATE SEQUENCE serial START WITH 1 MAXVALUE 10;\n```\n\n`CYCLE` allows cycling through the same sequence repeatedly:\n\n```sql\nCREATE SEQUENCE serial START WITH 1 MAXVALUE 10 CYCLE;\n```", "position": 1, "token_count": 197, "has_code": true, "section_hierarchy": ["Examples"], "metadata": {"chunk_id": "sql-statements-create_sequence-001", "document_id": "sql-statements-create_sequence", "position": 1, "token_count": 197, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Examples"], "file_path": "sql/statements/create_sequence.md", "url": "/sql/statements/create_sequence", "title": "CREATE SEQUENCE Statement", "category": null, "tags": [], "section_url": "/sql/statements/create_sequence#examples"}}
{"chunk_id": "sql-statements-create_sequence-002", "document_id": "sql-statements-create_sequence", "content": "### Creating and Dropping Sequences\n\nSequences can be created and dropped similarly to other catalogue items.\n\nOverwrite an existing sequence:\n\n```sql\nCREATE OR REPLACE SEQUENCE serial;\n```\n\nOnly create sequence if no such sequence exists yet:\n\n```sql\nCREATE SEQUENCE IF NOT EXISTS serial;\n```\n\nRemove sequence:\n\n```sql\nDROP SEQUENCE serial;\n```\n\nRemove sequence if exists:\n\n```sql\nDROP SEQUENCE IF EXISTS serial;\n```", "position": 2, "token_count": 96, "has_code": true, "section_hierarchy": ["Creating and Dropping Sequences"], "metadata": {"chunk_id": "sql-statements-create_sequence-002", "document_id": "sql-statements-create_sequence", "position": 2, "token_count": 96, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Creating and Dropping Sequences"], "file_path": "sql/statements/create_sequence.md", "url": "/sql/statements/create_sequence", "title": "CREATE SEQUENCE Statement", "category": null, "tags": [], "section_url": "/sql/statements/create_sequence#creating-and-dropping-sequences"}}
{"chunk_id": "sql-statements-create_sequence-003", "document_id": "sql-statements-create_sequence", "content": "### Using Sequences for Primary Keys\n\nSequences can be used as `DEFAULT` values in [`CREATE TABLE` statements]({%link docs/stable/sql/statements/create_table.md %}).\n\nThe example below uses a sequence to create an integer [primary key]({% link docs/stable/sql/constraints.md %}#primary-key-and-unique-constraint):\n\n```sql\nCREATE SEQUENCE id_sequence START 1;\nCREATE TABLE tbl (id INTEGER PRIMARY KEY DEFAULT nextval('id_sequence'), s VARCHAR);\nINSERT INTO tbl (s) VALUES ('hello'), ('world');\nSELECT * FROM tbl;", "position": 3, "token_count": 155, "has_code": true, "section_hierarchy": ["Using Sequences for Primary Keys"], "metadata": {"chunk_id": "sql-statements-create_sequence-003", "document_id": "sql-statements-create_sequence", "position": 3, "token_count": 155, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Using Sequences for Primary Keys"], "file_path": "sql/statements/create_sequence.md", "url": "/sql/statements/create_sequence", "title": "CREATE SEQUENCE Statement", "category": null, "tags": [], "section_url": "/sql/statements/create_sequence#using-sequences-for-primary-keys"}}
{"chunk_id": "sql-statements-create_sequence-004", "document_id": "sql-statements-create_sequence", "content": "```\n\nThe script results in the following table:\n\n| id | s |\n|---:|-------|\n| 1 | hello |\n| 2 | world |\n\nSequences can also be added using the [`ALTER TABLE` statement]({% link docs/stable/sql/statements/alter_table.md %}). The following example adds an `id` column and fills it with values generated by the sequence:\n\n```sql\nCREATE TABLE tbl (s VARCHAR);\nINSERT INTO tbl VALUES ('hello'), ('world');\nCREATE SEQUENCE id_sequence START 1;\nALTER TABLE tbl ADD COLUMN id INTEGER DEFAULT nextval('id_sequence');\nSELECT * FROM tbl;\n```\n\nThis script results in the same table as the previous example.", "position": 4, "token_count": 177, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "sql-statements-create_sequence-004", "document_id": "sql-statements-create_sequence", "position": 4, "token_count": 177, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "sql/statements/create_sequence.md", "url": "/sql/statements/create_sequence", "title": "CREATE SEQUENCE Statement", "category": null, "tags": [], "section_url": "/sql/statements/create_sequence"}}
{"chunk_id": "sql-statements-create_sequence-005", "document_id": "sql-statements-create_sequence", "content": "### Selecting the Next Value\n\nTo select the next number from a sequence, use `nextval`:\n\n```sql\nCREATE SEQUENCE serial START 1;\nSELECT nextval('serial') AS nextval;\n```\n\n| nextval |\n|--------:|\n| 1 |\n\nUsing this sequence in an `INSERT` command:\n\n```sql\nINSERT INTO distributors VALUES (nextval('serial'), 'nothing');\n```\n\n### Selecting the Current Value\n\nYou may also view the current number from the sequence. Note that the `nextval` function must have already been called before calling `currval`, otherwise a Serialization Error (`sequence is not yet defined in this session`) will be thrown.\n\n```sql\nCREATE SEQUENCE serial START 1;\nSELECT nextval('serial') AS nextval;\nSELECT currval('serial') AS currval;\n```\n\n| currval |\n|--------:|\n| 1 |", "position": 5, "token_count": 220, "has_code": true, "section_hierarchy": ["Selecting the Current Value"], "metadata": {"chunk_id": "sql-statements-create_sequence-005", "document_id": "sql-statements-create_sequence", "position": 5, "token_count": 220, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Selecting the Current Value"], "file_path": "sql/statements/create_sequence.md", "url": "/sql/statements/create_sequence", "title": "CREATE SEQUENCE Statement", "category": null, "tags": [], "section_url": "/sql/statements/create_sequence#selecting-the-current-value"}}
{"chunk_id": "sql-statements-create_sequence-006", "document_id": "sql-statements-create_sequence", "content": "## Syntax\n\n`CREATE SEQUENCE` creates a new sequence number generator.\n\nIf a schema name is given then the sequence is created in the specified schema. Otherwise it is created in the current schema. Temporary sequences exist in a special schema, so a schema name may not be given when creating a temporary sequence. The sequence name must be distinct from the name of any other sequence in the same schema.\n\nAfter a sequence is created, you use the function `nextval` to operate on the sequence.", "position": 6, "token_count": 107, "has_code": false, "section_hierarchy": ["Syntax"], "metadata": {"chunk_id": "sql-statements-create_sequence-006", "document_id": "sql-statements-create_sequence", "position": 6, "token_count": 107, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Syntax"], "file_path": "sql/statements/create_sequence.md", "url": "/sql/statements/create_sequence", "title": "CREATE SEQUENCE Statement", "category": null, "tags": [], "section_url": "/sql/statements/create_sequence#syntax"}}
{"chunk_id": "sql-statements-create_sequence-007", "document_id": "sql-statements-create_sequence", "content": "## Parameters", "position": 7, "token_count": 5, "has_code": false, "section_hierarchy": ["Parameters"], "metadata": {"chunk_id": "sql-statements-create_sequence-007", "document_id": "sql-statements-create_sequence", "position": 7, "token_count": 5, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Parameters"], "file_path": "sql/statements/create_sequence.md", "url": "/sql/statements/create_sequence", "title": "CREATE SEQUENCE Statement", "category": null, "tags": [], "section_url": "/sql/statements/create_sequence#parameters"}}
{"chunk_id": "sql-statements-create_sequence-008", "document_id": "sql-statements-create_sequence", "content": "| Name | Description |\n|:--|:-----|\n| `CYCLE` or `NO CYCLE` | The `CYCLE` option allows the sequence to wrap around when the `maxvalue` or `minvalue` has been reached by an ascending or descending sequence respectively. If the limit is reached, the next number generated will be the `minvalue` or `maxvalue`, respectively. If `NO CYCLE` is specified, any calls to `nextval` after the sequence has reached its maximum value will return an error. If neither `CYCLE` or `NO CYCLE` are specified, `NO CYCLE` is the default. |\n| `increment` | The optional clause `INCREMENT BY increment` specifies which value is added to the current sequence value to create a new value. A positive value will make an ascending sequence, a negative one a descending sequence. The default value is 1. |", "position": 8, "token_count": 199, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "sql-statements-create_sequence-008", "document_id": "sql-statements-create_sequence", "position": 8, "token_count": 199, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "sql/statements/create_sequence.md", "url": "/sql/statements/create_sequence", "title": "CREATE SEQUENCE Statement", "category": null, "tags": [], "section_url": "/sql/statements/create_sequence"}}
{"chunk_id": "sql-statements-create_sequence-009", "document_id": "sql-statements-create_sequence", "content": "| `maxvalue` | The optional clause `MAXVALUE maxvalue` determines the maximum value for the sequence. If this clause is not supplied or `NO MAXVALUE` is specified, then default values will be used. The defaults are 2^63 - 1 and -1 for ascending and descending sequences, respectively. |\n| `minvalue` | The optional clause `MINVALUE minvalue` determines the minimum value a sequence can generate. If this clause is not supplied or `NO MINVALUE` is specified, then defaults will be used. The defaults are 1 and -(2^63 - 1) for ascending and descending sequences, respectively. |\n| `name` | The name (optionally schema-qualified) of the sequence to be created. |\n| `start` | The optional clause `START WITH start` allows the sequence to begin anywhere. The default starting value is `minvalue` for ascending sequences and `maxvalue` for descending ones. |", "position": 9, "token_count": 212, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "sql-statements-create_sequence-009", "document_id": "sql-statements-create_sequence", "position": 9, "token_count": 212, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "sql/statements/create_sequence.md", "url": "/sql/statements/create_sequence", "title": "CREATE SEQUENCE Statement", "category": null, "tags": [], "section_url": "/sql/statements/create_sequence"}}
{"chunk_id": "sql-statements-create_sequence-010", "document_id": "sql-statements-create_sequence", "content": "| `start` | The optional clause `START WITH start` allows the sequence to begin anywhere. The default starting value is `minvalue` for ascending sequences and `maxvalue` for descending ones. |\n| `TEMPORARY` or `TEMP` | If specified, the sequence object is created only for this session, and is automatically dropped on session exit. Existing permanent sequences with the same name are not visible (in this session) while the temporary sequence exists, unless they are referenced with schema-qualified names. |", "position": 10, "token_count": 110, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "sql-statements-create_sequence-010", "document_id": "sql-statements-create_sequence", "position": 10, "token_count": 110, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "sql/statements/create_sequence.md", "url": "/sql/statements/create_sequence", "title": "CREATE SEQUENCE Statement", "category": null, "tags": [], "section_url": "/sql/statements/create_sequence"}}
{"chunk_id": "sql-statements-create_sequence-011", "document_id": "sql-statements-create_sequence", "content": "> Sequences are based on `BIGINT` arithmetic, so the range cannot exceed the range of an eight-byte integer (-9223372036854775808 to 9223372036854775807).", "position": 11, "token_count": 51, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "sql-statements-create_sequence-011", "document_id": "sql-statements-create_sequence", "position": 11, "token_count": 51, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "sql/statements/create_sequence.md", "url": "/sql/statements/create_sequence", "title": "CREATE SEQUENCE Statement", "category": null, "tags": [], "section_url": "/sql/statements/create_sequence"}}
{"chunk_id": "sql-statements-create_sequence-012", "document_id": "sql-statements-create_sequence", "content": "## Limitations\n\nDue to limitations in DuckDB's dependency manager, `DROP SEQUENCE` will fail in some corner cases.\nFor example, deleting a column that uses a sequence should allow the sequence to be dropped but this currently returns an error:\n\n```sql\nCREATE SEQUENCE id_sequence START 1;\nCREATE TABLE tbl (id INTEGER DEFAULT nextval('id_sequence'), s VARCHAR);\n\nALTER TABLE tbl DROP COLUMN id;\nDROP SEQUENCE id_sequence;\n```\n\n```console\nDependency Error:\nCannot drop entry \"id_sequence\" because there are entries that depend on it.\ntable \"tbl\" depends on index \"id_sequence\".\nUse DROP...CASCADE to drop all dependents.\n```\n\nThis can be worked around by using the `CASCADE` modifier.\nThe following command drops the sequence:\n\n```sql\nDROP SEQUENCE id_sequence CASCADE;\n```", "position": 12, "token_count": 194, "has_code": true, "section_hierarchy": ["Limitations"], "metadata": {"chunk_id": "sql-statements-create_sequence-012", "document_id": "sql-statements-create_sequence", "position": 12, "token_count": 194, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Limitations"], "file_path": "sql/statements/create_sequence.md", "url": "/sql/statements/create_sequence", "title": "CREATE SEQUENCE Statement", "category": null, "tags": [], "section_url": "/sql/statements/create_sequence#limitations"}}

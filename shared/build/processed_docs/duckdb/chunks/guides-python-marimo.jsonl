{"chunk_id": "guides-python-marimo-000", "document_id": "guides-python-marimo", "content": "[marimo](https://github.com/marimo-team/marimo) is an open-source reactive\nnotebook for Python and SQL that's tightly integrated with DuckDB's Python\nclient, letting you mix and match Python and SQL in a single git-versionable\nnotebook. Unlike traditional notebooks, when you run a cell or interact with a\nUI element, marimo automatically (or lazily) runs affected cells, keeping code\nand outputs consistent. Its integration with DuckDB makes it well-suited to\ninteractively working with data, and its representation as a Python file makes\nit simple to run notebooks as scripts.\n\n## Installation\n\nTo get started, install marimo and DuckDB from your terminal:\n\n```batch\npip install \"marimo[sql]\" # or uv add \"marimo[sql]\"\n```\n\nInstall supporting libraries:\n\n```batch\npip install \"polars[pyarrow]\" # or uv add \"polars[pyarrow]\"\n```\n\nRun a tutorial:\n\n```batch\nmarimo tutorial sql\n```", "position": 0, "token_count": 232, "has_code": true, "section_hierarchy": ["Installation"], "metadata": {"chunk_id": "guides-python-marimo-000", "document_id": "guides-python-marimo", "position": 0, "token_count": 232, "has_code": true, "overlap_with_previous": false, "section_hierarchy": ["Installation"], "file_path": "guides/python/marimo.md", "url": "/guides/python/marimo", "title": "marimo Notebooks", "category": null, "tags": [], "section_url": "/guides/python/marimo#installation"}}
{"chunk_id": "guides-python-marimo-001", "document_id": "guides-python-marimo", "content": "## SQL in marimo\n\nCreate a notebook from your terminal with `marimo edit notebook.py`. Create SQL\ncells in one of three ways:\n\n1. Right-click the **+** button and pick **SQL cell**\n2. Convert any empty cell to SQL via the cell menu\n3. Hit the SQL button at the bottom of your notebook\n\nIn marimo, SQL cells give the appearance of writing SQL while being serialized as standard Python code using the `mo.sql()` function, which keeps your notebook as pure Python code without requiring special syntax or magic commands.\n\n```python\ndf = mo.sql(f\"SELECT 'Off and flying!' AS a_duckdb_column\")", "position": 1, "token_count": 153, "has_code": true, "section_hierarchy": ["SQL in marimo"], "metadata": {"chunk_id": "guides-python-marimo-001", "document_id": "guides-python-marimo", "position": 1, "token_count": 153, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["SQL in marimo"], "file_path": "guides/python/marimo.md", "url": "/guides/python/marimo", "title": "marimo Notebooks", "category": null, "tags": [], "section_url": "/guides/python/marimo#sql-in-marimo"}}
{"chunk_id": "guides-python-marimo-002", "document_id": "guides-python-marimo", "content": "```\n\nThis is because marimo stores notebooks as pure Python, [for many reasons](https://marimo.io/blog/python-not-json), such as git-friendly diffs and running notebooks as Python scripts.\n\nThe SQL statement itself is an f-string, letting you interpolate Python values into the query with `{}` (shown later). In particular, this means your SQL queries can depend on the values of UI elements or other Python values, all part of marimo's dataflow graph.\n\n> Warning Heads up!\n> If you have user-generated content going into the SQL queries, be sure to sanitize your inputs to prevent SQL injection.", "position": 2, "token_count": 154, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "guides-python-marimo-002", "document_id": "guides-python-marimo", "position": 2, "token_count": 154, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "guides/python/marimo.md", "url": "/guides/python/marimo", "title": "marimo Notebooks", "category": null, "tags": [], "section_url": "/guides/python/marimo"}}
{"chunk_id": "guides-python-marimo-003", "document_id": "guides-python-marimo", "content": "## Connecting a Custom DuckDB Connection\n\nTo connect to a custom DuckDB connection instead of using the default global connection, create a cell and create a DuckDB connection as Python variable:\n\n```python\nimport duckdb", "position": 3, "token_count": 46, "has_code": true, "section_hierarchy": ["Connecting a Custom DuckDB Connection"], "metadata": {"chunk_id": "guides-python-marimo-003", "document_id": "guides-python-marimo", "position": 3, "token_count": 46, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Connecting a Custom DuckDB Connection"], "file_path": "guides/python/marimo.md", "url": "/guides/python/marimo", "title": "marimo Notebooks", "category": null, "tags": [], "section_url": "/guides/python/marimo#connecting-a-custom-duckdb-connection"}}
{"chunk_id": "guides-python-marimo-004", "document_id": "guides-python-marimo", "content": "# Create a DuckDB connection\nconn = duckdb.connect(\"path/to/my/duckdb.db\")\n```\n\nmarimo automatically discovers the connection and lets you select it in the SQL cell's connection dropdown.\n\n\n\n Custom connection\n\n\n## Database, Schema, and Table Auto-Discovery\n\nmarimo introspects connections and display the database, schemas, tables, and columns in the Data Sources panel. This panel lets you quickly navigate your schemas to pull tables and columns into your SQL queries.\n\n\n\n Data Sources Panel\n\n\n## Reference a Local Dataframe\n\nReference a local dataframe in your SQL cell by using the name of the\nPython variable that holds the dataframe. If you have a database connection\nwith a table of the same name, the database table will be used instead.\n\n```python\nimport polars as pl\ndf = pl.DataFrame({\"column\": [1, 2, 3]})\n```\n\n```sql\nSELECT * FROM df WHERE column > 2\n```", "position": 4, "token_count": 219, "has_code": true, "section_hierarchy": ["Reference a Local Dataframe"], "metadata": {"chunk_id": "guides-python-marimo-004", "document_id": "guides-python-marimo", "position": 4, "token_count": 219, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Reference a Local Dataframe"], "file_path": "guides/python/marimo.md", "url": "/guides/python/marimo", "title": "marimo Notebooks", "category": null, "tags": [], "section_url": "/guides/python/marimo#reference-a-local-dataframe"}}
{"chunk_id": "guides-python-marimo-005", "document_id": "guides-python-marimo", "content": "## Reference the Output of a SQL Cell\n\nDefining a non-private (non-underscored) output variable in the SQL cell allows you to reference the resulting dataframe in other Python and SQL cells.\n\n\n\n Reference the SQL result in Python\n\n\n## Reactive SQL Cells\n\nmarimo allows you to create reactive SQL cells that automatically update when their dependencies change. **Working with expensive queries or large datasets?** You can configure marimo's runtime to be “lazy”. By doing so, dependent cells are only marked as stale letting the user choose when they should be re-run.\n\n```python\ndigits = mo.ui.slider(label=\"Digits\", start=100, stop=10000, step=200)\ndigits\n```\n\n```sql\nCREATE TABLE random_data AS\n SELECT i AS id, random() AS random_value,\n FROM range({digits.value}) AS t(i);\n\nSELECT * FROM random_data;\n```\n\nInteracting with UI elements, like a slider, makes your data more tangible.", "position": 5, "token_count": 229, "has_code": true, "section_hierarchy": ["Reactive SQL Cells"], "metadata": {"chunk_id": "guides-python-marimo-005", "document_id": "guides-python-marimo", "position": 5, "token_count": 229, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Reactive SQL Cells"], "file_path": "guides/python/marimo.md", "url": "/guides/python/marimo", "title": "marimo Notebooks", "category": null, "tags": [], "section_url": "/guides/python/marimo#reactive-sql-cells"}}
{"chunk_id": "guides-python-marimo-006", "document_id": "guides-python-marimo", "content": "## DuckDB-Powered OLAP Analytics in marimo\n\nmarimo provides several features that work well with DuckDB for analytical workflows:\n\n* Seamless integration between Python and SQL\n* Reactive execution that automatically updates dependent cells when queries change\n* Interactive UI elements that can be used to parameterize SQL queries\n* Ability to export notebooks as standalone applications or Python scripts, or even run entirely in the browser [with WebAssembly](https://docs.marimo.io/guides/wasm/).\n\n## Next Steps\n\n* Read the [marimo docs](https://docs.marimo.io/).\n* Try the SQL tutorial: `marimo tutorial sql`.\n* The code for this guide is [available on GitHub](https://github.com/marimo-team/marimo/blob/main/examples/sql/duckdb_example.py). Run it with `marimo edit ⟨github_url⟩`.", "position": 6, "token_count": 224, "has_code": false, "section_hierarchy": ["Next Steps"], "metadata": {"chunk_id": "guides-python-marimo-006", "document_id": "guides-python-marimo", "position": 6, "token_count": 224, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Next Steps"], "file_path": "guides/python/marimo.md", "url": "/guides/python/marimo", "title": "marimo Notebooks", "category": null, "tags": [], "section_url": "/guides/python/marimo#next-steps"}}

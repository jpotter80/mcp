{"chunk_id": "clients-wasm-query-000", "document_id": "clients-wasm-query", "content": "DuckDB-Wasm provides functions for querying data. Queries are run sequentially.\n\nFirst, a connection need to be created by calling [connect](https://shell.duckdb.org/docs/classes/index.AsyncDuckDB.html#connect). Then, queries can be run by calling [query](https://shell.duckdb.org/docs/classes/index.AsyncDuckDBConnection.html#query) or [send](https://shell.duckdb.org/docs/classes/index.AsyncDuckDBConnection.html#send).", "position": 0, "token_count": 145, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "clients-wasm-query-000", "document_id": "clients-wasm-query", "position": 0, "token_count": 145, "has_code": false, "overlap_with_previous": false, "section_hierarchy": [], "file_path": "clients/wasm/query.md", "url": "/clients/wasm/query", "title": "Query", "category": null, "tags": [], "section_url": "/clients/wasm/query"}}
{"chunk_id": "clients-wasm-query-001", "document_id": "clients-wasm-query", "content": "## Query Execution\n\n```ts\n// Create a new connection\nconst conn = await db.connect();\n\n// Either materialize the query result\nawait conn.query(`\n SELECT * FROM generate_series(1, 100) t(v)\n`);\n// ..., or fetch the result chunks lazily\nfor await (const batch of await conn.send(`\n SELECT * FROM generate_series(1, 100) t(v)\n`)) {\n // ...\n}\n\n// Close the connection to release memory\nawait conn.close();\n```", "position": 1, "token_count": 132, "has_code": true, "section_hierarchy": ["Query Execution"], "metadata": {"chunk_id": "clients-wasm-query-001", "document_id": "clients-wasm-query", "position": 1, "token_count": 132, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Query Execution"], "file_path": "clients/wasm/query.md", "url": "/clients/wasm/query", "title": "Query", "category": null, "tags": [], "section_url": "/clients/wasm/query#query-execution"}}
{"chunk_id": "clients-wasm-query-002", "document_id": "clients-wasm-query", "content": "## Prepared Statements\n\n```ts\n// Create a new connection\nconst conn = await db.connect();\n// Prepare query\nconst stmt = await conn.prepare(`SELECT v + ? FROM generate_series(0, 10_000) t(v);`);\n// ... and run the query with materialized results\nawait stmt.query(234);\n// ... or result chunks\nfor await (const batch of await stmt.send(234)) {\n // ...\n}\n// Close the statement to release memory\nawait stmt.close();\n// Closing the connection will release statements as well\nawait conn.close();\n```", "position": 2, "token_count": 156, "has_code": true, "section_hierarchy": ["Prepared Statements"], "metadata": {"chunk_id": "clients-wasm-query-002", "document_id": "clients-wasm-query", "position": 2, "token_count": 156, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Prepared Statements"], "file_path": "clients/wasm/query.md", "url": "/clients/wasm/query", "title": "Query", "category": null, "tags": [], "section_url": "/clients/wasm/query#prepared-statements"}}
{"chunk_id": "clients-wasm-query-003", "document_id": "clients-wasm-query", "content": "## Arrow Table to JSON\n\n```ts\n// Create a new connection\nconst conn = await db.connect();\n\n// Query\nconst arrowResult = await conn.query(`\n SELECT * FROM generate_series(1, 100) t(v)\n`);\n\n// Convert arrow table to json\nconst result = arrowResult.toArray().map((row) => row.toJSON());\n\n// Close the connection to release memory\nawait conn.close();\n```", "position": 3, "token_count": 122, "has_code": true, "section_hierarchy": ["Arrow Table to JSON"], "metadata": {"chunk_id": "clients-wasm-query-003", "document_id": "clients-wasm-query", "position": 3, "token_count": 122, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Arrow Table to JSON"], "file_path": "clients/wasm/query.md", "url": "/clients/wasm/query", "title": "Query", "category": null, "tags": [], "section_url": "/clients/wasm/query#arrow-table-to-json"}}
{"chunk_id": "clients-wasm-query-004", "document_id": "clients-wasm-query", "content": "## Export Parquet\n\n```ts\n// Create a new connection\nconst conn = await db.connect();\n\n// Export Parquet\nconn.send(`COPY (SELECT * FROM tbl) TO 'result-snappy.parquet' (FORMAT parquet);`);\nconst parquet_buffer = await this._db.copyFileToBuffer('result-snappy.parquet');\n\n// Generate a download link\nconst link = URL.createObjectURL(new Blob([parquet_buffer]));\n\n// Close the connection to release memory\nawait conn.close();\n```", "position": 4, "token_count": 150, "has_code": true, "section_hierarchy": ["Export Parquet"], "metadata": {"chunk_id": "clients-wasm-query-004", "document_id": "clients-wasm-query", "position": 4, "token_count": 150, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Export Parquet"], "file_path": "clients/wasm/query.md", "url": "/clients/wasm/query", "title": "Query", "category": null, "tags": [], "section_url": "/clients/wasm/query#export-parquet"}}

{"chunk_id": "core_extensions-tpch-000", "document_id": "core_extensions-tpch", "content": "The `tpch` extension implements the data generator and queries for the [TPC-H benchmark](https://www.tpc.org/tpch/).\n\n## Installing and Loading\n\nThe `tpch` extension is shipped by default in some DuckDB builds, otherwise it will be transparently [autoloaded]({% link docs/stable/extensions/overview.md %}#autoloading-extensions) on first use.\nIf you would like to install and load it manually, run:\n\n```sql\nINSTALL tpch;\nLOAD tpch;\n```", "position": 0, "token_count": 132, "has_code": true, "section_hierarchy": ["Installing and Loading"], "metadata": {"chunk_id": "core_extensions-tpch-000", "document_id": "core_extensions-tpch", "position": 0, "token_count": 132, "has_code": true, "overlap_with_previous": false, "section_hierarchy": ["Installing and Loading"], "file_path": "core_extensions/tpch.md", "url": "/core_extensions/tpch", "title": "TPC-H Extension", "category": null, "tags": [], "section_url": "/core_extensions/tpch#installing-and-loading"}}
{"chunk_id": "core_extensions-tpch-001", "document_id": "core_extensions-tpch", "content": "## Usage\n\n### Generating Data\n\nTo generate data for scale factor 1, use:\n\n```sql\nCALL dbgen(sf = 1);\n```\n\nCalling `dbgen` does not clean up existing TPC-H tables.\nTo clean up existing tables, use `DROP TABLE` before running `dbgen`:\n\n```sql\nDROP TABLE IF EXISTS customer;\nDROP TABLE IF EXISTS lineitem;\nDROP TABLE IF EXISTS nation;\nDROP TABLE IF EXISTS orders;\nDROP TABLE IF EXISTS part;\nDROP TABLE IF EXISTS partsupp;\nDROP TABLE IF EXISTS region;\nDROP TABLE IF EXISTS supplier;\n```", "position": 1, "token_count": 129, "has_code": true, "section_hierarchy": ["Generating Data"], "metadata": {"chunk_id": "core_extensions-tpch-001", "document_id": "core_extensions-tpch", "position": 1, "token_count": 129, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Generating Data"], "file_path": "core_extensions/tpch.md", "url": "/core_extensions/tpch", "title": "TPC-H Extension", "category": null, "tags": [], "section_url": "/core_extensions/tpch#generating-data"}}
{"chunk_id": "core_extensions-tpch-002", "document_id": "core_extensions-tpch", "content": "### Running a Query\n\nTo run a query, e.g., query 4, use:\n\n```sql\nPRAGMA tpch(4);\n```\n\n| o_orderpriority | order_count |\n| --------------- | ----------: |\n| 1-URGENT | 10594 |\n| 2-HIGH | 10476 |\n| 3-MEDIUM | 10410 |\n| 4-NOT SPECIFIED | 10556 |\n| 5-LOW | 10487 |\n\n### Listing Queries\n\nTo list all 22 queries, run:\n\n```sql\nFROM tpch_queries();\n```\n\nThis function returns a table with columns `query_nr` and `query`.\n\n### Listing Expected Answers\n\nTo produced the expected results for all queries on scale factors 0.01, 0.1, and 1, run:\n\n```sql\nFROM tpch_answers();\n```\n\nThis function returns a table with columns `query_nr`, `scale_factor`, and `answer`.", "position": 2, "token_count": 245, "has_code": true, "section_hierarchy": ["Listing Expected Answers"], "metadata": {"chunk_id": "core_extensions-tpch-002", "document_id": "core_extensions-tpch", "position": 2, "token_count": 245, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Listing Expected Answers"], "file_path": "core_extensions/tpch.md", "url": "/core_extensions/tpch", "title": "TPC-H Extension", "category": null, "tags": [], "section_url": "/core_extensions/tpch#listing-expected-answers"}}
{"chunk_id": "core_extensions-tpch-003", "document_id": "core_extensions-tpch", "content": "## Generating the Schema\n\nIt's possible to generate the schema of TPC-H without any data by setting the scale factor to 0:\n\n```sql\nCALL dbgen(sf = 0);\n```", "position": 3, "token_count": 49, "has_code": true, "section_hierarchy": ["Generating the Schema"], "metadata": {"chunk_id": "core_extensions-tpch-003", "document_id": "core_extensions-tpch", "position": 3, "token_count": 49, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Generating the Schema"], "file_path": "core_extensions/tpch.md", "url": "/core_extensions/tpch", "title": "TPC-H Extension", "category": null, "tags": [], "section_url": "/core_extensions/tpch#generating-the-schema"}}
{"chunk_id": "core_extensions-tpch-004", "document_id": "core_extensions-tpch", "content": "## Data Generator Parameters\n\nThe data generator function `dbgen` has the following parameters:", "position": 4, "token_count": 20, "has_code": false, "section_hierarchy": ["Data Generator Parameters"], "metadata": {"chunk_id": "core_extensions-tpch-004", "document_id": "core_extensions-tpch", "position": 4, "token_count": 20, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Data Generator Parameters"], "file_path": "core_extensions/tpch.md", "url": "/core_extensions/tpch", "title": "TPC-H Extension", "category": null, "tags": [], "section_url": "/core_extensions/tpch#data-generator-parameters"}}
{"chunk_id": "core_extensions-tpch-005", "document_id": "core_extensions-tpch", "content": "| Name | Type | Description |\n| ----------- | ---------- | --------------------------------------------------------------------------------------------------------------------------------- |\n| `catalog` | `VARCHAR` | Target catalog |\n| `children` | `UINTEGER` | Number of partitions |\n| `overwrite` | `BOOLEAN` | (Not used) |\n| `sf` | `DOUBLE` | Scale factor |", "position": 5, "token_count": 221, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "core_extensions-tpch-005", "document_id": "core_extensions-tpch", "position": 5, "token_count": 221, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "core_extensions/tpch.md", "url": "/core_extensions/tpch", "title": "TPC-H Extension", "category": null, "tags": [], "section_url": "/core_extensions/tpch"}}
{"chunk_id": "core_extensions-tpch-006", "document_id": "core_extensions-tpch", "content": "| `overwrite` | `BOOLEAN` | (Not used) |\n| `sf` | `DOUBLE` | Scale factor |\n| `step` | `UINTEGER` | Defines the partition to be generated, indexed from 0 to `children` - 1. Must be defined when the `children` arguments is defined |\n| `suffix` | `VARCHAR` | Append the `suffix` to table names |", "position": 6, "token_count": 91, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "core_extensions-tpch-006", "document_id": "core_extensions-tpch", "position": 6, "token_count": 91, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "core_extensions/tpch.md", "url": "/core_extensions/tpch", "title": "TPC-H Extension", "category": null, "tags": [], "section_url": "/core_extensions/tpch"}}
{"chunk_id": "core_extensions-tpch-007", "document_id": "core_extensions-tpch", "content": "## Pre-Generated Datasets\n\nPre-generated DuckDB databases for TPC-H are available for download:", "position": 7, "token_count": 26, "has_code": false, "section_hierarchy": ["Pre-Generated Datasets"], "metadata": {"chunk_id": "core_extensions-tpch-007", "document_id": "core_extensions-tpch", "position": 7, "token_count": 26, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Pre-Generated Datasets"], "file_path": "core_extensions/tpch.md", "url": "/core_extensions/tpch", "title": "TPC-H Extension", "category": null, "tags": [], "section_url": "/core_extensions/tpch#pre-generated-datasets"}}
{"chunk_id": "core_extensions-tpch-008", "document_id": "core_extensions-tpch", "content": "* [`tpch-sf1.db`](https://blobs.duckdb.org/data/tpch-sf1.db) (250 MB)\n* [`tpch-sf3.db`](https://blobs.duckdb.org/data/tpch-sf3.db) (754 MB)\n* [`tpch-sf10.db`](https://blobs.duckdb.org/data/tpch-sf10.db) (2.5 GB)\n* [`tpch-sf30.db`](https://blobs.duckdb.org/data/tpch-sf30.db) (7.6 GB)\n* [`tpch-sf100.db`](https://blobs.duckdb.org/data/tpch-sf100.db) (26 GB)", "position": 8, "token_count": 217, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "core_extensions-tpch-008", "document_id": "core_extensions-tpch", "position": 8, "token_count": 217, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "core_extensions/tpch.md", "url": "/core_extensions/tpch", "title": "TPC-H Extension", "category": null, "tags": [], "section_url": "/core_extensions/tpch"}}
{"chunk_id": "core_extensions-tpch-009", "document_id": "core_extensions-tpch", "content": "* [`tpch-sf100.db`](https://blobs.duckdb.org/data/tpch-sf100.db) (26 GB)\n* [`tpch-sf300.db`](https://blobs.duckdb.org/data/tpch-sf300.db) (78 GB)\n* [`tpch-sf1000.db`](https://blobs.duckdb.org/data/tpch-sf1000.db) (265 GB)\n* [`tpch-sf3000.db`](https://blobs.duckdb.org/data/tpch-sf3000.db) (796 GB)", "position": 9, "token_count": 177, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "core_extensions-tpch-009", "document_id": "core_extensions-tpch", "position": 9, "token_count": 177, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "core_extensions/tpch.md", "url": "/core_extensions/tpch", "title": "TPC-H Extension", "category": null, "tags": [], "section_url": "/core_extensions/tpch"}}
{"chunk_id": "core_extensions-tpch-010", "document_id": "core_extensions-tpch", "content": "## Resource Usage of the Data Generator\n\nGenerating TPC-H datasets for large scale factors takes a significant amount of time.\nAdditionally, _if the generation is performed in a single step,_ it requires a large amount of memory.\nThe following table gives an estimate on the resources required to produce DuckDB database files containing the generated TPC-H dataset using 128 threads.\n\n| Scale factor | Database size | Generation time | Single-step generation's memory usage |\n| -----------: | ------------: | --------------: | ------------------------------------: |\n| 100 | 26 GB | 17 minutes | 71 GB |\n| 300 | 78 GB | 51 minutes | 211 GB |\n| 1,000 | 265 GB | 2 h 53 minutes | 647 GB |\n| 3,000 | 796 GB | 8 h 30 minutes | 1799 GB |", "position": 10, "token_count": 239, "has_code": false, "section_hierarchy": ["Resource Usage of the Data Generator"], "metadata": {"chunk_id": "core_extensions-tpch-010", "document_id": "core_extensions-tpch", "position": 10, "token_count": 239, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Resource Usage of the Data Generator"], "file_path": "core_extensions/tpch.md", "url": "/core_extensions/tpch", "title": "TPC-H Extension", "category": null, "tags": [], "section_url": "/core_extensions/tpch#resource-usage-of-the-data-generator"}}
{"chunk_id": "core_extensions-tpch-011", "document_id": "core_extensions-tpch", "content": "The numbers shown above were achieved by running the `dbgen` function in a single step, for example:\n\n```sql\nCALL dbgen(sf = 300);", "position": 11, "token_count": 37, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "core_extensions-tpch-011", "document_id": "core_extensions-tpch", "position": 11, "token_count": 37, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "core_extensions/tpch.md", "url": "/core_extensions/tpch", "title": "TPC-H Extension", "category": null, "tags": [], "section_url": "/core_extensions/tpch"}}
{"chunk_id": "core_extensions-tpch-012", "document_id": "core_extensions-tpch", "content": "```\n\nIf you have a limited amount of memory available, you can run the `dbgen` function in steps.\nFor example, you may generate SF300 in 10 steps:\n\n```sql\nCALL dbgen(sf = 300, children = 10, step = 0);\nCALL dbgen(sf = 300, children = 10, step = 1);\n...\nCALL dbgen(sf = 300, children = 10, step = 9);\n```", "position": 12, "token_count": 101, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "core_extensions-tpch-012", "document_id": "core_extensions-tpch", "position": 12, "token_count": 101, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "core_extensions/tpch.md", "url": "/core_extensions/tpch", "title": "TPC-H Extension", "category": null, "tags": [], "section_url": "/core_extensions/tpch"}}
{"chunk_id": "core_extensions-tpch-013", "document_id": "core_extensions-tpch", "content": "## Limitation\n\nThe `tpch(⟨query_id⟩)`{:.language-sql .highlight} function runs a fixed TPC-H query with pre-defined bind parameters (a.k.a. substitution parameters). It is not possible to change the query parameters using the `tpch` extension. To run the queries with the parameters prescribed by the TPC-H benchmark, use a TPC-H framework implementation.", "position": 13, "token_count": 98, "has_code": false, "section_hierarchy": ["Limitation"], "metadata": {"chunk_id": "core_extensions-tpch-013", "document_id": "core_extensions-tpch", "position": 13, "token_count": 98, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Limitation"], "file_path": "core_extensions/tpch.md", "url": "/core_extensions/tpch", "title": "TPC-H Extension", "category": null, "tags": [], "section_url": "/core_extensions/tpch#limitation"}}

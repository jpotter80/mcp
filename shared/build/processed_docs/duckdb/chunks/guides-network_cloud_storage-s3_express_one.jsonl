{"chunk_id": "guides-network_cloud_storage-s3_express_one-000", "document_id": "guides-network_cloud_storage-s3_express_one", "content": "In late 2023, AWS [announced](https://aws.amazon.com/about-aws/whats-new/2023/11/amazon-s3-express-one-zone-storage-class/) the [S3 Express One Zone](https://docs.aws.amazon.com/AmazonS3/latest/userguide/s3-express-one-zone.html), a high-speed variant of traditional S3 buckets.\nDuckDB can read S3 Express One buckets using the [`httpfs` extension]({% link docs/stable/core_extensions/httpfs/overview.md %}).", "position": 0, "token_count": 153, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "guides-network_cloud_storage-s3_express_one-000", "document_id": "guides-network_cloud_storage-s3_express_one", "position": 0, "token_count": 153, "has_code": false, "overlap_with_previous": false, "section_hierarchy": [], "file_path": "guides/network_cloud_storage/s3_express_one.md", "url": "/guides/network_cloud_storage/s3_express_one", "title": "S3 Express One", "category": null, "tags": [], "section_url": "/guides/network_cloud_storage/s3_express_one"}}
{"chunk_id": "guides-network_cloud_storage-s3_express_one-001", "document_id": "guides-network_cloud_storage-s3_express_one", "content": "## Credentials and Configuration\n\nThe configuration of S3 Express One buckets is similar to [regular S3 buckets]({% link docs/stable/guides/network_cloud_storage/s3_import.md %}) with one exception:\nwe have to specify the endpoint according to the following pattern:\n\n```sql\ns3express-⟨availability_zone⟩.⟨region⟩.amazonaws.com", "position": 1, "token_count": 93, "has_code": true, "section_hierarchy": ["Credentials and Configuration"], "metadata": {"chunk_id": "guides-network_cloud_storage-s3_express_one-001", "document_id": "guides-network_cloud_storage-s3_express_one", "position": 1, "token_count": 93, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Credentials and Configuration"], "file_path": "guides/network_cloud_storage/s3_express_one.md", "url": "/guides/network_cloud_storage/s3_express_one", "title": "S3 Express One", "category": null, "tags": [], "section_url": "/guides/network_cloud_storage/s3_express_one#credentials-and-configuration"}}
{"chunk_id": "guides-network_cloud_storage-s3_express_one-002", "document_id": "guides-network_cloud_storage-s3_express_one", "content": "```\n\nwhere the `⟨availability_zone⟩`{:.language-sql .highlight} (e.g., `use-az5`) can be obtained from the S3 Express One bucket's configuration page and the `⟨region⟩`{:.language-sql .highlight} is the AWS region (e.g., `us-east-1`).\n\nFor example, to allow DuckDB to use an S3 Express One bucket, configure the [Secrets manager]({% link docs/stable/sql/statements/create_secret.md %}) as follows:\n\n```sql\nCREATE SECRET (\n TYPE s3,\n KEY_ID '⟨AKIAIOSFODNN7EXAMPLE⟩',\n SECRET '⟨wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY⟩',\n REGION '⟨us-east-1⟩',\n ENDPOINT 's3express-⟨use1-az5⟩.⟨us-east-1⟩.amazonaws.com'\n);\n```", "position": 2, "token_count": 238, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "guides-network_cloud_storage-s3_express_one-002", "document_id": "guides-network_cloud_storage-s3_express_one", "position": 2, "token_count": 238, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "guides/network_cloud_storage/s3_express_one.md", "url": "/guides/network_cloud_storage/s3_express_one", "title": "S3 Express One", "category": null, "tags": [], "section_url": "/guides/network_cloud_storage/s3_express_one"}}
{"chunk_id": "guides-network_cloud_storage-s3_express_one-003", "document_id": "guides-network_cloud_storage-s3_express_one", "content": "## Instance Location\n\nFor best performance, make sure that the EC2 instance is in the same availability zone as the S3 Express One bucket you are querying.\nTo determine the mapping between zone names and zone IDs, use the `aws ec2 describe-availability-zones` command.\n\n* Zone name to zone ID mapping:\n\n ```bash\n aws ec2 describe-availability-zones --output json \\\n | jq -r '.AvailabilityZones[] | select(.ZoneName == \"us-east-1f\") | .ZoneId'\n ```\n\n ```text\n use1-az5\n ```\n\n* Zone ID to zone name mapping:\n\n ```bash\n aws ec2 describe-availability-zones --output json \\\n | jq -r '.AvailabilityZones[] | select(.ZoneId == \"use1-az5\") | .ZoneName'\n ```\n\n ```text\n us-east-1f\n ```", "position": 3, "token_count": 214, "has_code": true, "section_hierarchy": ["Instance Location"], "metadata": {"chunk_id": "guides-network_cloud_storage-s3_express_one-003", "document_id": "guides-network_cloud_storage-s3_express_one", "position": 3, "token_count": 214, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Instance Location"], "file_path": "guides/network_cloud_storage/s3_express_one.md", "url": "/guides/network_cloud_storage/s3_express_one", "title": "S3 Express One", "category": null, "tags": [], "section_url": "/guides/network_cloud_storage/s3_express_one#instance-location"}}
{"chunk_id": "guides-network_cloud_storage-s3_express_one-004", "document_id": "guides-network_cloud_storage-s3_express_one", "content": "## Querying\n\nYou can query the S3 Express One bucket as any other S3 bucket:\n\n```sql\nSELECT *\nFROM 's3://express-bucket-name--use1-az5--x-s3/my-file.parquet';\n```", "position": 4, "token_count": 65, "has_code": true, "section_hierarchy": ["Querying"], "metadata": {"chunk_id": "guides-network_cloud_storage-s3_express_one-004", "document_id": "guides-network_cloud_storage-s3_express_one", "position": 4, "token_count": 65, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Querying"], "file_path": "guides/network_cloud_storage/s3_express_one.md", "url": "/guides/network_cloud_storage/s3_express_one", "title": "S3 Express One", "category": null, "tags": [], "section_url": "/guides/network_cloud_storage/s3_express_one#querying"}}
{"chunk_id": "guides-network_cloud_storage-s3_express_one-005", "document_id": "guides-network_cloud_storage-s3_express_one", "content": "## Performance\n\nWe ran two experiments on a `c7gd.12xlarge` instance using the [LDBC SF300 Comments `creationDate` Parquet file](https://blobs.duckdb.org/data/ldbc-sf300-comments-creationDate.parquet) file (also used in the [microbenchmarks of the performance guide]({% link docs/stable/guides/performance/benchmarks.md %}#data-sets)).\n\n| Experiment | File size | Runtime |\n|:-----|--:|--:|\n| Loading only from Parquet | 4.1 GB | 3.5 s |\n| Creating local table from Parquet | 4.1 GB | 5.1 s |", "position": 5, "token_count": 173, "has_code": false, "section_hierarchy": ["Performance"], "metadata": {"chunk_id": "guides-network_cloud_storage-s3_express_one-005", "document_id": "guides-network_cloud_storage-s3_express_one", "position": 5, "token_count": 173, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Performance"], "file_path": "guides/network_cloud_storage/s3_express_one.md", "url": "/guides/network_cloud_storage/s3_express_one", "title": "S3 Express One", "category": null, "tags": [], "section_url": "/guides/network_cloud_storage/s3_express_one#performance"}}
{"chunk_id": "guides-network_cloud_storage-s3_express_one-006", "document_id": "guides-network_cloud_storage-s3_express_one", "content": "The “loading only” variant is running the load as part of an [`EXPLAIN ANALYZE`]({% link docs/stable/guides/meta/explain_analyze.md %}) statement to measure the runtime without account creating a local table, while the “creating local table” variant uses [`CREATE TABLE ... AS SELECT`]({% link docs/stable/sql/statements/create_table.md %}#create-table--as-select-ctas) to create a persistent table on the local disk.", "position": 6, "token_count": 119, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "guides-network_cloud_storage-s3_express_one-006", "document_id": "guides-network_cloud_storage-s3_express_one", "position": 6, "token_count": 119, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "guides/network_cloud_storage/s3_express_one.md", "url": "/guides/network_cloud_storage/s3_express_one", "title": "S3 Express One", "category": null, "tags": [], "section_url": "/guides/network_cloud_storage/s3_express_one"}}

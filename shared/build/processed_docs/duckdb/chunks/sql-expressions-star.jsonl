{"chunk_id": "sql-expressions-star-000", "document_id": "sql-expressions-star", "content": "## Syntax\n\nThe `*` expression can be used in a `SELECT` statement to select all columns that are projected in the `FROM` clause.\n\n```sql\nSELECT *\nFROM tbl;\n```", "position": 0, "token_count": 46, "has_code": true, "section_hierarchy": ["Syntax"], "metadata": {"chunk_id": "sql-expressions-star-000", "document_id": "sql-expressions-star", "position": 0, "token_count": 46, "has_code": true, "overlap_with_previous": false, "section_hierarchy": ["Syntax"], "file_path": "sql/expressions/star.md", "url": "/sql/expressions/star", "title": "Star Expression", "category": null, "tags": [], "section_url": "/sql/expressions/star#syntax"}}
{"chunk_id": "sql-expressions-star-001", "document_id": "sql-expressions-star", "content": "### `TABLE.*` and `STRUCT.*`\n\nThe `*` expression can be prepended by a table name to select only columns from that table.\n\n```sql\nSELECT tbl.*\nFROM tbl\nJOIN other_tbl USING (id);\n```\n\nSimilarly, the `*` expression can also be used to retrieve all keys from a struct as separate columns.\nThis is particularly useful when a prior operation creates a struct of unknown shape, or if a query must handle any potential struct keys.\nSee the [`STRUCT` data type]({% link docs/stable/sql/data_types/struct.md %}) and [`STRUCT` functions]({% link docs/stable/sql/functions/struct.md %}) pages for more details on working with structs.\n\nFor example:\n\n```sql\nSELECT st.* FROM (SELECT {'x': 1, 'y': 2, 'z': 3} AS st);", "position": 1, "token_count": 230, "has_code": true, "section_hierarchy": ["`TABLE.*` and `STRUCT.*`"], "metadata": {"chunk_id": "sql-expressions-star-001", "document_id": "sql-expressions-star", "position": 1, "token_count": 230, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["`TABLE.*` and `STRUCT.*`"], "file_path": "sql/expressions/star.md", "url": "/sql/expressions/star", "title": "Star Expression", "category": null, "tags": [], "section_url": "/sql/expressions/star#table-and-struct"}}
{"chunk_id": "sql-expressions-star-002", "document_id": "sql-expressions-star", "content": "```\n\n| x | y | z |\n|--:|--:|--:|\n| 1 | 2 | 3 |", "position": 2, "token_count": 32, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "sql-expressions-star-002", "document_id": "sql-expressions-star", "position": 2, "token_count": 32, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "sql/expressions/star.md", "url": "/sql/expressions/star", "title": "Star Expression", "category": null, "tags": [], "section_url": "/sql/expressions/star"}}
{"chunk_id": "sql-expressions-star-003", "document_id": "sql-expressions-star", "content": "### `EXCLUDE` Clause\n\n`EXCLUDE` allows you to exclude specific columns from the `*` expression.\n\n```sql\nSELECT * EXCLUDE (col)\nFROM tbl;\n```\n\n### `REPLACE` Clause\n\n`REPLACE` allows you to replace specific columns by alternative expressions.\n\n```sql\nSELECT * REPLACE (col1 / 1_000 AS col1, col2 / 1_000 AS col2)\nFROM tbl;\n```\n\n### `RENAME` Clause\n\n`RENAME` allows you to replace specific columns.\n\n```sql\nSELECT * RENAME (col1 AS height, col2 AS width)\nFROM tbl;\n```", "position": 3, "token_count": 142, "has_code": true, "section_hierarchy": ["`RENAME` Clause"], "metadata": {"chunk_id": "sql-expressions-star-003", "document_id": "sql-expressions-star", "position": 3, "token_count": 142, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["`RENAME` Clause"], "file_path": "sql/expressions/star.md", "url": "/sql/expressions/star", "title": "Star Expression", "category": null, "tags": [], "section_url": "/sql/expressions/star#rename-clause"}}
{"chunk_id": "sql-expressions-star-004", "document_id": "sql-expressions-star", "content": "### `RENAME` Clause\n\n`RENAME` allows you to replace specific columns.\n\n```sql\nSELECT * RENAME (col1 AS height, col2 AS width)\nFROM tbl;\n```\n\n### Column Filtering via Pattern Matching Operators\n\nThe [pattern matching operators]({% link docs/stable/sql/functions/pattern_matching.md %}) `LIKE`, `GLOB`, `SIMILAR TO` and their variants allow you to select columns by matching their names to patterns.\n\n```sql\nSELECT * LIKE 'col%'\nFROM tbl;\n```\n\n```sql\nSELECT * GLOB 'col*'\nFROM tbl;\n```\n\n```sql\nSELECT * SIMILAR TO 'col.'\nFROM tbl;\n```", "position": 4, "token_count": 169, "has_code": true, "section_hierarchy": ["Column Filtering via Pattern Matching Operators"], "metadata": {"chunk_id": "sql-expressions-star-004", "document_id": "sql-expressions-star", "position": 4, "token_count": 169, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Column Filtering via Pattern Matching Operators"], "file_path": "sql/expressions/star.md", "url": "/sql/expressions/star", "title": "Star Expression", "category": null, "tags": [], "section_url": "/sql/expressions/star#column-filtering-via-pattern-matching-operators"}}
{"chunk_id": "sql-expressions-star-005", "document_id": "sql-expressions-star", "content": "## `COLUMNS` Expression\n\nThe `COLUMNS` expression is similar to the regular star expression, but additionally allows you to execute the same expression on the resulting columns.\n\n```sql\nCREATE TABLE numbers (id INTEGER, number INTEGER);\nINSERT INTO numbers VALUES (1, 10), (2, 20), (3, NULL);\nSELECT min(COLUMNS(*)), count(COLUMNS(*)) FROM numbers;\n```\n\n| id | number | id | number |\n|---:|-------:|---:|-------:|\n| 1 | 10 | 3 | 2 |\n\n```sql\nSELECT\n min(COLUMNS(* REPLACE (number + id AS number))),\n count(COLUMNS(* EXCLUDE (number)))\nFROM numbers;", "position": 5, "token_count": 176, "has_code": true, "section_hierarchy": ["`COLUMNS` Expression"], "metadata": {"chunk_id": "sql-expressions-star-005", "document_id": "sql-expressions-star", "position": 5, "token_count": 176, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["`COLUMNS` Expression"], "file_path": "sql/expressions/star.md", "url": "/sql/expressions/star", "title": "Star Expression", "category": null, "tags": [], "section_url": "/sql/expressions/star#columns-expression"}}
{"chunk_id": "sql-expressions-star-006", "document_id": "sql-expressions-star", "content": "```\n\n| id | min(number := (number + id)) | id |\n|---:|-----------------------------:|---:|\n| 1 | 11 | 3 |\n\n`COLUMNS` expressions can also be combined, as long as they contain the same star expression:\n\n```sql\nSELECT COLUMNS(*) + COLUMNS(*) FROM numbers;\n```\n\n| id | number |\n|---:|-------:|\n| 2 | 20 |\n| 4 | 40 |\n| 6 | NULL |", "position": 6, "token_count": 145, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "sql-expressions-star-006", "document_id": "sql-expressions-star", "position": 6, "token_count": 145, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "sql/expressions/star.md", "url": "/sql/expressions/star", "title": "Star Expression", "category": null, "tags": [], "section_url": "/sql/expressions/star"}}
{"chunk_id": "sql-expressions-star-007", "document_id": "sql-expressions-star", "content": "### `COLUMNS` Expression in a `WHERE` Clause\n\n`COLUMNS` expressions can also be used in `WHERE` clauses. The conditions are applied to all columns and are combined using the logical `AND` operator.\n\n```sql\nSELECT *\nFROM (\n SELECT 0 AS x, 1 AS y, 2 AS z\n UNION ALL\n SELECT 1 AS x, 2 AS y, 3 AS z\n UNION ALL\n SELECT 2 AS x, 3 AS y, 4 AS z\n)\nWHERE COLUMNS(*) > 1; -- equivalent to: x > 1 AND y > 1 AND z > 1\n```\n\n| x | y | z |\n|--:|--:|--:|\n| 2 | 3 | 4 |\n\n### Regular Expressions in a `COLUMNS` Expression\n\n`COLUMNS` expressions don't currently support the pattern matching operators, but they do supports regular expression matching by simply passing a string constant in place of the star:\n\n```sql\nSELECT COLUMNS('(id|numbers?)') FROM numbers;\n```\n\n| id | number |\n|---:|-------:|\n| 1 | 10 |\n| 2 | 20 |\n| 3 | NULL |", "position": 7, "token_count": 251, "has_code": true, "section_hierarchy": ["Regular Expressions in a `COLUMNS` Expression"], "metadata": {"chunk_id": "sql-expressions-star-007", "document_id": "sql-expressions-star", "position": 7, "token_count": 251, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Regular Expressions in a `COLUMNS` Expression"], "file_path": "sql/expressions/star.md", "url": "/sql/expressions/star", "title": "Star Expression", "category": null, "tags": [], "section_url": "/sql/expressions/star#regular-expressions-in-a-columns-expression"}}
{"chunk_id": "sql-expressions-star-008", "document_id": "sql-expressions-star", "content": "### Renaming Columns with Regular Expressions in a `COLUMNS` Expression\n\nThe matches of capture groups in regular expressions can be used to rename matching columns.\nThe capture groups are one-indexed; `\\0` is the original column name.\n\nFor example, to select the first three letters of column names, run:\n\n```sql\nSELECT COLUMNS('(\\w{3}).*') AS '\\1' FROM numbers;\n```\n\n| id | num |\n|---:|-----:|\n| 1 | 10 |\n| 2 | 20 |\n| 3 | NULL |\n\nTo remove a colon (`:`) character in the middle of a column name, run:\n\n```sql\nCREATE TABLE tbl (\"Foo:Bar\" INTEGER, \"Foo:Baz\" INTEGER, \"Foo:Qux\" INTEGER);\nSELECT COLUMNS('(\\w*):(\\w*)') AS '\\1\\2' FROM tbl;", "position": 8, "token_count": 211, "has_code": true, "section_hierarchy": ["Renaming Columns with Regular Expressions in a `COLUMNS` Expression"], "metadata": {"chunk_id": "sql-expressions-star-008", "document_id": "sql-expressions-star", "position": 8, "token_count": 211, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Renaming Columns with Regular Expressions in a `COLUMNS` Expression"], "file_path": "sql/expressions/star.md", "url": "/sql/expressions/star", "title": "Star Expression", "category": null, "tags": [], "section_url": "/sql/expressions/star#renaming-columns-with-regular-expressions-in-a-columns-expression"}}
{"chunk_id": "sql-expressions-star-009", "document_id": "sql-expressions-star", "content": "```\n\nTo add the original column name to the expression alias, run:\n\n```sql\nSELECT min(COLUMNS(*)) AS \"min_\\0\" FROM numbers;\n```\n\n| min_id | min_number |\n|-------:|-----------:|\n| 1 | 10 |", "position": 9, "token_count": 80, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "sql-expressions-star-009", "document_id": "sql-expressions-star", "position": 9, "token_count": 80, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "sql/expressions/star.md", "url": "/sql/expressions/star", "title": "Star Expression", "category": null, "tags": [], "section_url": "/sql/expressions/star"}}
{"chunk_id": "sql-expressions-star-010", "document_id": "sql-expressions-star", "content": "### `COLUMNS` Lambda Function\n\n`COLUMNS` also supports passing in a lambda function. The lambda function will be evaluated for all columns present in the `FROM` clause, and only columns that match the lambda function will be returned. This allows the execution of arbitrary expressions in order to select and rename columns.\n\n```sql\nSELECT COLUMNS(c -> c LIKE '%num%') FROM numbers;\n```\n\n| number |\n|-------:|\n| 10 |\n| 20 |\n| NULL |\n\n### `COLUMNS` List\n\n`COLUMNS` also supports passing in a list of column names.\n\n```sql\nSELECT COLUMNS(['id', 'num']) FROM numbers;\n```\n\n| id | num |\n|---:|-----:|\n| 1 | 10 |\n| 2 | 20 |\n| 3 | NULL |", "position": 10, "token_count": 191, "has_code": true, "section_hierarchy": ["`COLUMNS` List"], "metadata": {"chunk_id": "sql-expressions-star-010", "document_id": "sql-expressions-star", "position": 10, "token_count": 191, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["`COLUMNS` List"], "file_path": "sql/expressions/star.md", "url": "/sql/expressions/star", "title": "Star Expression", "category": null, "tags": [], "section_url": "/sql/expressions/star#columns-list"}}
{"chunk_id": "sql-expressions-star-011", "document_id": "sql-expressions-star", "content": "## `*COLUMNS` Unpacked Columns\n\nThe `*COLUMNS` clause is a variation of `COLUMNS`, which supports all of the previously mentioned capabilities.\nThe difference is in how the expression expands.\n\n`*COLUMNS` will expand in-place, much like the [iterable unpacking behavior in Python](https://peps.python.org/pep-3132/), which inspired the `*` syntax.\nThis implies that the expression expands into the parent expression.\nAn example that shows this difference between `COLUMNS` and `*COLUMNS`:\n\nWith `COLUMNS`:\n\n```sql\nSELECT coalesce(COLUMNS(['a', 'b', 'c'])) AS result\nFROM (SELECT NULL a, 42 b, true c);", "position": 11, "token_count": 168, "has_code": true, "section_hierarchy": ["`*COLUMNS` Unpacked Columns"], "metadata": {"chunk_id": "sql-expressions-star-011", "document_id": "sql-expressions-star", "position": 11, "token_count": 168, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["`*COLUMNS` Unpacked Columns"], "file_path": "sql/expressions/star.md", "url": "/sql/expressions/star", "title": "Star Expression", "category": null, "tags": [], "section_url": "/sql/expressions/star#columns-unpacked-columns"}}
{"chunk_id": "sql-expressions-star-012", "document_id": "sql-expressions-star", "content": "```\n\n| result | result | result |\n|--------|-------:|-------:|\n| NULL | 42 | true |\n\nWith `*COLUMNS`, the expression expands in its parent expression `coalesce`, resulting in a single result column:\n\n```sql\nSELECT coalesce(*COLUMNS(['a', 'b', 'c'])) AS result\nFROM (SELECT NULL AS a, 42 AS b, true AS c);\n```\n\n| result |\n|-------:|\n| 42 |\n\n`*COLUMNS` also works with the `(*)` argument:\n\n```sql\nSELECT coalesce(*COLUMNS(*)) AS result\nFROM (SELECT NULL a, 42 AS b, true AS c);\n```\n\n| result |\n|-------:|\n| 42 |", "position": 12, "token_count": 203, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "sql-expressions-star-012", "document_id": "sql-expressions-star", "position": 12, "token_count": 203, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "sql/expressions/star.md", "url": "/sql/expressions/star", "title": "Star Expression", "category": null, "tags": [], "section_url": "/sql/expressions/star"}}
{"chunk_id": "sql-expressions-star-013", "document_id": "sql-expressions-star", "content": "## `STRUCT.*`\n\nThe `*` expression can also be used to retrieve all keys from a struct as separate columns.\nThis is particularly useful when a prior operation creates a struct of unknown shape, or if a query must handle any potential struct keys.\nSee the [`STRUCT` data type]({% link docs/stable/sql/data_types/struct.md %}) and [`STRUCT` functions]({% link docs/stable/sql/functions/struct.md %}) pages for more details on working with structs.\n\nFor example:\n\n```sql\nSELECT st.* FROM (SELECT {'x': 1, 'y': 2, 'z': 3} AS st);\n```\n\n| x | y | z |\n|--:|--:|--:|\n| 1 | 2 | 3 |", "position": 13, "token_count": 205, "has_code": true, "section_hierarchy": ["`STRUCT.*`"], "metadata": {"chunk_id": "sql-expressions-star-013", "document_id": "sql-expressions-star", "position": 13, "token_count": 205, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["`STRUCT.*`"], "file_path": "sql/expressions/star.md", "url": "/sql/expressions/star", "title": "Star Expression", "category": null, "tags": [], "section_url": "/sql/expressions/star#struct"}}

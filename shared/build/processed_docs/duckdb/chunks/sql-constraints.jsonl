{"chunk_id": "sql-constraints-000", "document_id": "sql-constraints", "content": "In SQL, constraints can be specified for tables. Constraints enforce certain properties over data that is inserted into a table. Constraints can be specified along with the schema of the table as part of the [`CREATE TABLE` statement]({% link docs/stable/sql/statements/create_table.md %}). In certain cases, constraints can also be added to a table using the [`ALTER TABLE` statement]({% link docs/stable/sql/statements/alter_table.md %}), but this is not currently supported for all constraints.\n\n> Warning Constraints have a strong impact on performance: they slow down loading and updates but speed up certain queries. Please consult the [Performance Guide]({% link docs/stable/guides/performance/schema.md %}#constraints) for details.\n\n## Syntax", "position": 0, "token_count": 181, "has_code": false, "section_hierarchy": ["Syntax"], "metadata": {"chunk_id": "sql-constraints-000", "document_id": "sql-constraints", "position": 0, "token_count": 181, "has_code": false, "overlap_with_previous": false, "section_hierarchy": ["Syntax"], "file_path": "sql/constraints.md", "url": "/sql/constraints", "title": "Constraints", "category": null, "tags": [], "section_url": "/sql/constraints#syntax"}}
{"chunk_id": "sql-constraints-001", "document_id": "sql-constraints", "content": "## Syntax\n\n## Check Constraint\n\nCheck constraints allow you to specify an arbitrary Boolean expression. Any columns that *do not* satisfy this expression violate the constraint. For example, we could enforce that the `name` column does not contain spaces using the following `CHECK` constraint.\n\n```sql\nCREATE TABLE students (name VARCHAR CHECK (NOT contains(name, ' ')));\nINSERT INTO students VALUES ('this name contains spaces');\n```\n\n```console\nConstraint Error:\nCHECK constraint failed on table students with expression CHECK((NOT contains(\"name\", ' ')))\n```\n\n## Not Null Constraint\n\nA not-null constraint specifies that the column cannot contain any `NULL` values. By default, all columns in tables are nullable. Adding `NOT NULL` to a column definition enforces that a column cannot contain `NULL` values.\n\n```sql\nCREATE TABLE students (name VARCHAR NOT NULL);\nINSERT INTO students VALUES (NULL);\n```\n\n```console\nConstraint Error:\nNOT NULL constraint failed: students.name\n```", "position": 1, "token_count": 232, "has_code": true, "section_hierarchy": ["Not Null Constraint"], "metadata": {"chunk_id": "sql-constraints-001", "document_id": "sql-constraints", "position": 1, "token_count": 232, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Not Null Constraint"], "file_path": "sql/constraints.md", "url": "/sql/constraints", "title": "Constraints", "category": null, "tags": [], "section_url": "/sql/constraints#not-null-constraint"}}
{"chunk_id": "sql-constraints-002", "document_id": "sql-constraints", "content": "## Primary Key and Unique Constraint\n\nPrimary key or unique constraints define a column, or set of columns, that are a unique identifier for a row in the table. The constraint enforces that the specified columns are *unique* within a table, i.e., that at most one row contains the given values for the set of columns.\n\n```sql\nCREATE TABLE students (id INTEGER PRIMARY KEY, name VARCHAR);\nINSERT INTO students VALUES (1, 'Student 1');\nINSERT INTO students VALUES (1, 'Student 2');\n```\n\n```console\nConstraint Error:\nDuplicate key \"id: 1\" violates primary key constraint\n```\n\n```sql\nCREATE TABLE students (id INTEGER, name VARCHAR, PRIMARY KEY (id, name));\nINSERT INTO students VALUES (1, 'Student 1');\nINSERT INTO students VALUES (1, 'Student 2');\nINSERT INTO students VALUES (1, 'Student 1');\n```\n\n```console\nConstraint Error:\nDuplicate key \"id: 1, name: Student 1\" violates primary key constraint", "position": 2, "token_count": 234, "has_code": true, "section_hierarchy": ["Primary Key and Unique Constraint"], "metadata": {"chunk_id": "sql-constraints-002", "document_id": "sql-constraints", "position": 2, "token_count": 234, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Primary Key and Unique Constraint"], "file_path": "sql/constraints.md", "url": "/sql/constraints", "title": "Constraints", "category": null, "tags": [], "section_url": "/sql/constraints#primary-key-and-unique-constraint"}}
{"chunk_id": "sql-constraints-003", "document_id": "sql-constraints", "content": "```\n\n```console\nConstraint Error:\nDuplicate key \"id: 1, name: Student 1\" violates primary key constraint\n```\n\nIn order to enforce this property efficiently, an [ART index is automatically created]({% link docs/stable/sql/indexes.md %}) for every primary key or unique constraint that is defined in the table.\n\nPrimary key constraints and unique constraints are identical except for two points:\n\n* A table can only have one primary key constraint defined, but many unique constraints\n* A primary key constraint also enforces the keys to not be `NULL`.\n\n```sql\nCREATE TABLE students (id INTEGER PRIMARY KEY, name VARCHAR, email VARCHAR UNIQUE);\nINSERT INTO students VALUES (1, 'Student 1', 'student1@uni.com');\nINSERT INTO students VALUES (2, 'Student 2', 'student1@uni.com');\n```\n\n```console\nConstraint Error:\nDuplicate key \"email: student1@uni.com\" violates unique constraint.", "position": 3, "token_count": 225, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "sql-constraints-003", "document_id": "sql-constraints", "position": 3, "token_count": 225, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "sql/constraints.md", "url": "/sql/constraints", "title": "Constraints", "category": null, "tags": [], "section_url": "/sql/constraints"}}
{"chunk_id": "sql-constraints-004", "document_id": "sql-constraints", "content": "```\n\n```console\nConstraint Error:\nDuplicate key \"email: student1@uni.com\" violates unique constraint.\n```\n\n```sql\nINSERT INTO students(id, name) VALUES (3, 'Student 3');\nINSERT INTO students(name, email) VALUES ('Student 3', 'student3@uni.com');\n```\n\n```console\nConstraint Error:\nNOT NULL constraint failed: students.id\n```\n\n> Warning Indexes have certain limitations that might result in constraints being evaluated too eagerly, leading to constraint errors such as `violates primary key constraint` and `violates unique constraint`. See the [indexes section for more details]({% link docs/stable/sql/indexes.md %}#index-limitations).", "position": 4, "token_count": 173, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "sql-constraints-004", "document_id": "sql-constraints", "position": 4, "token_count": 173, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "sql/constraints.md", "url": "/sql/constraints", "title": "Constraints", "category": null, "tags": [], "section_url": "/sql/constraints"}}
{"chunk_id": "sql-constraints-005", "document_id": "sql-constraints", "content": "## Foreign Keys\n\nForeign keys define a column, or set of columns, that refer to a primary key or unique constraint from *another* table. The constraint enforces that the key exists in the other table.\n\n```sql\nCREATE TABLE students (id INTEGER PRIMARY KEY, name VARCHAR);\nCREATE TABLE subjects (id INTEGER PRIMARY KEY, name VARCHAR);\nCREATE TABLE exams (\n exam_id INTEGER PRIMARY KEY,\n subject_id INTEGER REFERENCES subjects(id),\n student_id INTEGER REFERENCES students(id),\n grade INTEGER\n);\nINSERT INTO students VALUES (1, 'Student 1');\nINSERT INTO subjects VALUES (1, 'CS 101');\nINSERT INTO exams VALUES (1, 1, 1, 10);\nINSERT INTO exams VALUES (2, 1, 2, 10);\n```\n\n```console\nConstraint Error:\nViolates foreign key constraint because key \"id: 2\" does not exist in the referenced table", "position": 5, "token_count": 197, "has_code": true, "section_hierarchy": ["Foreign Keys"], "metadata": {"chunk_id": "sql-constraints-005", "document_id": "sql-constraints", "position": 5, "token_count": 197, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Foreign Keys"], "file_path": "sql/constraints.md", "url": "/sql/constraints", "title": "Constraints", "category": null, "tags": [], "section_url": "/sql/constraints#foreign-keys"}}
{"chunk_id": "sql-constraints-006", "document_id": "sql-constraints", "content": "```\n\n```console\nConstraint Error:\nViolates foreign key constraint because key \"id: 2\" does not exist in the referenced table\n```\n\nIn order to enforce this property efficiently, an [ART index is automatically created]({% link docs/stable/sql/indexes.md %}) for every foreign key constraint that is defined in the table.\n\n> Warning Indexes have certain limitations that might result in constraints being evaluated too eagerly, leading to constraint errors such as `violates primary key constraint` and `violates unique constraint`. See the [indexes section for more details]({% link docs/stable/sql/indexes.md %}#index-limitations).", "position": 6, "token_count": 151, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "sql-constraints-006", "document_id": "sql-constraints", "position": 6, "token_count": 151, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "sql/constraints.md", "url": "/sql/constraints", "title": "Constraints", "category": null, "tags": [], "section_url": "/sql/constraints"}}

{"chunk_id": "clients-c-prepared-000", "document_id": "clients-c-prepared", "content": "A prepared statement is a parameterized query. The query is prepared with question marks (`?`) or dollar symbols (`$1`) indicating the parameters of the query. Values can then be bound to these parameters, after which the prepared statement can be executed using those parameters. A single query can be prepared once and executed many times.\n\nPrepared statements are useful to:\n\n* Easily supply parameters to functions while avoiding string concatenation/SQL injection attacks.\n* Speeding up queries that will be executed many times with different parameters.\n\nDuckDB supports prepared statements in the C API with the `duckdb_prepare` method. The `duckdb_bind` family of functions is used to supply values for subsequent execution of the prepared statement using `duckdb_execute_prepared`. After we are done with the prepared statement it can be cleaned up using the `duckdb_destroy_prepare` method.", "position": 0, "token_count": 186, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "clients-c-prepared-000", "document_id": "clients-c-prepared", "position": 0, "token_count": 186, "has_code": false, "overlap_with_previous": false, "section_hierarchy": [], "file_path": "clients/c/prepared.md", "url": "/clients/c/prepared", "title": "Prepared Statements", "category": null, "tags": [], "section_url": "/clients/c/prepared"}}
{"chunk_id": "clients-c-prepared-001", "document_id": "clients-c-prepared", "content": "## Example\n\n```c\nduckdb_prepared_statement stmt;\nduckdb_result result;\nif (duckdb_prepare(con, \"INSERT INTO integers VALUES ($1, $2)\", &stmt) == DuckDBError) {\n // handle error\n}\n\nduckdb_bind_int32(stmt, 1, 42); // the parameter index starts counting at 1!\nduckdb_bind_int32(stmt, 2, 43);\n// NULL as second parameter means no result set is requested\nduckdb_execute_prepared(stmt, NULL);\nduckdb_destroy_prepare(&stmt);\n\n// we can also query result sets using prepared statements\nif (duckdb_prepare(con, \"SELECT * FROM integers WHERE i = ?\", &stmt) == DuckDBError) {\n // handle error\n}\nduckdb_bind_int32(stmt, 1, 42);\nduckdb_execute_prepared(stmt, &result);\n\n// do something with result\n\n// clean up\nduckdb_destroy_result(&result);\nduckdb_destroy_prepare(&stmt);", "position": 1, "token_count": 254, "has_code": true, "section_hierarchy": ["Example"], "metadata": {"chunk_id": "clients-c-prepared-001", "document_id": "clients-c-prepared", "position": 1, "token_count": 254, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Example"], "file_path": "clients/c/prepared.md", "url": "/clients/c/prepared", "title": "Prepared Statements", "category": null, "tags": [], "section_url": "/clients/c/prepared#example"}}
{"chunk_id": "clients-c-prepared-002", "document_id": "clients-c-prepared", "content": "```\n\nAfter calling `duckdb_prepare`, the prepared statement parameters can be inspected using `duckdb_nparams` and `duckdb_param_type`. In case the prepare fails, the error can be obtained through `duckdb_prepare_error`.\n\nIt is not required that the `duckdb_bind` family of functions matches the prepared statement parameter type exactly. The values will be auto-cast to the required value as required. For example, calling `duckdb_bind_int8` on a parameter type of `DUCKDB_TYPE_INTEGER` will work as expected.\n\n> Warning Do **not** use prepared statements to insert large amounts of data into DuckDB. Instead it is recommended to use the [Appender]({% link docs/stable/clients/c/appender.md %}).", "position": 2, "token_count": 185, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "clients-c-prepared-002", "document_id": "clients-c-prepared", "position": 2, "token_count": 185, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "clients/c/prepared.md", "url": "/clients/c/prepared", "title": "Prepared Statements", "category": null, "tags": [], "section_url": "/clients/c/prepared"}}
{"chunk_id": "clients-c-prepared-003", "document_id": "clients-c-prepared", "content": "## API Reference Overview", "position": 3, "token_count": 7, "has_code": false, "section_hierarchy": ["API Reference Overview"], "metadata": {"chunk_id": "clients-c-prepared-003", "document_id": "clients-c-prepared", "position": 3, "token_count": 7, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["API Reference Overview"], "file_path": "clients/c/prepared.md", "url": "/clients/c/prepared", "title": "Prepared Statements", "category": null, "tags": [], "section_url": "/clients/c/prepared#api-reference-overview"}}
{"chunk_id": "clients-c-prepared-004", "document_id": "clients-c-prepared", "content": "duckdb_state duckdb_prepare(duckdb_connection connection, const char *query, duckdb_prepared_statement *out_prepared_statement);\nvoid duckdb_destroy_prepare(duckdb_prepared_statement *prepared_statement);\nconst char *duckdb_prepare_error(duckdb_prepared_statement prepared_statement);\nidx_t duckdb_nparams(duckdb_prepared_statement prepared_statement);\nconst char *duckdb_parameter_name(duckdb_prepared_statement prepared_statement, idx_t index);\nduckdb_type duckdb_param_type(duckdb_prepared_statement prepared_statement, idx_t param_idx);\nduckdb_logical_type duckdb_param_logical_type(duckdb_prepared_statement prepared_statement, idx_t param_idx);\nduckdb_state duckdb_clear_bindings(duckdb_prepared_statement prepared_statement);", "position": 4, "token_count": 222, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "clients-c-prepared-004", "document_id": "clients-c-prepared", "position": 4, "token_count": 222, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "clients/c/prepared.md", "url": "/clients/c/prepared", "title": "Prepared Statements", "category": null, "tags": [], "section_url": "/clients/c/prepared"}}
{"chunk_id": "clients-c-prepared-005", "document_id": "clients-c-prepared", "content": "duckdb_state duckdb_clear_bindings(duckdb_prepared_statement prepared_statement);\nduckdb_statement_type duckdb_prepared_statement_type(duckdb_prepared_statement statement);\nidx_t duckdb_prepared_statement_column_count(duckdb_prepared_statement prepared_statement);\nconst char *duckdb_prepared_statement_column_name(duckdb_prepared_statement prepared_statement, idx_t col_idx);\nduckdb_logical_type duckdb_prepared_statement_column_logical_type(duckdb_prepared_statement prepared_statement, idx_t col_idx);\nduckdb_type duckdb_prepared_statement_column_type(duckdb_prepared_statement prepared_statement, idx_t col_idx);", "position": 5, "token_count": 184, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "clients-c-prepared-005", "document_id": "clients-c-prepared", "position": 5, "token_count": 184, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "clients/c/prepared.md", "url": "/clients/c/prepared", "title": "Prepared Statements", "category": null, "tags": [], "section_url": "/clients/c/prepared"}}
{"chunk_id": "clients-c-prepared-006", "document_id": "clients-c-prepared", "content": "#### `duckdb_prepare`\n\nCreate a prepared statement object from a query.\n\nNote that after calling `duckdb_prepare`, the prepared statement should always be destroyed using\n`duckdb_destroy_prepare`, even if the prepare fails.\n\nIf the prepare fails, `duckdb_prepare_error` can be called to obtain the reason why the prepare failed.\n\n##### Syntax\n\nduckdb_state duckdb_prepare(\n duckdb_connection connection,\n const char *query,\n duckdb_prepared_statement *out_prepared_statement\n);\n\n##### Parameters\n\n* `connection`: The connection object\n* `query`: The SQL query to prepare\n* `out_prepared_statement`: The resulting prepared statement object\n\n##### Return Value\n\n`DuckDBSuccess` on success or `DuckDBError` on failure.", "position": 6, "token_count": 185, "has_code": false, "section_hierarchy": ["Return Value"], "metadata": {"chunk_id": "clients-c-prepared-006", "document_id": "clients-c-prepared", "position": 6, "token_count": 185, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Return Value"], "file_path": "clients/c/prepared.md", "url": "/clients/c/prepared", "title": "Prepared Statements", "category": null, "tags": [], "section_url": "/clients/c/prepared#return-value"}}
{"chunk_id": "clients-c-prepared-007", "document_id": "clients-c-prepared", "content": "#### `duckdb_destroy_prepare`\n\nCloses the prepared statement and de-allocates all memory allocated for the statement.\n\n##### Syntax\n\nvoid duckdb_destroy_prepare(\n duckdb_prepared_statement *prepared_statement\n);\n\n##### Parameters\n\n* `prepared_statement`: The prepared statement to destroy.\n\n#### `duckdb_prepare_error`\n\nReturns the error message associated with the given prepared statement.\nIf the prepared statement has no error message, this returns `nullptr` instead.\n\nThe error message should not be freed. It will be de-allocated when `duckdb_destroy_prepare` is called.\n\n##### Syntax\n\nconst char *duckdb_prepare_error(\n duckdb_prepared_statement prepared_statement\n);\n\n##### Parameters\n\n* `prepared_statement`: The prepared statement to obtain the error from.\n\n##### Return Value\n\nThe error message, or `nullptr` if there is none.", "position": 7, "token_count": 215, "has_code": false, "section_hierarchy": ["Return Value"], "metadata": {"chunk_id": "clients-c-prepared-007", "document_id": "clients-c-prepared", "position": 7, "token_count": 215, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Return Value"], "file_path": "clients/c/prepared.md", "url": "/clients/c/prepared", "title": "Prepared Statements", "category": null, "tags": [], "section_url": "/clients/c/prepared#return-value"}}
{"chunk_id": "clients-c-prepared-008", "document_id": "clients-c-prepared", "content": "#### `duckdb_nparams`\n\nReturns the number of parameters that can be provided to the given prepared statement.\n\nReturns 0 if the query was not successfully prepared.\n\n##### Syntax\n\nidx_t duckdb_nparams(\n duckdb_prepared_statement prepared_statement\n);\n\n##### Parameters\n\n* `prepared_statement`: The prepared statement to obtain the number of parameters for.\n\n#### `duckdb_parameter_name`\n\nReturns the name used to identify the parameter\nThe returned string should be freed using `duckdb_free`.\n\nReturns NULL if the index is out of range for the provided prepared statement.\n\n##### Syntax\n\nconst char *duckdb_parameter_name(\n duckdb_prepared_statement prepared_statement,\n idx_t index\n);\n\n##### Parameters\n\n* `prepared_statement`: The prepared statement for which to get the parameter name from.", "position": 8, "token_count": 199, "has_code": false, "section_hierarchy": ["Parameters"], "metadata": {"chunk_id": "clients-c-prepared-008", "document_id": "clients-c-prepared", "position": 8, "token_count": 199, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Parameters"], "file_path": "clients/c/prepared.md", "url": "/clients/c/prepared", "title": "Prepared Statements", "category": null, "tags": [], "section_url": "/clients/c/prepared#parameters"}}
{"chunk_id": "clients-c-prepared-009", "document_id": "clients-c-prepared", "content": "#### `duckdb_param_type`\n\nReturns the parameter type for the parameter at the given index.\n\nReturns `DUCKDB_TYPE_INVALID` if the parameter index is out of range or the statement was not successfully prepared.\n\n##### Syntax\n\nduckdb_type duckdb_param_type(\n duckdb_prepared_statement prepared_statement,\n idx_t param_idx\n);\n\n##### Parameters\n\n* `prepared_statement`: The prepared statement.\n* `param_idx`: The parameter index.\n\n##### Return Value\n\nThe parameter type", "position": 9, "token_count": 131, "has_code": false, "section_hierarchy": ["Return Value"], "metadata": {"chunk_id": "clients-c-prepared-009", "document_id": "clients-c-prepared", "position": 9, "token_count": 131, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Return Value"], "file_path": "clients/c/prepared.md", "url": "/clients/c/prepared", "title": "Prepared Statements", "category": null, "tags": [], "section_url": "/clients/c/prepared#return-value"}}
{"chunk_id": "clients-c-prepared-010", "document_id": "clients-c-prepared", "content": "#### `duckdb_param_logical_type`\n\nReturns the logical type for the parameter at the given index.\n\nReturns `nullptr` if the parameter index is out of range or the statement was not successfully prepared.\n\nThe return type of this call should be destroyed with `duckdb_destroy_logical_type`.\n\n##### Syntax\n\nduckdb_logical_type duckdb_param_logical_type(\n duckdb_prepared_statement prepared_statement,\n idx_t param_idx\n);\n\n##### Parameters\n\n* `prepared_statement`: The prepared statement.\n* `param_idx`: The parameter index.\n\n##### Return Value\n\nThe logical type of the parameter\n\n#### `duckdb_clear_bindings`\n\nClear the params bind to the prepared statement.\n\n##### Syntax\n\nduckdb_state duckdb_clear_bindings(\n duckdb_prepared_statement prepared_statement\n);", "position": 10, "token_count": 210, "has_code": false, "section_hierarchy": ["Syntax"], "metadata": {"chunk_id": "clients-c-prepared-010", "document_id": "clients-c-prepared", "position": 10, "token_count": 210, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Syntax"], "file_path": "clients/c/prepared.md", "url": "/clients/c/prepared", "title": "Prepared Statements", "category": null, "tags": [], "section_url": "/clients/c/prepared#syntax"}}
{"chunk_id": "clients-c-prepared-011", "document_id": "clients-c-prepared", "content": "#### `duckdb_prepared_statement_type`\n\nReturns the statement type of the statement to be executed\n\n##### Syntax\n\nduckdb_statement_type duckdb_prepared_statement_type(\n duckdb_prepared_statement statement\n);\n\n##### Parameters\n\n* `statement`: The prepared statement.\n\n##### Return Value\n\nduckdb_statement_type value or DUCKDB_STATEMENT_TYPE_INVALID\n\n#### `duckdb_prepared_statement_column_count`\n\nReturns the number of columns present in a the result of the prepared statement. If any of the column types are invalid,\nthe result will be 1.\n\n##### Syntax\n\nidx_t duckdb_prepared_statement_column_count(\n duckdb_prepared_statement prepared_statement\n);\n\n##### Parameters\n\n* `prepared_statement`: The prepared statement.\n\n##### Return Value\n\nThe number of columns present in the result of the prepared statement.", "position": 11, "token_count": 209, "has_code": false, "section_hierarchy": ["Return Value"], "metadata": {"chunk_id": "clients-c-prepared-011", "document_id": "clients-c-prepared", "position": 11, "token_count": 209, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Return Value"], "file_path": "clients/c/prepared.md", "url": "/clients/c/prepared", "title": "Prepared Statements", "category": null, "tags": [], "section_url": "/clients/c/prepared#return-value"}}
{"chunk_id": "clients-c-prepared-012", "document_id": "clients-c-prepared", "content": "#### `duckdb_prepared_statement_column_name`\n\nReturns the name of the specified column of the result of the prepared_statement.\nThe returned string should be freed using `duckdb_free`.\n\nReturns `nullptr` if the column is out of range.\n\n##### Syntax\n\nconst char *duckdb_prepared_statement_column_name(\n duckdb_prepared_statement prepared_statement,\n idx_t col_idx\n);\n\n##### Parameters\n\n* `prepared_statement`: The prepared statement.\n* `col_idx`: The column index.\n\n##### Return Value\n\nThe column name of the specified column.", "position": 12, "token_count": 147, "has_code": false, "section_hierarchy": ["Return Value"], "metadata": {"chunk_id": "clients-c-prepared-012", "document_id": "clients-c-prepared", "position": 12, "token_count": 147, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Return Value"], "file_path": "clients/c/prepared.md", "url": "/clients/c/prepared", "title": "Prepared Statements", "category": null, "tags": [], "section_url": "/clients/c/prepared#return-value"}}
{"chunk_id": "clients-c-prepared-013", "document_id": "clients-c-prepared", "content": "#### `duckdb_prepared_statement_column_logical_type`\n\nReturns the column type of the specified column of the result of the prepared_statement.\n\nReturns `DUCKDB_TYPE_INVALID` if the column is out of range.\nThe return type of this call should be destroyed with `duckdb_destroy_logical_type`.\n\n##### Syntax\n\nduckdb_logical_type duckdb_prepared_statement_column_logical_type(\n duckdb_prepared_statement prepared_statement,\n idx_t col_idx\n);\n\n##### Parameters\n\n* `prepared_statement`: The prepared statement to fetch the column type from.\n* `col_idx`: The column index.\n\n##### Return Value\n\nThe logical type of the specified column.", "position": 13, "token_count": 170, "has_code": false, "section_hierarchy": ["Return Value"], "metadata": {"chunk_id": "clients-c-prepared-013", "document_id": "clients-c-prepared", "position": 13, "token_count": 170, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Return Value"], "file_path": "clients/c/prepared.md", "url": "/clients/c/prepared", "title": "Prepared Statements", "category": null, "tags": [], "section_url": "/clients/c/prepared#return-value"}}
{"chunk_id": "clients-c-prepared-014", "document_id": "clients-c-prepared", "content": "#### `duckdb_prepared_statement_column_type`\n\nReturns the column type of the specified column of the result of the prepared_statement.\n\nReturns `DUCKDB_TYPE_INVALID` if the column is out of range.\n\n##### Syntax\n\nduckdb_type duckdb_prepared_statement_column_type(\n duckdb_prepared_statement prepared_statement,\n idx_t col_idx\n);\n\n##### Parameters\n\n* `prepared_statement`: The prepared statement to fetch the column type from.\n* `col_idx`: The column index.\n\n##### Return Value\n\nThe type of the specified column.", "position": 14, "token_count": 142, "has_code": false, "section_hierarchy": ["Return Value"], "metadata": {"chunk_id": "clients-c-prepared-014", "document_id": "clients-c-prepared", "position": 14, "token_count": 142, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Return Value"], "file_path": "clients/c/prepared.md", "url": "/clients/c/prepared", "title": "Prepared Statements", "category": null, "tags": [], "section_url": "/clients/c/prepared#return-value"}}

{"chunk_id": "sql-statements-update-000", "document_id": "sql-statements-update", "content": "The `UPDATE` statement modifies the values of rows in a table.\n\n## Examples\n\nFor every row where `i` is `NULL`, set the value to 0 instead:\n\n```sql\nUPDATE tbl\nSET i = 0\nWHERE i IS NULL;\n```\n\nSet all values of `i` to 1 and all values of `j` to 2:\n\n```sql\nUPDATE tbl\nSET i = 1, j = 2;\n```\n\n## Syntax\n\n`UPDATE` changes the values of the specified columns in all rows that satisfy the condition. Only the columns to be modified need be mentioned in the `SET` clause; columns not explicitly modified retain their previous values.", "position": 0, "token_count": 142, "has_code": true, "section_hierarchy": ["Syntax"], "metadata": {"chunk_id": "sql-statements-update-000", "document_id": "sql-statements-update", "position": 0, "token_count": 142, "has_code": true, "overlap_with_previous": false, "section_hierarchy": ["Syntax"], "file_path": "sql/statements/update.md", "url": "/sql/statements/update", "title": "UPDATE Statement", "category": null, "tags": [], "section_url": "/sql/statements/update#syntax"}}
{"chunk_id": "sql-statements-update-001", "document_id": "sql-statements-update", "content": "## Update from Other Table\n\nA table can be updated based upon values from another table. This can be done by specifying a table in a `FROM` clause, or using a sub-select statement. Both approaches have the benefit of completing the `UPDATE` operation in bulk for increased performance.\n\n```sql\nCREATE OR REPLACE TABLE original AS\n SELECT 1 AS key, 'original value' AS value\n UNION ALL\n SELECT 2 AS key, 'original value 2' AS value;\n\nCREATE OR REPLACE TABLE new AS\n SELECT 1 AS key, 'new value' AS value\n UNION ALL\n SELECT 2 AS key, 'new value 2' AS value;\n\nSELECT *\nFROM original;\n```\n\n| key | value |\n|-----|------------------|\n| 1 | original value |\n| 2 | original value 2 |\n\n```sql\nUPDATE original\n SET value = new.value\n FROM new\n WHERE original.key = new.key;\n```\n\nOr:\n\n```sql\nUPDATE original\n SET value = (\n SELECT\n new.value\n FROM new\n WHERE original.key = new.key\n );", "position": 1, "token_count": 236, "has_code": true, "section_hierarchy": ["Update from Other Table"], "metadata": {"chunk_id": "sql-statements-update-001", "document_id": "sql-statements-update", "position": 1, "token_count": 236, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Update from Other Table"], "file_path": "sql/statements/update.md", "url": "/sql/statements/update", "title": "UPDATE Statement", "category": null, "tags": [], "section_url": "/sql/statements/update#update-from-other-table"}}
{"chunk_id": "sql-statements-update-002", "document_id": "sql-statements-update", "content": "```\n\nOr:\n\n```sql\nUPDATE original\n SET value = (\n SELECT\n new.value\n FROM new\n WHERE original.key = new.key\n );\n```\n\n```sql\nSELECT *\nFROM original;\n```\n\n| key | value |\n|-----|-------------|\n| 1 | new value |\n| 2 | new value 2 |", "position": 2, "token_count": 87, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "sql-statements-update-002", "document_id": "sql-statements-update", "position": 2, "token_count": 87, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "sql/statements/update.md", "url": "/sql/statements/update", "title": "UPDATE Statement", "category": null, "tags": [], "section_url": "/sql/statements/update"}}
{"chunk_id": "sql-statements-update-003", "document_id": "sql-statements-update", "content": "## Update from Same Table\n\nThe only difference between this case and the above is that a different table alias must be specified on both the target table and the source table.\nIn this example `AS true_original` and `AS new` are both required.\n\n```sql\nUPDATE original AS true_original\n SET value = (\n SELECT\n new.value || ' a change!' AS value\n FROM original AS new\n WHERE true_original.key = new.key\n );\n```", "position": 3, "token_count": 100, "has_code": true, "section_hierarchy": ["Update from Same Table"], "metadata": {"chunk_id": "sql-statements-update-003", "document_id": "sql-statements-update", "position": 3, "token_count": 100, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Update from Same Table"], "file_path": "sql/statements/update.md", "url": "/sql/statements/update", "title": "UPDATE Statement", "category": null, "tags": [], "section_url": "/sql/statements/update#update-from-same-table"}}
{"chunk_id": "sql-statements-update-004", "document_id": "sql-statements-update", "content": "## Update Using Joins\n\nTo select the rows to update, `UPDATE` statements can use the `FROM` clause and express joins via the `WHERE` clause. For example:\n\n```sql\nCREATE TABLE city (name VARCHAR, revenue BIGINT, country_code VARCHAR);\nCREATE TABLE country (code VARCHAR, name VARCHAR);\nINSERT INTO city VALUES ('Paris', 700, 'FR'), ('Lyon', 200, 'FR'), ('Brussels', 400, 'BE');\nINSERT INTO country VALUES ('FR', 'France'), ('BE', 'Belgium');\n```\n\nTo increase the revenue of all cities in France, join the `city` and the `country` tables, and filter on the latter:\n\n```sql\nUPDATE city\nSET revenue = revenue + 100\nFROM country\nWHERE city.country_code = country.code\n AND country.name = 'France';\n```\n\n```sql\nSELECT *\nFROM city;", "position": 4, "token_count": 218, "has_code": true, "section_hierarchy": ["Update Using Joins"], "metadata": {"chunk_id": "sql-statements-update-004", "document_id": "sql-statements-update", "position": 4, "token_count": 218, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Update Using Joins"], "file_path": "sql/statements/update.md", "url": "/sql/statements/update", "title": "UPDATE Statement", "category": null, "tags": [], "section_url": "/sql/statements/update#update-using-joins"}}
{"chunk_id": "sql-statements-update-005", "document_id": "sql-statements-update", "content": "```\n\n```sql\nSELECT *\nFROM city;\n```\n\n| name | revenue | country_code |\n|----------|--------:|--------------|\n| Paris | 800 | FR |\n| Lyon | 300 | FR |\n| Brussels | 400 | BE |", "position": 5, "token_count": 84, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "sql-statements-update-005", "document_id": "sql-statements-update", "position": 5, "token_count": 84, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "sql/statements/update.md", "url": "/sql/statements/update", "title": "UPDATE Statement", "category": null, "tags": [], "section_url": "/sql/statements/update"}}
{"chunk_id": "sql-statements-update-006", "document_id": "sql-statements-update", "content": "## Upsert (Insert or Update)\n\nSee the [Insert documentation]({% link docs/stable/sql/statements/insert.md %}#on-conflict-clause) for details.", "position": 6, "token_count": 45, "has_code": false, "section_hierarchy": ["Upsert (Insert or Update)"], "metadata": {"chunk_id": "sql-statements-update-006", "document_id": "sql-statements-update", "position": 6, "token_count": 45, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Upsert (Insert or Update)"], "file_path": "sql/statements/update.md", "url": "/sql/statements/update", "title": "UPDATE Statement", "category": null, "tags": [], "section_url": "/sql/statements/update#upsert-insert-or-update"}}

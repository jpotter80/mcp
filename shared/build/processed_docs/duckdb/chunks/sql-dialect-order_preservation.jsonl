{"chunk_id": "sql-dialect-order_preservation-000", "document_id": "sql-dialect-order_preservation", "content": "For many operations, DuckDB preserves the order of rows, similarly to data frame libraries such as Pandas.\n\n## Example\n\nTake the following table for example:\n\n```sql\nCREATE TABLE tbl AS\n SELECT *\n FROM (VALUES (1, 'a'), (2, 'b'), (3, 'c')) t(x, y);\n\nSELECT *\nFROM tbl;\n```\n\n| x | y |\n|--:|---|\n| 1 | a |\n| 2 | b |\n| 3 | c |\n\nLet's take the following query that returns the rows where `x` is an odd number:\n\n```sql\nSELECT *\nFROM tbl\nWHERE x % 2 == 1;\n```\n\n| x | y |\n|--:|---|\n| 1 | a |\n| 3 | c |\n\nBecause the row `(1, 'a')` occurs before `(3, 'c')` in the original table, it is guaranteed to come before that row in this table too.", "position": 0, "token_count": 222, "has_code": true, "section_hierarchy": ["Example"], "metadata": {"chunk_id": "sql-dialect-order_preservation-000", "document_id": "sql-dialect-order_preservation", "position": 0, "token_count": 222, "has_code": true, "overlap_with_previous": false, "section_hierarchy": ["Example"], "file_path": "sql/dialect/order_preservation.md", "url": "/sql/dialect/order_preservation", "title": "Order Preservation", "category": null, "tags": [], "section_url": "/sql/dialect/order_preservation#example"}}
{"chunk_id": "sql-dialect-order_preservation-001", "document_id": "sql-dialect-order_preservation", "content": "## Clauses\n\nThe following clauses guarantee that the original row order is preserved:\n\n* `COPY` (see [Insertion Order](#insertion-order))\n* `FROM` with a single table\n* `LIMIT`\n* `OFFSET`\n* `SELECT`\n* `UNION ALL`\n* `WHERE`\n* Window functions with an empty `OVER` clause\n* Common table expressions and table subqueries as long as they only contains the aforementioned components\n\n> Tip `row_number() OVER ()` allows turning the original row order into an explicit column that can be referenced in the operations that don't preserve row order by default. On materialized tables, the `rowid` pseudo-column can be used to the same effect.\n\nThe following operations **do not** guarantee that the row order is preserved:", "position": 1, "token_count": 167, "has_code": false, "section_hierarchy": ["Clauses"], "metadata": {"chunk_id": "sql-dialect-order_preservation-001", "document_id": "sql-dialect-order_preservation", "position": 1, "token_count": 167, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Clauses"], "file_path": "sql/dialect/order_preservation.md", "url": "/sql/dialect/order_preservation", "title": "Order Preservation", "category": null, "tags": [], "section_url": "/sql/dialect/order_preservation#clauses"}}
{"chunk_id": "sql-dialect-order_preservation-002", "document_id": "sql-dialect-order_preservation", "content": "The following operations **do not** guarantee that the row order is preserved:\n\n* `FROM` with multiple tables and/or subqueries\n* `JOIN`\n* `UNION`\n* `USING SAMPLE`\n* Whole-table aggregation (the input order, that is, the order in which rows are fed into [order-sensitive aggregate functions](https://duckdb.org/docs/sql/functions/aggregates.html#order-by-clause-in-aggregate-functions) is not guaranteed unless explicitly specified in the aggregate function)\n* `GROUP BY` (neither in- nor output order are guaranteed)\n* `ORDER BY` (specifically, `ORDER BY` may not use a [stable algorithm](https://en.m.wikipedia.org/wiki/Stable_algorithm))\n* Scalar subqueries", "position": 2, "token_count": 180, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "sql-dialect-order_preservation-002", "document_id": "sql-dialect-order_preservation", "position": 2, "token_count": 180, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "sql/dialect/order_preservation.md", "url": "/sql/dialect/order_preservation", "title": "Order Preservation", "category": null, "tags": [], "section_url": "/sql/dialect/order_preservation"}}
{"chunk_id": "sql-dialect-order_preservation-003", "document_id": "sql-dialect-order_preservation", "content": "## Insertion Order\n\nBy default, the following components preserve insertion order:\n\n* [CSV reader]({% link docs/stable/data/csv/overview.md %}#order-preservation) (`read_csv` function)\n* [JSON reader]({% link docs/stable/data/json/overview.md %}#order-preservation) (`read_json` function)\n* [Parquet reader]({% link docs/stable/data/parquet/overview.md %}#order-preservation) (`read_parquet` function)\n\nPreservation of insertion order is controlled by the `preserve_insertion_order` [configuration option]({% link docs/stable/configuration/overview.md %}).\nThis setting is `true` by default, indicating that the order should be preserved.\nTo change this setting, use:\n\n```sql\nSET preserve_insertion_order = false;\n```", "position": 3, "token_count": 210, "has_code": true, "section_hierarchy": ["Insertion Order"], "metadata": {"chunk_id": "sql-dialect-order_preservation-003", "document_id": "sql-dialect-order_preservation", "position": 3, "token_count": 210, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Insertion Order"], "file_path": "sql/dialect/order_preservation.md", "url": "/sql/dialect/order_preservation", "title": "Order Preservation", "category": null, "tags": [], "section_url": "/sql/dialect/order_preservation#insertion-order"}}

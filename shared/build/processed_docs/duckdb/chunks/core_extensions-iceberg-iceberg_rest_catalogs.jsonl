{"chunk_id": "core_extensions-iceberg-iceberg_rest_catalogs-000", "document_id": "core_extensions-iceberg-iceberg_rest_catalogs", "content": "The `iceberg` extension supports attaching Iceberg REST Catalogs. Before attaching an Iceberg REST Catalog, you must install the `iceberg` extension by following the instructions located in the [overview]({% link docs/stable/core_extensions/iceberg/overview.md %}).\n\nIf you are attaching to an Iceberg REST Catalog managed by Amazon, please see the instructions for attaching to [Amazon S3 tables]({% link docs/stable/core_extensions/iceberg/amazon_s3_tables.md %}) or [Amazon SageMaker Makehouse]({% link docs/stable/core_extensions/iceberg/amazon_sagemaker_lakehouse.md %}).\n\nFor all other Iceberg REST Catalogs, you can follow the instructions below. Please see the [Examples](#specific-catalog-examples) section for questions about specific catalogs.\n\nMost Iceberg REST Catalogs authenticate via OAuth2. You can use the existing DuckDB secret workflow to store login credentials for the OAuth2 service.", "position": 0, "token_count": 236, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "core_extensions-iceberg-iceberg_rest_catalogs-000", "document_id": "core_extensions-iceberg-iceberg_rest_catalogs", "position": 0, "token_count": 236, "has_code": false, "overlap_with_previous": false, "section_hierarchy": [], "file_path": "core_extensions/iceberg/iceberg_rest_catalogs.md", "url": "/core_extensions/iceberg/iceberg_rest_catalogs", "title": "Iceberg REST Catalogs", "category": null, "tags": [], "section_url": "/core_extensions/iceberg/iceberg_rest_catalogs"}}
{"chunk_id": "core_extensions-iceberg-iceberg_rest_catalogs-001", "document_id": "core_extensions-iceberg-iceberg_rest_catalogs", "content": "Most Iceberg REST Catalogs authenticate via OAuth2. You can use the existing DuckDB secret workflow to store login credentials for the OAuth2 service.\n\n```sql\nCREATE SECRET iceberg_secret (\n TYPE iceberg,\n CLIENT_ID '⟨admin⟩',\n CLIENT_SECRET '⟨password⟩',\n OAUTH2_SERVER_URI '⟨http://irc_host_url.com/v1/oauth/tokens⟩'\n);", "position": 1, "token_count": 111, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "core_extensions-iceberg-iceberg_rest_catalogs-001", "document_id": "core_extensions-iceberg-iceberg_rest_catalogs", "position": 1, "token_count": 111, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "core_extensions/iceberg/iceberg_rest_catalogs.md", "url": "/core_extensions/iceberg/iceberg_rest_catalogs", "title": "Iceberg REST Catalogs", "category": null, "tags": [], "section_url": "/core_extensions/iceberg/iceberg_rest_catalogs"}}
{"chunk_id": "core_extensions-iceberg-iceberg_rest_catalogs-002", "document_id": "core_extensions-iceberg-iceberg_rest_catalogs", "content": "```\n\nIf you already have a Bearer token, you can pass it directly to your `CREATE SECRET` statement\n\n```sql\nCREATE SECRET iceberg_secret (\n TYPE iceberg,\n TOKEN '⟨bearer_token⟩'\n);\n```\n\nYou can attach the Iceberg catalog with the following [`ATTACH`]({% link docs/stable/sql/statements/attach.md %}) statement.\n\n```sql\nLOAD httpfs;\nATTACH '⟨warehouse⟩' AS iceberg_catalog (\n TYPE iceberg,\n SECRET iceberg_secret, -- pass a specific secret name to prevent ambiguity\n ENDPOINT '⟨https://rest_endpoint.com⟩'\n);\n```\n\nTo see the available tables run\n```sql\nSHOW ALL TABLES;\n```", "position": 2, "token_count": 167, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "core_extensions-iceberg-iceberg_rest_catalogs-002", "document_id": "core_extensions-iceberg-iceberg_rest_catalogs", "position": 2, "token_count": 167, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "core_extensions/iceberg/iceberg_rest_catalogs.md", "url": "/core_extensions/iceberg/iceberg_rest_catalogs", "title": "Iceberg REST Catalogs", "category": null, "tags": [], "section_url": "/core_extensions/iceberg/iceberg_rest_catalogs"}}
{"chunk_id": "core_extensions-iceberg-iceberg_rest_catalogs-003", "document_id": "core_extensions-iceberg-iceberg_rest_catalogs", "content": "## `ATTACH` Options\n\nA REST Catalog with OAuth2 authorization can also be attached with just an `ATTACH` statement. See the complete list of `ATTACH` options for a REST catalog below.", "position": 3, "token_count": 44, "has_code": false, "section_hierarchy": ["`ATTACH` Options"], "metadata": {"chunk_id": "core_extensions-iceberg-iceberg_rest_catalogs-003", "document_id": "core_extensions-iceberg-iceberg_rest_catalogs", "position": 3, "token_count": 44, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["`ATTACH` Options"], "file_path": "core_extensions/iceberg/iceberg_rest_catalogs.md", "url": "/core_extensions/iceberg/iceberg_rest_catalogs", "title": "Iceberg REST Catalogs", "category": null, "tags": [], "section_url": "/core_extensions/iceberg/iceberg_rest_catalogs#attach-options"}}
{"chunk_id": "core_extensions-iceberg-iceberg_rest_catalogs-004", "document_id": "core_extensions-iceberg-iceberg_rest_catalogs", "content": "| Parameter | Type | Default | Description |\n|-------------------------------|-----------|----------|-------------------------------------------------------------------------------------------------------|\n| `ENDPOINT_TYPE` | `VARCHAR` | `NULL` | Used for attaching S3Tables or Glue catalogs. Allowed values are 'GLUE' and 'S3_TABLES' |", "position": 4, "token_count": 216, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "core_extensions-iceberg-iceberg_rest_catalogs-004", "document_id": "core_extensions-iceberg-iceberg_rest_catalogs", "position": 4, "token_count": 216, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "core_extensions/iceberg/iceberg_rest_catalogs.md", "url": "/core_extensions/iceberg/iceberg_rest_catalogs", "title": "Iceberg REST Catalogs", "category": null, "tags": [], "section_url": "/core_extensions/iceberg/iceberg_rest_catalogs"}}
{"chunk_id": "core_extensions-iceberg-iceberg_rest_catalogs-005", "document_id": "core_extensions-iceberg-iceberg_rest_catalogs", "content": "| `ENDPOINT_TYPE` | `VARCHAR` | `NULL` | Used for attaching S3Tables or Glue catalogs. Allowed values are 'GLUE' and 'S3_TABLES' |\n| `ENDPOINT` | `VARCHAR` | `NULL` | URL endpoint to communicate with the REST Catalog. Cannot be used in conjunction with `ENDPOINT_TYPE` |\n| `SECRET` | `VARCHAR` | `NULL` | Name of secret used to communicate with the REST Catalog |\n| `CLIENT_ID` | `VARCHAR` | `NULL` | CLIENT_ID used for Secret |\n| `CLIENT_SECRET` | `VARCHAR` | `NULL` | CLIENT_SECRET needed for Secret |\n| `DEFAULT_REGION` | `VARCHAR` | `NULL` | A Default region to use when communicating with the storage layer |\n| `OAUTH2_SERVER_URI` | `VARCHAR` | `NULL` | OAuth2 server url for getting a Bearer Token |", "position": 5, "token_count": 226, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "core_extensions-iceberg-iceberg_rest_catalogs-005", "document_id": "core_extensions-iceberg-iceberg_rest_catalogs", "position": 5, "token_count": 226, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "core_extensions/iceberg/iceberg_rest_catalogs.md", "url": "/core_extensions/iceberg/iceberg_rest_catalogs", "title": "Iceberg REST Catalogs", "category": null, "tags": [], "section_url": "/core_extensions/iceberg/iceberg_rest_catalogs"}}
{"chunk_id": "core_extensions-iceberg-iceberg_rest_catalogs-006", "document_id": "core_extensions-iceberg-iceberg_rest_catalogs", "content": "| `OAUTH2_SERVER_URI` | `VARCHAR` | `NULL` | OAuth2 server url for getting a Bearer Token |\n| `AUTHORIZATION_TYPE` | `VARCHAR` | `OAUTH2` | Pass `SigV4` for Catalogs the require SigV4 authorization, `none` for catalogs that don't need auth |\n| `SUPPORT_NESTED_NAMESPACES` | `BOOLEAN` | `true` | Option for catalogs that support nested namespaces. |\n| `SUPPORT_STAGE_CREATE` | `BOOLEAN` | `false` | Option for catalogs that do not support stage create. |", "position": 6, "token_count": 154, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "core_extensions-iceberg-iceberg_rest_catalogs-006", "document_id": "core_extensions-iceberg-iceberg_rest_catalogs", "position": 6, "token_count": 154, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "core_extensions/iceberg/iceberg_rest_catalogs.md", "url": "/core_extensions/iceberg/iceberg_rest_catalogs", "title": "Iceberg REST Catalogs", "category": null, "tags": [], "section_url": "/core_extensions/iceberg/iceberg_rest_catalogs"}}
{"chunk_id": "core_extensions-iceberg-iceberg_rest_catalogs-007", "document_id": "core_extensions-iceberg-iceberg_rest_catalogs", "content": "The following options can only be passed to a `CREATE SECRET` statement, and they require `AUTHORIZATION_TYPE` to be `OAUTH2`\n\n| Parameter | Type | Default | Description |\n|---------------------|-----------|---------|-----------------------------------------------------|\n| `OAUTH2_GRANT_TYPE` | `VARCHAR` | `NULL` | Grant Type when requesting an OAuth Token |\n| `OAUTH2_SCOPE` | `VARCHAR` | `NULL` | Requested scope for the returned OAuth Access Token |", "position": 7, "token_count": 204, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "core_extensions-iceberg-iceberg_rest_catalogs-007", "document_id": "core_extensions-iceberg-iceberg_rest_catalogs", "position": 7, "token_count": 204, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "core_extensions/iceberg/iceberg_rest_catalogs.md", "url": "/core_extensions/iceberg/iceberg_rest_catalogs", "title": "Iceberg REST Catalogs", "category": null, "tags": [], "section_url": "/core_extensions/iceberg/iceberg_rest_catalogs"}}
{"chunk_id": "core_extensions-iceberg-iceberg_rest_catalogs-008", "document_id": "core_extensions-iceberg-iceberg_rest_catalogs", "content": "### Supported Operations\n\nThe DuckDB Iceberg extensions supports the following operations when used with a REST catalog attached:\n\n- `CREATE/DROP SCHEMA`\n- `CREATE/DROP TABLE`\n- `INSERT INTO`\n- `SELECT`\n\nSince these operations are supported, the following would also work:\n\n```sql\nCOPY FROM DATABASE duckdb_db TO iceberg_datalake;\n\n-- Or\nCOPY FROM DATABASE iceberg_datalake to duckdb_db;\n```\n\nThis functionality enables deep copies between Iceberg and DuckDB storage.", "position": 8, "token_count": 112, "has_code": true, "section_hierarchy": ["Supported Operations"], "metadata": {"chunk_id": "core_extensions-iceberg-iceberg_rest_catalogs-008", "document_id": "core_extensions-iceberg-iceberg_rest_catalogs", "position": 8, "token_count": 112, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Supported Operations"], "file_path": "core_extensions/iceberg/iceberg_rest_catalogs.md", "url": "/core_extensions/iceberg/iceberg_rest_catalogs", "title": "Iceberg REST Catalogs", "category": null, "tags": [], "section_url": "/core_extensions/iceberg/iceberg_rest_catalogs#supported-operations"}}
{"chunk_id": "core_extensions-iceberg-iceberg_rest_catalogs-009", "document_id": "core_extensions-iceberg-iceberg_rest_catalogs", "content": "### Metadata Operations\n\nThe functions `iceberg_metadata` and `iceberg_snapshots` are also available to use with an Iceberg REST catalog using a fully qualified path, e.g.\n\n```sql\nSELECT * FROM iceberg_metadata(my_datalake.default.t)\n\n-- Or\nSELECT * FROM iceberg_snapshots(my_datalake.default.t)\n```\n\nThis functionality enables the user to grab a `snapshot_from_id` to do **time-traveling**.\n\n```sql\nSELECT * FROM my_datalake.default.t AT (VERSION => ⟨SNAPSHOT_ID⟩)\n\n-- Or using a timestamp\nSELECT * FROM my_datalake.default.t AT (TIMESTAMP => TIMESTAMP '2025-09-22 12:32:43.217')\n```", "position": 9, "token_count": 192, "has_code": true, "section_hierarchy": ["Metadata Operations"], "metadata": {"chunk_id": "core_extensions-iceberg-iceberg_rest_catalogs-009", "document_id": "core_extensions-iceberg-iceberg_rest_catalogs", "position": 9, "token_count": 192, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Metadata Operations"], "file_path": "core_extensions/iceberg/iceberg_rest_catalogs.md", "url": "/core_extensions/iceberg/iceberg_rest_catalogs", "title": "Iceberg REST Catalogs", "category": null, "tags": [], "section_url": "/core_extensions/iceberg/iceberg_rest_catalogs#metadata-operations"}}
{"chunk_id": "core_extensions-iceberg-iceberg_rest_catalogs-010", "document_id": "core_extensions-iceberg-iceberg_rest_catalogs", "content": "### Interoperability with DuckLake\n\nThe DuckDB Iceberg extensions exposes a function to do metadata only copies of the Iceberg metadata to DuckLake, which enables users to query Iceberg tables as if they where DuckLake tables.\n\n```sql\n-- Given that we have an Iceberg catalog attached aliased to iceberg_datalake\nATTACH `ducklake:my_ducklake.ducklake` AS my_ducklake;\n\nCALL iceberg_to_ducklake('iceberg_datalake', 'my_ducklake');\n```\n\nIt is also possible to skip a set of tables provided the `skip_tables` parameter.\n\n```sql\nCALL iceberg_to_ducklake('iceberg_datalake', 'my_ducklake', skip_tables := ['table_to_skip']);\n```\n\n### Unsupported Operations\n\nThe following operations are not supported by the Iceberg DuckDB extension:\n\n- `UPDATE`\n- `DELETE`\n- `MERGE INTO`\n- `ALTER TABLE`", "position": 10, "token_count": 228, "has_code": true, "section_hierarchy": ["Unsupported Operations"], "metadata": {"chunk_id": "core_extensions-iceberg-iceberg_rest_catalogs-010", "document_id": "core_extensions-iceberg-iceberg_rest_catalogs", "position": 10, "token_count": 228, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Unsupported Operations"], "file_path": "core_extensions/iceberg/iceberg_rest_catalogs.md", "url": "/core_extensions/iceberg/iceberg_rest_catalogs", "title": "Iceberg REST Catalogs", "category": null, "tags": [], "section_url": "/core_extensions/iceberg/iceberg_rest_catalogs#unsupported-operations"}}
{"chunk_id": "core_extensions-iceberg-iceberg_rest_catalogs-011", "document_id": "core_extensions-iceberg-iceberg_rest_catalogs", "content": "## Specific Catalog Examples\n\n### R2 Catalog\n\nTo attach to an [R2 cloudflare](https://developers.cloudflare.com/r2/data-catalog/) managed catalog follow the attach steps below.\n\n```sql\nCREATE SECRET r2_secret (\n TYPE iceberg,\n TOKEN '⟨r2_token⟩'\n);\n\n```\n\nYou can create a token by following the [create an API token](https://developers.cloudflare.com/r2/data-catalog/get-started/#3-create-an-api-token) steps in getting started.\n\nThen, attach the catalog with the following commands.\n\n```sql\nATTACH '⟨warehouse⟩' AS my_r2_catalog (\n TYPE iceberg,\n ENDPOINT '⟨catalog-uri⟩'\n);\n```\n\nThe variables for `warehouse` and `catalog-uri` will be available under the settings of the desired R2 Object Storage Catalog (R2 Object Store > Catalog name > Settings).", "position": 11, "token_count": 222, "has_code": true, "section_hierarchy": ["R2 Catalog"], "metadata": {"chunk_id": "core_extensions-iceberg-iceberg_rest_catalogs-011", "document_id": "core_extensions-iceberg-iceberg_rest_catalogs", "position": 11, "token_count": 222, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["R2 Catalog"], "file_path": "core_extensions/iceberg/iceberg_rest_catalogs.md", "url": "/core_extensions/iceberg/iceberg_rest_catalogs", "title": "Iceberg REST Catalogs", "category": null, "tags": [], "section_url": "/core_extensions/iceberg/iceberg_rest_catalogs#r2-catalog"}}
{"chunk_id": "core_extensions-iceberg-iceberg_rest_catalogs-012", "document_id": "core_extensions-iceberg-iceberg_rest_catalogs", "content": "### Polaris\n\nTo attach to a [Polaris](https://polaris.apache.org) catalog the following commands will work.\n\n```sql\nCREATE SECRET polaris_secret (\n TYPE iceberg,\n CLIENT_ID '⟨admin⟩',\n CLIENT_SECRET '⟨password⟩',\n);\n```\n\n```sql\nATTACH 'quickstart_catalog' AS polaris_catalog (\n TYPE iceberg,\n ENDPOINT '⟨polaris_rest_catalog_endpoint⟩'\n);\n```", "position": 12, "token_count": 115, "has_code": true, "section_hierarchy": ["Polaris"], "metadata": {"chunk_id": "core_extensions-iceberg-iceberg_rest_catalogs-012", "document_id": "core_extensions-iceberg-iceberg_rest_catalogs", "position": 12, "token_count": 115, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Polaris"], "file_path": "core_extensions/iceberg/iceberg_rest_catalogs.md", "url": "/core_extensions/iceberg/iceberg_rest_catalogs", "title": "Iceberg REST Catalogs", "category": null, "tags": [], "section_url": "/core_extensions/iceberg/iceberg_rest_catalogs#polaris"}}
{"chunk_id": "core_extensions-iceberg-iceberg_rest_catalogs-013", "document_id": "core_extensions-iceberg-iceberg_rest_catalogs", "content": "### Lakekeeper\n\nTo attach to a [Lakekeeper](https://docs.lakekeeper.io) catalog the following commands will work.\n\n```sql\nCREATE SECRET lakekeeper_secret (\n TYPE iceberg,\n CLIENT_ID '⟨admin⟩',\n CLIENT_SECRET '⟨password⟩',\n OAUTH2_SCOPE '⟨scope⟩',\n OAUTH2_SERVER_URI '⟨lakekeeper_oauth_url⟩'\n);\n```\n\n```sql\nATTACH '⟨warehouse⟩' AS lakekeeper_catalog (\n TYPE iceberg,\n ENDPOINT '⟨lakekeeper_irc_url⟩',\n SECRET '⟨lakekeeper_secret⟩'\n);\n```", "position": 13, "token_count": 157, "has_code": true, "section_hierarchy": ["Lakekeeper"], "metadata": {"chunk_id": "core_extensions-iceberg-iceberg_rest_catalogs-013", "document_id": "core_extensions-iceberg-iceberg_rest_catalogs", "position": 13, "token_count": 157, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Lakekeeper"], "file_path": "core_extensions/iceberg/iceberg_rest_catalogs.md", "url": "/core_extensions/iceberg/iceberg_rest_catalogs", "title": "Iceberg REST Catalogs", "category": null, "tags": [], "section_url": "/core_extensions/iceberg/iceberg_rest_catalogs#lakekeeper"}}
{"chunk_id": "core_extensions-iceberg-iceberg_rest_catalogs-014", "document_id": "core_extensions-iceberg-iceberg_rest_catalogs", "content": "## Limitations\n\nReading from Iceberg REST Catalogs backed by remote storage that is not S3 or S3Tables is not yet supported.", "position": 14, "token_count": 31, "has_code": false, "section_hierarchy": ["Limitations"], "metadata": {"chunk_id": "core_extensions-iceberg-iceberg_rest_catalogs-014", "document_id": "core_extensions-iceberg-iceberg_rest_catalogs", "position": 14, "token_count": 31, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Limitations"], "file_path": "core_extensions/iceberg/iceberg_rest_catalogs.md", "url": "/core_extensions/iceberg/iceberg_rest_catalogs", "title": "Iceberg REST Catalogs", "category": null, "tags": [], "section_url": "/core_extensions/iceberg/iceberg_rest_catalogs#limitations"}}

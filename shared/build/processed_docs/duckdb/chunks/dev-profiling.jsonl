{"chunk_id": "dev-profiling-000", "document_id": "dev-profiling", "content": "Profiling is essential to help understand why certain queries exhibit specific performance characteristics.\nDuckDB contains several built-in features to enable query profiling, which this page covers.\nFor a high-level example of using `EXPLAIN`, see the [“Inspect Query Plans” page]({% link docs/stable/guides/meta/explain.md %}).", "position": 0, "token_count": 79, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "dev-profiling-000", "document_id": "dev-profiling", "position": 0, "token_count": 79, "has_code": false, "overlap_with_previous": false, "section_hierarchy": [], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling"}}
{"chunk_id": "dev-profiling-001", "document_id": "dev-profiling", "content": "## Statements\n\n### The `EXPLAIN` Statement\n\nThe first step to profiling a query can include examining the query plan.\nThe [`EXPLAIN`]({% link docs/stable/guides/meta/explain.md %}) statement shows the query plan and describes what is going on under the hood.\n\n### The `EXPLAIN ANALYZE` Statement\n\nThe query plan helps developers understand the performance characteristics of the query.\nHowever, it is often also necessary to examine the performance numbers of individual operators and the cardinalities that pass through them.\nThe [`EXPLAIN ANALYZE`]({% link docs/stable/guides/meta/explain_analyze.md %}) statement enables obtaining these, as it pretty-prints the query plan and also executes the query.\nThus, it provides the actual run-time performance numbers.", "position": 1, "token_count": 174, "has_code": false, "section_hierarchy": ["The `EXPLAIN ANALYZE` Statement"], "metadata": {"chunk_id": "dev-profiling-001", "document_id": "dev-profiling", "position": 1, "token_count": 174, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["The `EXPLAIN ANALYZE` Statement"], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling#the-explain-analyze-statement"}}
{"chunk_id": "dev-profiling-002", "document_id": "dev-profiling", "content": "### The `FORMAT` Option\n\nThe `EXPLAIN [ANALYZE]` statement allows exporting to several formats:\n\n* `text` – default ASCII-art style output\n* `graphviz` – produces a DOT output, which can be rendered with [Graphviz](https://graphviz.org/)\n* `html` – produces an HTML output, which can rendered with [treeflex](https://dumptyd.github.io/treeflex/)\n* `json` – produces a JSON output\n\nTo specify a format, use the `FORMAT` tag:\n\n```sql\nEXPLAIN (FORMAT html) SELECT 42 AS x;\n```", "position": 2, "token_count": 151, "has_code": true, "section_hierarchy": ["The `FORMAT` Option"], "metadata": {"chunk_id": "dev-profiling-002", "document_id": "dev-profiling", "position": 2, "token_count": 151, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["The `FORMAT` Option"], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling#the-format-option"}}
{"chunk_id": "dev-profiling-003", "document_id": "dev-profiling", "content": "## Pragmas\n\nDuckDB supports several pragmas for turning profiling on and off and controlling the level of detail in the profiling output.\n\nThe following pragmas are available and can be set using either `PRAGMA` or `SET`.\nThey can also be reset using `RESET`, followed by the setting name.\nFor more information, see the [“Profiling”]({% link docs/stable/configuration/pragmas.md %}#profiling) section of the pragmas page.", "position": 3, "token_count": 114, "has_code": false, "section_hierarchy": ["Pragmas"], "metadata": {"chunk_id": "dev-profiling-003", "document_id": "dev-profiling", "position": 3, "token_count": 114, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Pragmas"], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling#pragmas"}}
{"chunk_id": "dev-profiling-004", "document_id": "dev-profiling", "content": "| Setting | Description | Default | Options |", "position": 4, "token_count": 11, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "dev-profiling-004", "document_id": "dev-profiling", "position": 4, "token_count": 11, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling"}}
{"chunk_id": "dev-profiling-005", "document_id": "dev-profiling", "content": "|-------------------------------------------------", "position": 5, "token_count": 52, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "dev-profiling-005", "document_id": "dev-profiling", "position": 5, "token_count": 52, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling"}}
{"chunk_id": "dev-profiling-006", "document_id": "dev-profiling", "content": "---------------------------------------------------", "position": 6, "token_count": 53, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "dev-profiling-006", "document_id": "dev-profiling", "position": 6, "token_count": 53, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling"}}
{"chunk_id": "dev-profiling-007", "document_id": "dev-profiling", "content": "---------------------------------------------------", "position": 7, "token_count": 53, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "dev-profiling-007", "document_id": "dev-profiling", "position": 7, "token_count": 53, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling"}}
{"chunk_id": "dev-profiling-008", "document_id": "dev-profiling", "content": "---------------------------------------------------", "position": 8, "token_count": 53, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "dev-profiling-008", "document_id": "dev-profiling", "position": 8, "token_count": 53, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling"}}
{"chunk_id": "dev-profiling-009", "document_id": "dev-profiling", "content": "------------------|--------------------------------", "position": 9, "token_count": 53, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "dev-profiling-009", "document_id": "dev-profiling", "position": 9, "token_count": 53, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling"}}
{"chunk_id": "dev-profiling-010", "document_id": "dev-profiling", "content": "---------------------------|-----------------------", "position": 10, "token_count": 53, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "dev-profiling-010", "document_id": "dev-profiling", "position": 10, "token_count": 53, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling"}}
{"chunk_id": "dev-profiling-011", "document_id": "dev-profiling", "content": "---------------------------------------------|-----", "position": 11, "token_count": 53, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "dev-profiling-011", "document_id": "dev-profiling", "position": 11, "token_count": 53, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling"}}
{"chunk_id": "dev-profiling-012", "document_id": "dev-profiling", "content": "----|----------------------------------------------", "position": 12, "token_count": 53, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "dev-profiling-012", "document_id": "dev-profiling", "position": 12, "token_count": 53, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling"}}
{"chunk_id": "dev-profiling-013", "document_id": "dev-profiling", "content": "---------------------------------------------------", "position": 13, "token_count": 53, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "dev-profiling-013", "document_id": "dev-profiling", "position": 13, "token_count": 53, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling"}}
{"chunk_id": "dev-profiling-014", "document_id": "dev-profiling", "content": "--------------------------------------------|", "position": 14, "token_count": 47, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "dev-profiling-014", "document_id": "dev-profiling", "position": 14, "token_count": 47, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling"}}
{"chunk_id": "dev-profiling-015", "document_id": "dev-profiling", "content": "| [`enable_profiling`]({% link docs/stable/configuration/pragmas.md %}#enable_profiling), [`enable_profile`]({% link docs/stable/configuration/pragmas.md %}#enable_profiling) | Turn on profiling | `query_tree` | `query_tree`, `json`, `query_tree_optimizer`, `no_output` |\n| [`profiling_coverage`]({% link docs/stable/configuration/pragmas.md %}#profiling_coverage) | Set the operators to profile | `SELECT` | `SELECT`, `ALL` |\n| [`profiling_output`]({% link docs/stable/configuration/pragmas.md %}#profiling_output) | Set a profiling output file | Console | A filepath |", "position": 15, "token_count": 205, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "dev-profiling-015", "document_id": "dev-profiling", "position": 15, "token_count": 205, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling"}}
{"chunk_id": "dev-profiling-016", "document_id": "dev-profiling", "content": "| [`profiling_output`]({% link docs/stable/configuration/pragmas.md %}#profiling_output) | Set a profiling output file | Console | A filepath |\n| [`profiling_mode`]({% link docs/stable/configuration/pragmas.md %}#profiling_mode) | Toggle additional optimizer and planner metrics | `standard` | `standard`, `detailed` |\n| [`custom_profiling_settings`]({% link docs/stable/configuration/pragmas.md %}#custom_profiling_metrics) | Enable or disable specific metrics | All metrics except those activated by detailed profiling | A JSON object that matches the following: `{\"METRIC_NAME\": \"boolean\", ...}`. See the [metrics](#metrics) section below. |", "position": 16, "token_count": 207, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "dev-profiling-016", "document_id": "dev-profiling", "position": 16, "token_count": 207, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling"}}
{"chunk_id": "dev-profiling-017", "document_id": "dev-profiling", "content": "| [`disable_profiling`]({% link docs/stable/configuration/pragmas.md %}#disable_profiling), [`disable_profile`]({% link docs/stable/configuration/pragmas.md %}#disable_profiling) | Turn off profiling | | |", "position": 17, "token_count": 79, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "dev-profiling-017", "document_id": "dev-profiling", "position": 17, "token_count": 79, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling"}}
{"chunk_id": "dev-profiling-018", "document_id": "dev-profiling", "content": "## Metrics\n\nThe query tree has two types of nodes: the `QUERY_ROOT` and `OPERATOR` nodes.\nThe `QUERY_ROOT` refers exclusively to the top-level node, and the metrics it contains are measured over the entire query.\nThe `OPERATOR` nodes refer to the individual operators in the query plan.\nSome metrics are only available for `QUERY_ROOT` nodes, while others are only for `OPERATOR` nodes.\nThe table below describes each metric and which nodes they are available for.\n\nOther than `QUERY_NAME` and `OPERATOR_TYPE`, it is possible to turn all metrics on or off.", "position": 18, "token_count": 134, "has_code": false, "section_hierarchy": ["Metrics"], "metadata": {"chunk_id": "dev-profiling-018", "document_id": "dev-profiling", "position": 18, "token_count": 134, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Metrics"], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling#metrics"}}
{"chunk_id": "dev-profiling-019", "document_id": "dev-profiling", "content": "| Metric | Return type | Unit | Query | Operator | Description |\n|-------------------------|-------------|----------|:-----:|:--------:|-------------------------------------------------------------------------------------------------------------------------------|\n| `BLOCKED_THREAD_TIME` | `double` | seconds | ✅ | | The total time threads are blocked |", "position": 19, "token_count": 240, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "dev-profiling-019", "document_id": "dev-profiling", "position": 19, "token_count": 240, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling"}}
{"chunk_id": "dev-profiling-020", "document_id": "dev-profiling", "content": "| `BLOCKED_THREAD_TIME` | `double` | seconds | ✅ | | The total time threads are blocked |\n| `EXTRA_INFO` | `string` | | ✅ | ✅ | Unique operator metrics |\n| `LATENCY` | `double` | seconds | ✅ | | The total elapsed query execution time |\n| `OPERATOR_CARDINALITY` | `uint64` | absolute | | ✅ | The cardinality of each operator, i.e., the number of rows it returns to its parent. Operator equivalent of `ROWS_RETURNED` |\n| `OPERATOR_ROWS_SCANNED` | `uint64` | absolute | | ✅ | The total rows scanned by each operator |\n| `OPERATOR_TIMING` | `double` | seconds | | ✅ | The time taken by each operator. Operator equivalent of `LATENCY` |\n| `OPERATOR_TYPE` | `string` | | | ✅ | The name of each operator |\n| `QUERY_NAME` | `string` | | ✅ | | The query string |", "position": 20, "token_count": 221, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "dev-profiling-020", "document_id": "dev-profiling", "position": 20, "token_count": 221, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling"}}
{"chunk_id": "dev-profiling-021", "document_id": "dev-profiling", "content": "| `OPERATOR_TYPE` | `string` | | | ✅ | The name of each operator |\n| `QUERY_NAME` | `string` | | ✅ | | The query string |\n| `RESULT_SET_SIZE` | `uint64` | bytes | ✅ | ✅ | The size of the result |\n| `ROWS_RETURNED` | `uint64` | absolute | ✅ | | The number of rows returned by the query |", "position": 21, "token_count": 96, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "dev-profiling-021", "document_id": "dev-profiling", "position": 21, "token_count": 96, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling"}}
{"chunk_id": "dev-profiling-022", "document_id": "dev-profiling", "content": "### Cumulative Metrics\n\nDuckDB also supports several cumulative metrics that are available in all nodes.\nIn the `QUERY_ROOT` node, these metrics represent the sum of the corresponding metrics across all operators in the query.\nThe `OPERATOR` nodes represent the sum of the operator's specific metric and those of all its children recursively.\n\nThese cumulative metrics can be enabled independently, even if the underlying specific metrics are disabled.\nThe table below shows the cumulative metrics.\nIt also depicts the metric based on which DuckDB calculates the cumulative metric.", "position": 22, "token_count": 119, "has_code": false, "section_hierarchy": ["Cumulative Metrics"], "metadata": {"chunk_id": "dev-profiling-022", "document_id": "dev-profiling", "position": 22, "token_count": 119, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Cumulative Metrics"], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling#cumulative-metrics"}}
{"chunk_id": "dev-profiling-023", "document_id": "dev-profiling", "content": "These cumulative metrics can be enabled independently, even if the underlying specific metrics are disabled.\nThe table below shows the cumulative metrics.\nIt also depicts the metric based on which DuckDB calculates the cumulative metric.\n\n| Metric | Unit | Metric calculated cumulatively |\n|---------------------------|----------|--------------------------------|\n| `CPU_TIME` | seconds | `OPERATOR_TIMING` |\n| `CUMULATIVE_CARDINALITY` | absolute | `OPERATOR_CARDINALITY` |\n| `CUMULATIVE_ROWS_SCANNED` | absolute | `OPERATOR_ROWS_SCANNED` |\n\n`CPU_TIME` measures the cumulative operator timings.\nIt does not include time spent in other stages, like parsing, query planning, etc.\nThus, for some queries, the `LATENCY` in the `QUERY_ROOT` can be greater than the `CPU_TIME`.", "position": 23, "token_count": 241, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "dev-profiling-023", "document_id": "dev-profiling", "position": 23, "token_count": 241, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling"}}
{"chunk_id": "dev-profiling-024", "document_id": "dev-profiling", "content": "## Detailed Profiling\n\nWhen the `profiling_mode` is set to `detailed`, an extra set of metrics are enabled, which are only available in the `QUERY_ROOT` node.\nThese include [`OPTIMIZER`](#optimizer-metrics), [`PLANNER`](#planner-metrics), and [`PHYSICAL_PLANNER`](#physical-planner-metrics) metrics.\nThey are measured in seconds and returned as a `double`.\nIt is possible to toggle each of these additional metrics individually.", "position": 24, "token_count": 123, "has_code": false, "section_hierarchy": ["Detailed Profiling"], "metadata": {"chunk_id": "dev-profiling-024", "document_id": "dev-profiling", "position": 24, "token_count": 123, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Detailed Profiling"], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling#detailed-profiling"}}
{"chunk_id": "dev-profiling-025", "document_id": "dev-profiling", "content": "### Optimizer Metrics\n\nAt the `QUERY_ROOT` node, there are metrics that measure the time taken by each [optimizer]({% link docs/stable/internals/overview.md %}#optimizer).\nThese metrics are only available when the specific optimizer is enabled.\nThe available optimizations can be queried using the [`duckdb_optimizers()`{:.language-sql .highlight} table function]({% link docs/stable/sql/meta/duckdb_table_functions.md %}#duckdb_optimizers).\n\nEach optimizer has a corresponding metric that follows the template: `OPTIMIZER_⟨OPTIMIZER_NAME⟩`{:.language-sql .highlight}.\nFor example, the `OPTIMIZER_JOIN_ORDER` metric corresponds to the `JOIN_ORDER` optimizer.\n\nAdditionally, the following metrics are available to support the optimizer metrics:", "position": 25, "token_count": 217, "has_code": false, "section_hierarchy": ["Optimizer Metrics"], "metadata": {"chunk_id": "dev-profiling-025", "document_id": "dev-profiling", "position": 25, "token_count": 217, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Optimizer Metrics"], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling#optimizer-metrics"}}
{"chunk_id": "dev-profiling-026", "document_id": "dev-profiling", "content": "Additionally, the following metrics are available to support the optimizer metrics:\n\n* `ALL_OPTIMIZERS`: Enables all optimizer metrics and measures the time the optimizer parent node takes.\n* `CUMULATIVE_OPTIMIZER_TIMING`: The cumulative sum of all optimizer metrics. It is usable without turning on all optimizer metrics.", "position": 26, "token_count": 82, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "dev-profiling-026", "document_id": "dev-profiling", "position": 26, "token_count": 82, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling"}}
{"chunk_id": "dev-profiling-027", "document_id": "dev-profiling", "content": "### Planner Metrics\n\nThe planner is responsible for generating the logical plan. Currently, DuckDB measures two metrics in the planner:\n\n* `PLANNER`: The time to generate the logical plan from the parsed SQL nodes.\n* `PLANNER_BINDING`: The time taken to bind the logical plan.\n\n### Physical Planner Metrics\n\nThe physical planner is responsible for generating the physical plan from the logical plan.\nThe following are the metrics supported in the physical planner:\n\n* `PHYSICAL_PLANNER`: The time spent generating the physical plan.\n* `PHYSICAL_PLANNER_COLUMN_BINDING`: The time spent binding the columns in the logical plan to physical columns.\n* `PHYSICAL_PLANNER_RESOLVE_TYPES`: The time spent resolving the types in the logical plan to physical types.\n* `PHYSICAL_PLANNER_CREATE_PLAN`: The time spent creating the physical plan.", "position": 27, "token_count": 183, "has_code": false, "section_hierarchy": ["Physical Planner Metrics"], "metadata": {"chunk_id": "dev-profiling-027", "document_id": "dev-profiling", "position": 27, "token_count": 183, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Physical Planner Metrics"], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling#physical-planner-metrics"}}
{"chunk_id": "dev-profiling-028", "document_id": "dev-profiling", "content": "## Custom Metrics Examples\n\nThe following examples demonstrate how to enable custom profiling and set the output format to `json`.\nIn the first example, we enable profiling and set the output to a file.\nWe only enable `EXTRA_INFO`, `OPERATOR_CARDINALITY`, and `OPERATOR_TIMING`.\n\n```sql\nCREATE TABLE students (name VARCHAR, sid INTEGER);\nCREATE TABLE exams (eid INTEGER, subject VARCHAR, sid INTEGER);\nINSERT INTO students VALUES ('Mark', 1), ('Joe', 2), ('Matthew', 3);\nINSERT INTO exams VALUES (10, 'Physics', 1), (20, 'Chemistry', 2), (30, 'Literature', 3);\n\nPRAGMA enable_profiling = 'json';\nPRAGMA profiling_output = '/path/to/file.json';", "position": 28, "token_count": 198, "has_code": true, "section_hierarchy": ["Custom Metrics Examples"], "metadata": {"chunk_id": "dev-profiling-028", "document_id": "dev-profiling", "position": 28, "token_count": 198, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Custom Metrics Examples"], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling#custom-metrics-examples"}}
{"chunk_id": "dev-profiling-029", "document_id": "dev-profiling", "content": "PRAGMA enable_profiling = 'json';\nPRAGMA profiling_output = '/path/to/file.json';\n\nPRAGMA custom_profiling_settings = '{\"CPU_TIME\": \"false\", \"EXTRA_INFO\": \"true\", \"OPERATOR_CARDINALITY\": \"true\", \"OPERATOR_TIMING\": \"true\"}';\n\nSELECT name\nFROM students\nJOIN exams USING (sid)\nWHERE name LIKE 'Ma%';", "position": 29, "token_count": 108, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "dev-profiling-029", "document_id": "dev-profiling", "position": 29, "token_count": 108, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling"}}
{"chunk_id": "dev-profiling-030", "document_id": "dev-profiling", "content": "```\n\nThe file's content after executing the query:\n\n```json\n{\n \"extra_info\": {},\n \"query_name\": \"SELECT name\\nFROM students\\nJOIN exams USING (sid)\\nWHERE name LIKE 'Ma%';\",\n \"children\": [\n {\n \"operator_timing\": 0.000001,\n \"operator_cardinality\": 2,\n \"operator_type\": \"PROJECTION\",\n \"extra_info\": {\n \"Projections\": \"name\",\n \"Estimated Cardinality\": \"1\"\n },\n \"children\": [\n {\n \"extra_info\": {\n \"Join Type\": \"INNER\",\n \"Conditions\": \"sid = sid\",\n \"Build Min\": \"1\",\n \"Build Max\": \"3\",\n \"Estimated Cardinality\": \"1\"\n },\n \"operator_cardinality\": 2,\n \"operator_type\": \"HASH_JOIN\",\n \"operator_timing\": 0.00023899999999999998,\n \"children\": [\n...", "position": 30, "token_count": 244, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "dev-profiling-030", "document_id": "dev-profiling", "position": 30, "token_count": 244, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling"}}
{"chunk_id": "dev-profiling-031", "document_id": "dev-profiling", "content": "```\n\nThe second example adds detailed metrics to the output.\n\n```sql\nPRAGMA profiling_mode = 'detailed';\n\nSELECT name\nFROM students\nJOIN exams USING (sid)\nWHERE name LIKE 'Ma%';", "position": 31, "token_count": 50, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "dev-profiling-031", "document_id": "dev-profiling", "position": 31, "token_count": 50, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling"}}
{"chunk_id": "dev-profiling-032", "document_id": "dev-profiling", "content": "```\n\nThe contents of the outputted file:", "position": 32, "token_count": 13, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "dev-profiling-032", "document_id": "dev-profiling", "position": 32, "token_count": 13, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling"}}
{"chunk_id": "dev-profiling-033", "document_id": "dev-profiling", "content": "```json\n{\n \"all_optimizers\": 0.001413,\n \"cumulative_optimizer_timing\": 0.0014120000000000003,\n \"planner\": 0.000873,\n \"planner_binding\": 0.000869,\n \"physical_planner\": 0.000236,\n \"physical_planner_column_binding\": 0.000005,\n \"physical_planner_resolve_types\": 0.000001,\n \"physical_planner_create_plan\": 0.000226,\n \"optimizer_expression_rewriter\": 0.000029,\n \"optimizer_filter_pullup\": 0.000002,\n \"optimizer_filter_pushdown\": 0.000102,\n...", "position": 33, "token_count": 181, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "dev-profiling-033", "document_id": "dev-profiling", "position": 33, "token_count": 181, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling"}}
{"chunk_id": "dev-profiling-034", "document_id": "dev-profiling", "content": "\"optimizer_filter_pullup\": 0.000002,\n \"optimizer_filter_pushdown\": 0.000102,\n...\n \"optimizer_column_lifetime\": 0.000009999999999999999,\n \"rows_returned\": 2,\n \"latency\": 0.003708,\n \"cumulative_rows_scanned\": 6,\n \"cumulative_cardinality\": 11,\n \"extra_info\": {},\n \"cpu_time\": 0.000095,\n \"optimizer_build_side_probe_side\": 0.000017,\n \"result_set_size\": 32,\n \"blocked_thread_time\": 0.0,", "position": 34, "token_count": 173, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "dev-profiling-034", "document_id": "dev-profiling", "position": 34, "token_count": 173, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling"}}
{"chunk_id": "dev-profiling-035", "document_id": "dev-profiling", "content": "\"result_set_size\": 32,\n \"blocked_thread_time\": 0.0,\n \"query_name\": \"SELECT name\\nFROM students\\nJOIN exams USING (sid)\\nWHERE name LIKE 'Ma%';\",\n \"children\": [\n {\n \"operator_timing\": 0.000001,\n \"operator_rows_scanned\": 0,\n \"cumulative_rows_scanned\": 6,\n \"operator_cardinality\": 2,\n \"operator_type\": \"PROJECTION\",\n \"cumulative_cardinality\": 11,\n \"extra_info\": {\n \"Projections\": \"name\",\n \"Estimated Cardinality\": \"1\"\n },\n \"result_set_size\": 32,\n \"cpu_time\": 0.000095,\n \"children\": [\n...", "position": 35, "token_count": 182, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "dev-profiling-035", "document_id": "dev-profiling", "position": 35, "token_count": 182, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling"}}
{"chunk_id": "dev-profiling-036", "document_id": "dev-profiling", "content": "\"result_set_size\": 32,\n \"cpu_time\": 0.000095,\n \"children\": [\n...", "position": 36, "token_count": 33, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "dev-profiling-036", "document_id": "dev-profiling", "position": 36, "token_count": 33, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling"}}
{"chunk_id": "dev-profiling-037", "document_id": "dev-profiling", "content": "```", "position": 37, "token_count": 5, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "dev-profiling-037", "document_id": "dev-profiling", "position": 37, "token_count": 5, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling"}}
{"chunk_id": "dev-profiling-038", "document_id": "dev-profiling", "content": "## Query Graphs\n\nIt is also possible to render the profiling output as a query graph.\nThe query graph visually represents the query plan, showing the operators and their relationships.\nThe query plan must be output in the `json` format and stored in a file.\nAfter writing a profiling output to its designated file, the Python script can render it as a query graph.\nThe script requires the `duckdb` Python module to be installed.\nIt generates an HTML file and opens it in your web browser.\n\n```batch\npython -m duckdb.query_graph /path/to/file.json\n```", "position": 38, "token_count": 130, "has_code": true, "section_hierarchy": ["Query Graphs"], "metadata": {"chunk_id": "dev-profiling-038", "document_id": "dev-profiling", "position": 38, "token_count": 130, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Query Graphs"], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling#query-graphs"}}
{"chunk_id": "dev-profiling-039", "document_id": "dev-profiling", "content": "## Notation in Query Plans\n\nIn query plans, the [hash join](https://en.wikipedia.org/wiki/Hash_join) operators adhere to the following convention:\nthe _probe side_ of the join is the left operand, while the _build side_ is the right operand.\n\nJoin operators in the query plan show the join type used:\n\n* Inner joins are denoted as `INNER`.\n* Left outer joins and right outer joins are denoted as `LEFT` and `RIGHT`, respectively.\n* Full outer joins are denoted as `FULL`.\n\n> Tip To visualize query plans, consider using the [DuckDB execution plan visualizer](https://db.cs.uni-tuebingen.de/explain/) developed by the [Database Systems Research Group at the University of Tübingen](https://github.com/DBatUTuebingen).", "position": 39, "token_count": 196, "has_code": false, "section_hierarchy": ["Notation in Query Plans"], "metadata": {"chunk_id": "dev-profiling-039", "document_id": "dev-profiling", "position": 39, "token_count": 196, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Notation in Query Plans"], "file_path": "dev/profiling.md", "url": "/dev/profiling", "title": "Profiling", "category": null, "tags": [], "section_url": "/dev/profiling#notation-in-query-plans"}}

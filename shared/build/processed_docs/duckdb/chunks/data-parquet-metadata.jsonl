{"chunk_id": "data-parquet-metadata-000", "document_id": "data-parquet-metadata", "content": "## Parquet Metadata\n\nThe `parquet_metadata` function can be used to query the metadata contained within a Parquet file, which reveals various internal details of the Parquet file such as the statistics of the different columns. This can be useful for figuring out what kind of skipping is possible in Parquet files, or even to obtain a quick overview of what the different columns contain:\n\n```sql\nSELECT *\nFROM parquet_metadata('test.parquet');", "position": 0, "token_count": 100, "has_code": true, "section_hierarchy": ["Parquet Metadata"], "metadata": {"chunk_id": "data-parquet-metadata-000", "document_id": "data-parquet-metadata", "position": 0, "token_count": 100, "has_code": true, "overlap_with_previous": false, "section_hierarchy": ["Parquet Metadata"], "file_path": "data/parquet/metadata.md", "url": "/data/parquet/metadata", "title": "Querying Parquet Metadata", "category": null, "tags": [], "section_url": "/data/parquet/metadata#parquet-metadata"}}
{"chunk_id": "data-parquet-metadata-001", "document_id": "data-parquet-metadata", "content": "```\n\nBelow is a table of the columns returned by `parquet_metadata`.", "position": 1, "token_count": 21, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "data-parquet-metadata-001", "document_id": "data-parquet-metadata", "position": 1, "token_count": 21, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "data/parquet/metadata.md", "url": "/data/parquet/metadata", "title": "Querying Parquet Metadata", "category": null, "tags": [], "section_url": "/data/parquet/metadata"}}
{"chunk_id": "data-parquet-metadata-002", "document_id": "data-parquet-metadata", "content": "| Field | Type |\n| -------------------------- | --------------- |\n| file_name | VARCHAR |\n| row_group_id | BIGINT |\n| row_group_num_rows | BIGINT |\n| row_group_num_columns | BIGINT |\n| row_group_bytes | BIGINT |\n| column_id | BIGINT |\n| file_offset | BIGINT |\n| num_values | BIGINT |\n| path_in_schema | VARCHAR |\n| type | VARCHAR |\n| stats_min | VARCHAR |\n| stats_max | VARCHAR |\n| stats_null_count | BIGINT |\n| stats_distinct_count | BIGINT |", "position": 2, "token_count": 188, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "data-parquet-metadata-002", "document_id": "data-parquet-metadata", "position": 2, "token_count": 188, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "data/parquet/metadata.md", "url": "/data/parquet/metadata", "title": "Querying Parquet Metadata", "category": null, "tags": [], "section_url": "/data/parquet/metadata"}}
{"chunk_id": "data-parquet-metadata-003", "document_id": "data-parquet-metadata", "content": "| stats_max | VARCHAR |\n| stats_null_count | BIGINT |\n| stats_distinct_count | BIGINT |\n| stats_min_value | VARCHAR |\n| stats_max_value | VARCHAR |\n| compression | VARCHAR |\n| encodings | VARCHAR |\n| index_page_offset | BIGINT |\n| dictionary_page_offset | BIGINT |\n| data_page_offset | BIGINT |\n| total_compressed_size | BIGINT |\n| total_uncompressed_size | BIGINT |\n| key_value_metadata | MAP(BLOB, BLOB) |\n| bloom_filter_offset | BIGINT |\n| bloom_filter_length | BIGINT |\n| min_is_exact | BOOLEAN |\n| max_is_exact | BOOLEAN |", "position": 3, "token_count": 178, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "data-parquet-metadata-003", "document_id": "data-parquet-metadata", "position": 3, "token_count": 178, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "data/parquet/metadata.md", "url": "/data/parquet/metadata", "title": "Querying Parquet Metadata", "category": null, "tags": [], "section_url": "/data/parquet/metadata"}}
{"chunk_id": "data-parquet-metadata-004", "document_id": "data-parquet-metadata", "content": "| bloom_filter_length | BIGINT |\n| min_is_exact | BOOLEAN |\n| max_is_exact | BOOLEAN |\n| row_group_compressed_bytes | BIGINT |", "position": 4, "token_count": 44, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "data-parquet-metadata-004", "document_id": "data-parquet-metadata", "position": 4, "token_count": 44, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "data/parquet/metadata.md", "url": "/data/parquet/metadata", "title": "Querying Parquet Metadata", "category": null, "tags": [], "section_url": "/data/parquet/metadata"}}
{"chunk_id": "data-parquet-metadata-005", "document_id": "data-parquet-metadata", "content": "## Parquet Schema\n\nThe `parquet_schema` function can be used to query the internal schema contained within a Parquet file. Note that this is the schema as it is contained within the metadata of the Parquet file. If you want to figure out the column names and types contained within a Parquet file it is easier to use `DESCRIBE`.\n\nFetch the column names and column types:\n\n```sql\nDESCRIBE SELECT * FROM 'test.parquet';\n```\n\nFetch the internal schema of a Parquet file:\n\n```sql\nSELECT *\nFROM parquet_schema('test.parquet');", "position": 5, "token_count": 137, "has_code": true, "section_hierarchy": ["Parquet Schema"], "metadata": {"chunk_id": "data-parquet-metadata-005", "document_id": "data-parquet-metadata", "position": 5, "token_count": 137, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Parquet Schema"], "file_path": "data/parquet/metadata.md", "url": "/data/parquet/metadata", "title": "Querying Parquet Metadata", "category": null, "tags": [], "section_url": "/data/parquet/metadata#parquet-schema"}}
{"chunk_id": "data-parquet-metadata-006", "document_id": "data-parquet-metadata", "content": "```\n\nFetch the internal schema of a Parquet file:\n\n```sql\nSELECT *\nFROM parquet_schema('test.parquet');\n```\n\nBelow is a table of the columns returned by `parquet_schema`.\n\n| Field | Type |\n| --------------- | ------- |\n| file_name | VARCHAR |\n| name | VARCHAR |\n| type | VARCHAR |\n| type_length | VARCHAR |\n| repetition_type | VARCHAR |\n| num_children | BIGINT |\n| converted_type | VARCHAR |\n| scale | BIGINT |\n| precision | BIGINT |\n| field_id | BIGINT |\n| logical_type | VARCHAR |", "position": 6, "token_count": 175, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "data-parquet-metadata-006", "document_id": "data-parquet-metadata", "position": 6, "token_count": 175, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "data/parquet/metadata.md", "url": "/data/parquet/metadata", "title": "Querying Parquet Metadata", "category": null, "tags": [], "section_url": "/data/parquet/metadata"}}
{"chunk_id": "data-parquet-metadata-007", "document_id": "data-parquet-metadata", "content": "## Parquet File Metadata\n\nThe `parquet_file_metadata` function can be used to query file-level metadata such as the format version and the encryption algorithm used:\n\n```sql\nSELECT *\nFROM parquet_file_metadata('test.parquet');\n```\n\nBelow is a table of the columns returned by `parquet_file_metadata`.\n\n| Field | Type |\n| --------------------------- | ------- |\n| file_name | VARCHAR |\n| created_by | VARCHAR |\n| num_rows | BIGINT |\n| num_row_groups | BIGINT |\n| format_version | BIGINT |\n| encryption_algorithm | VARCHAR |\n| footer_signing_key_metadata | VARCHAR |", "position": 7, "token_count": 192, "has_code": true, "section_hierarchy": ["Parquet File Metadata"], "metadata": {"chunk_id": "data-parquet-metadata-007", "document_id": "data-parquet-metadata", "position": 7, "token_count": 192, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Parquet File Metadata"], "file_path": "data/parquet/metadata.md", "url": "/data/parquet/metadata", "title": "Querying Parquet Metadata", "category": null, "tags": [], "section_url": "/data/parquet/metadata#parquet-file-metadata"}}
{"chunk_id": "data-parquet-metadata-008", "document_id": "data-parquet-metadata", "content": "## Parquet Key-Value Metadata\n\nThe `parquet_kv_metadata` function can be used to query custom metadata defined as key-value pairs:\n\n```sql\nSELECT *\nFROM parquet_kv_metadata('test.parquet');\n```\n\nBelow is a table of the columns returned by `parquet_kv_metadata`.\n\n| Field | Type |\n| --------- | ------- |\n| file_name | VARCHAR |\n| key | BLOB |\n| value | BLOB |", "position": 8, "token_count": 124, "has_code": true, "section_hierarchy": ["Parquet Key-Value Metadata"], "metadata": {"chunk_id": "data-parquet-metadata-008", "document_id": "data-parquet-metadata", "position": 8, "token_count": 124, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Parquet Key-Value Metadata"], "file_path": "data/parquet/metadata.md", "url": "/data/parquet/metadata", "title": "Querying Parquet Metadata", "category": null, "tags": [], "section_url": "/data/parquet/metadata#parquet-key-value-metadata"}}
{"chunk_id": "data-parquet-metadata-009", "document_id": "data-parquet-metadata", "content": "## Bloom Filters\n\nDuckDB [supports Bloom filters]({% post_url 2025-03-07-parquet-bloom-filters-in-duckdb %}) for pruning the row groups that need to be read to answer highly selective queries.\nCurrently, Bloom filters are supported for the following types:\n\n* Integer types: `TINYINT`, `UTINYINT`, `SMALLINT`, `USMALLINT`, `INTEGER`, `UINTEGER`, `BIGINT`, `UBIGINT`\n* Floating point types: `FLOAT`, `DOUBLE`\n* `VARCHAR`\n* `BLOB`\n\nThe `parquet_bloom_probe(filename, column_name, value)` function shows which row groups can excluded when filtering for a given value of a given column using the Bloom filter.\nFor example:\n\n```sql\nFROM parquet_bloom_probe('my_file.parquet', 'my_col', 500);", "position": 9, "token_count": 217, "has_code": true, "section_hierarchy": ["Bloom Filters"], "metadata": {"chunk_id": "data-parquet-metadata-009", "document_id": "data-parquet-metadata", "position": 9, "token_count": 217, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Bloom Filters"], "file_path": "data/parquet/metadata.md", "url": "/data/parquet/metadata", "title": "Querying Parquet Metadata", "category": null, "tags": [], "section_url": "/data/parquet/metadata#bloom-filters"}}
{"chunk_id": "data-parquet-metadata-010", "document_id": "data-parquet-metadata", "content": "```\n\n| file_name | row_group_id | bloom_filter_excludes |\n| --------------- | -----------: | --------------------: |\n| my_file.parquet | 0 | true |\n| ... | ... | ... |\n| my_file.parquet | 9 | false |", "position": 10, "token_count": 112, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "data-parquet-metadata-010", "document_id": "data-parquet-metadata", "position": 10, "token_count": 112, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "data/parquet/metadata.md", "url": "/data/parquet/metadata", "title": "Querying Parquet Metadata", "category": null, "tags": [], "section_url": "/data/parquet/metadata"}}

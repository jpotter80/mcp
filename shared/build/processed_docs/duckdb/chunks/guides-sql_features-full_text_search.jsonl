{"chunk_id": "guides-sql_features-full_text_search-000", "document_id": "guides-sql_features-full_text_search", "content": "DuckDB supports full-text search via the [`fts` extension]({% link docs/stable/core_extensions/full_text_search.md %}).\nA full-text index allows for a query to quickly search for all occurrences of individual words within longer text strings.", "position": 0, "token_count": 65, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "guides-sql_features-full_text_search-000", "document_id": "guides-sql_features-full_text_search", "position": 0, "token_count": 65, "has_code": false, "overlap_with_previous": false, "section_hierarchy": [], "file_path": "guides/sql_features/full_text_search.md", "url": "/guides/sql_features/full_text_search", "title": "Full-Text Search", "category": null, "tags": [], "section_url": "/guides/sql_features/full_text_search"}}
{"chunk_id": "guides-sql_features-full_text_search-001", "document_id": "guides-sql_features-full_text_search", "content": "## Example: Shakespeare Corpus\n\nHere's an example of building a full-text index of Shakespeare's plays.\n\n```sql\nCREATE TABLE corpus AS\n SELECT * FROM 'https://blobs.duckdb.org/data/shakespeare.parquet';\n```\n\n```sql\nDESCRIBE corpus;", "position": 1, "token_count": 69, "has_code": true, "section_hierarchy": ["Example: Shakespeare Corpus"], "metadata": {"chunk_id": "guides-sql_features-full_text_search-001", "document_id": "guides-sql_features-full_text_search", "position": 1, "token_count": 69, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Example: Shakespeare Corpus"], "file_path": "guides/sql_features/full_text_search.md", "url": "/guides/sql_features/full_text_search", "title": "Full-Text Search", "category": null, "tags": [], "section_url": "/guides/sql_features/full_text_search#example-shakespeare-corpus"}}
{"chunk_id": "guides-sql_features-full_text_search-002", "document_id": "guides-sql_features-full_text_search", "content": "```\n\n```sql\nDESCRIBE corpus;\n```\n\n| column_name | column_type | null | key | default | extra |\n|-------------|-------------|------|------|---------|-------|\n| line_id | VARCHAR | YES | NULL | NULL | NULL |\n| play_name | VARCHAR | YES | NULL | NULL | NULL |\n| line_number | VARCHAR | YES | NULL | NULL | NULL |\n| speaker | VARCHAR | YES | NULL | NULL | NULL |\n| text_entry | VARCHAR | YES | NULL | NULL | NULL |\n\nThe text of each line is in `text_entry`, and a unique key for each line is in `line_id`.", "position": 2, "token_count": 204, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "guides-sql_features-full_text_search-002", "document_id": "guides-sql_features-full_text_search", "position": 2, "token_count": 204, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "guides/sql_features/full_text_search.md", "url": "/guides/sql_features/full_text_search", "title": "Full-Text Search", "category": null, "tags": [], "section_url": "/guides/sql_features/full_text_search"}}
{"chunk_id": "guides-sql_features-full_text_search-003", "document_id": "guides-sql_features-full_text_search", "content": "## Creating a Full-Text Search Index\n\nFirst, we create the index, specifying the table name, the unique id column, and the column(s) to index. We will just index the single column `text_entry`, which contains the text of the lines in the play.\n\n```sql\nPRAGMA create_fts_index('corpus', 'line_id', 'text_entry');\n```\n\nThe table is now ready to query using the [Okapi BM25](https://en.wikipedia.org/wiki/Okapi_BM25) ranking function. Rows with no match return a `NULL` score.\n\nWhat does Shakespeare say about butter?\n\n```sql\nSELECT\n fts_main_corpus.match_bm25(line_id, 'butter') AS score,\n line_id, play_name, speaker, text_entry\nFROM corpus\nWHERE score IS NOT NULL\nORDER BY score DESC;", "position": 3, "token_count": 211, "has_code": true, "section_hierarchy": ["Creating a Full-Text Search Index"], "metadata": {"chunk_id": "guides-sql_features-full_text_search-003", "document_id": "guides-sql_features-full_text_search", "position": 3, "token_count": 211, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Creating a Full-Text Search Index"], "file_path": "guides/sql_features/full_text_search.md", "url": "/guides/sql_features/full_text_search", "title": "Full-Text Search", "category": null, "tags": [], "section_url": "/guides/sql_features/full_text_search#creating-a-full-text-search-index"}}
{"chunk_id": "guides-sql_features-full_text_search-004", "document_id": "guides-sql_features-full_text_search", "content": "```", "position": 4, "token_count": 5, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "guides-sql_features-full_text_search-004", "document_id": "guides-sql_features-full_text_search", "position": 4, "token_count": 5, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "guides/sql_features/full_text_search.md", "url": "/guides/sql_features/full_text_search", "title": "Full-Text Search", "category": null, "tags": [], "section_url": "/guides/sql_features/full_text_search"}}
{"chunk_id": "guides-sql_features-full_text_search-005", "document_id": "guides-sql_features-full_text_search", "content": "| score | line_id | play_name | speaker | text_entry |\n|-------------------:|-------------|--------------------------|--------------|----------------------------------------------------|\n| 4.427313429798464 | H4/2.4.494 | Henry IV | Carrier | As fat as butter. |\n| 3.836270302568675 | H4/1.2.21 | Henry IV | FALSTAFF | prologue to an egg and butter. |", "position": 5, "token_count": 222, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "guides-sql_features-full_text_search-005", "document_id": "guides-sql_features-full_text_search", "position": 5, "token_count": 222, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "guides/sql_features/full_text_search.md", "url": "/guides/sql_features/full_text_search", "title": "Full-Text Search", "category": null, "tags": [], "section_url": "/guides/sql_features/full_text_search"}}
{"chunk_id": "guides-sql_features-full_text_search-006", "document_id": "guides-sql_features-full_text_search", "content": "| 3.836270302568675 | H4/1.2.21 | Henry IV | FALSTAFF | prologue to an egg and butter. |\n| 3.836270302568675 | H4/2.1.55 | Henry IV | Chamberlain | They are up already, and call for eggs and butter; |\n| 3.3844488405497115 | H4/4.2.21 | Henry IV | FALSTAFF | toasts-and-butter, with hearts in their bellies no |\n| 3.3844488405497115 | H4/4.2.62 | Henry IV | PRINCE HENRY | already made thee butter. But tell me, Jack, whose |\n| 3.3844488405497115 | AWW/4.1.40 | Alls well that ends well | PAROLLES | butter-womans mouth and buy myself another of |", "position": 6, "token_count": 211, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "guides-sql_features-full_text_search-006", "document_id": "guides-sql_features-full_text_search", "position": 6, "token_count": 211, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "guides/sql_features/full_text_search.md", "url": "/guides/sql_features/full_text_search", "title": "Full-Text Search", "category": null, "tags": [], "section_url": "/guides/sql_features/full_text_search"}}
{"chunk_id": "guides-sql_features-full_text_search-007", "document_id": "guides-sql_features-full_text_search", "content": "| 3.3844488405497115 | AWW/4.1.40 | Alls well that ends well | PAROLLES | butter-womans mouth and buy myself another of |\n| 3.3844488405497115 | AYLI/3.2.93 | As you like it | TOUCHSTONE | right butter-womens rank to market. |\n| 3.3844488405497115 | KL/2.4.132 | King Lear | Fool | kindness to his horse, buttered his hay. |\n| 3.0278411214953107 | AWW/5.2.9 | Alls well that ends well | Clown | henceforth eat no fish of fortunes buttering. |\n| 3.0278411214953107 | MWW/2.2.260 | Merry Wives of Windsor | FALSTAFF | Hang him, mechanical salt-butter rogue! I will |", "position": 7, "token_count": 215, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "guides-sql_features-full_text_search-007", "document_id": "guides-sql_features-full_text_search", "position": 7, "token_count": 215, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "guides/sql_features/full_text_search.md", "url": "/guides/sql_features/full_text_search", "title": "Full-Text Search", "category": null, "tags": [], "section_url": "/guides/sql_features/full_text_search"}}
{"chunk_id": "guides-sql_features-full_text_search-008", "document_id": "guides-sql_features-full_text_search", "content": "| 3.0278411214953107 | MWW/2.2.260 | Merry Wives of Windsor | FALSTAFF | Hang him, mechanical salt-butter rogue! I will |\n| 3.0278411214953107 | MWW/2.2.284 | Merry Wives of Windsor | FORD | rather trust a Fleming with my butter, Parson Hugh |\n| 3.0278411214953107 | MWW/3.5.7 | Merry Wives of Windsor | FALSTAFF | Ill have my brains taen out and buttered, and give |\n| 3.0278411214953107 | MWW/3.5.102 | Merry Wives of Windsor | FALSTAFF | to heat as butter; a man of continual dissolution |\n| 2.739219044070792 | H4/2.4.115 | Henry IV | PRINCE HENRY | Didst thou never see Titan kiss a dish of butter? |", "position": 8, "token_count": 219, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "guides-sql_features-full_text_search-008", "document_id": "guides-sql_features-full_text_search", "position": 8, "token_count": 219, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "guides/sql_features/full_text_search.md", "url": "/guides/sql_features/full_text_search", "title": "Full-Text Search", "category": null, "tags": [], "section_url": "/guides/sql_features/full_text_search"}}
{"chunk_id": "guides-sql_features-full_text_search-009", "document_id": "guides-sql_features-full_text_search", "content": "Unlike standard indexes, full-text indexes don't auto-update as the underlying data is changed, so you need to `PRAGMA drop_fts_index(my_fts_index)` and recreate it when appropriate.", "position": 9, "token_count": 55, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "guides-sql_features-full_text_search-009", "document_id": "guides-sql_features-full_text_search", "position": 9, "token_count": 55, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "guides/sql_features/full_text_search.md", "url": "/guides/sql_features/full_text_search", "title": "Full-Text Search", "category": null, "tags": [], "section_url": "/guides/sql_features/full_text_search"}}
{"chunk_id": "guides-sql_features-full_text_search-010", "document_id": "guides-sql_features-full_text_search", "content": "## Note on Generating the Corpus Table\n\nFor more details, see the [“Generating a Shakespeare corpus for full-text searching from JSON” blog post](https://duckdb.blogspot.com/2023/04/generating-shakespeare-corpus-for-full.html).\n\n* The Columns are: line_id, play_name, line_number, speaker, text_entry.\n* We need a unique key for each row in order for full-text searching to work.\n* The line_id `KL/2.4.132` means King Lear, Act 2, Scene 4, Line 132.", "position": 10, "token_count": 135, "has_code": false, "section_hierarchy": ["Note on Generating the Corpus Table"], "metadata": {"chunk_id": "guides-sql_features-full_text_search-010", "document_id": "guides-sql_features-full_text_search", "position": 10, "token_count": 135, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Note on Generating the Corpus Table"], "file_path": "guides/sql_features/full_text_search.md", "url": "/guides/sql_features/full_text_search", "title": "Full-Text Search", "category": null, "tags": [], "section_url": "/guides/sql_features/full_text_search#note-on-generating-the-corpus-table"}}

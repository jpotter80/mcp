{"chunk_id": "guides-data_viewers-youplot-000", "document_id": "guides-data_viewers-youplot", "content": "DuckDB can be used with CLI graphing tools to quickly pipe input to stdout to graph your data in one line.\n\n[YouPlot](https://github.com/red-data-tools/YouPlot) is a Ruby-based CLI tool for drawing visually pleasing plots on the terminal. It can accept input from other programs by piping data from `stdin`. It takes tab-separated (or delimiter of your choice) data and can easily generate various types of plots including bar, line, histogram and scatter.\n\nWith DuckDB, you can write to the console (`stdout`) by using the `TO '/dev/stdout'` command. And you can also write comma-separated values by using `WITH (FORMAT csv, HEADER)`.", "position": 0, "token_count": 180, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "guides-data_viewers-youplot-000", "document_id": "guides-data_viewers-youplot", "position": 0, "token_count": 180, "has_code": false, "overlap_with_previous": false, "section_hierarchy": [], "file_path": "guides/data_viewers/youplot.md", "url": "/guides/data_viewers/youplot", "title": "CLI Charting with YouPlot", "category": null, "tags": [], "section_url": "/guides/data_viewers/youplot"}}
{"chunk_id": "guides-data_viewers-youplot-001", "document_id": "guides-data_viewers-youplot", "content": "## Installing YouPlot\n\nInstallation instructions for YouPlot can be found on the main [YouPlot repository](https://github.com/red-data-tools/YouPlot#installation). If you're on a Mac, you can use:\n\n```batch\nbrew install youplot\n```\n\nRun `uplot --help` to ensure you've installed it successfully!", "position": 1, "token_count": 91, "has_code": true, "section_hierarchy": ["Installing YouPlot"], "metadata": {"chunk_id": "guides-data_viewers-youplot-001", "document_id": "guides-data_viewers-youplot", "position": 1, "token_count": 91, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Installing YouPlot"], "file_path": "guides/data_viewers/youplot.md", "url": "/guides/data_viewers/youplot", "title": "CLI Charting with YouPlot", "category": null, "tags": [], "section_url": "/guides/data_viewers/youplot#installing-youplot"}}
{"chunk_id": "guides-data_viewers-youplot-002", "document_id": "guides-data_viewers-youplot", "content": "## Piping DuckDB Queries to stdout\n\nBy combining the [`COPY...TO`]({% link docs/stable/sql/statements/copy.md %}#copy-to) function with a CSV output file, data can be read from any format supported by DuckDB and piped to YouPlot. There are three important steps to doing this.\n\n1. As an example, this is how to read all data from `input.json`:\n\n ```batch\n duckdb -s \"SELECT * FROM read_json_auto('input.json')\"\n ```\n\n2. To prepare the data for YouPlot, write a simple aggregate:\n\n ```batch\n duckdb -s \"SELECT date, sum(purchases) AS total_purchases FROM read_json_auto('input.json') GROUP BY 1 ORDER BY 2 DESC LIMIT 10\"", "position": 2, "token_count": 198, "has_code": true, "section_hierarchy": ["Piping DuckDB Queries to stdout"], "metadata": {"chunk_id": "guides-data_viewers-youplot-002", "document_id": "guides-data_viewers-youplot", "position": 2, "token_count": 198, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Piping DuckDB Queries to stdout"], "file_path": "guides/data_viewers/youplot.md", "url": "/guides/data_viewers/youplot", "title": "CLI Charting with YouPlot", "category": null, "tags": [], "section_url": "/guides/data_viewers/youplot#piping-duckdb-queries-to-stdout"}}
{"chunk_id": "guides-data_viewers-youplot-003", "document_id": "guides-data_viewers-youplot", "content": "```\n\n3. Finally, wrap the `SELECT` in the `COPY ... TO` function with an output location of `/dev/stdout`.\n\n The syntax looks like this:\n\n ```sql\n COPY (⟨query⟩) TO '/dev/stdout' WITH (FORMAT csv, HEADER);\n ```\n\n The full DuckDB command below outputs the query in CSV format with a header:\n\n ```batch\n duckdb -s \"COPY (SELECT date, sum(purchases) AS total_purchases FROM read_json_auto('input.json') GROUP BY 1 ORDER BY 2 DESC LIMIT 10) TO '/dev/stdout' WITH (FORMAT csv, HEADER)\"\n ```", "position": 3, "token_count": 161, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "guides-data_viewers-youplot-003", "document_id": "guides-data_viewers-youplot", "position": 3, "token_count": 161, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "guides/data_viewers/youplot.md", "url": "/guides/data_viewers/youplot", "title": "CLI Charting with YouPlot", "category": null, "tags": [], "section_url": "/guides/data_viewers/youplot"}}
{"chunk_id": "guides-data_viewers-youplot-004", "document_id": "guides-data_viewers-youplot", "content": "## Connecting DuckDB to YouPlot\n\nFinally, the data can now be piped to YouPlot! Let's assume we have an `input.json` file with dates and number of purchases made by somebody on that date. Using the query above, we'll pipe the data to the `uplot` command to draw a plot of the Top 10 Purchase Dates\n\n```batch\nduckdb -s \"COPY (SELECT date, sum(purchases) AS total_purchases FROM read_json_auto('input.json') GROUP BY 1 ORDER BY 2 DESC LIMIT 10) TO '/dev/stdout' WITH (FORMAT csv, HEADER)\" \\\n | uplot bar -d, -H -t \"Top 10 Purchase Dates\"\n```\n\nThis tells `uplot` to draw a bar plot, use a comma-separated delimiter (`-d,`), that the data has a header (`-H`), and give the plot a title (`-t`).\n\n![youplot-top-10](/images/guides/youplot/top-10-plot.png)", "position": 4, "token_count": 251, "has_code": true, "section_hierarchy": ["Connecting DuckDB to YouPlot"], "metadata": {"chunk_id": "guides-data_viewers-youplot-004", "document_id": "guides-data_viewers-youplot", "position": 4, "token_count": 251, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Connecting DuckDB to YouPlot"], "file_path": "guides/data_viewers/youplot.md", "url": "/guides/data_viewers/youplot", "title": "CLI Charting with YouPlot", "category": null, "tags": [], "section_url": "/guides/data_viewers/youplot#connecting-duckdb-to-youplot"}}
{"chunk_id": "guides-data_viewers-youplot-005", "document_id": "guides-data_viewers-youplot", "content": "## Bonus Round! stdin + stdout\n\nMaybe you're piping some data through `jq`. Maybe you're downloading a JSON file from somewhere. You can also tell DuckDB to read the data from another process by changing the filename to `/dev/stdin`.\n\nLet's combine this with a quick `curl` from GitHub to see what a certain user has been up to lately.\n\n```batch\ncurl -sL \"https://api.github.com/users/dacort/events?per_page=100\" \\\n | duckdb -s \"COPY (SELECT type, count(*) AS event_count FROM read_json_auto('/dev/stdin') GROUP BY 1 ORDER BY 2 DESC LIMIT 10) TO '/dev/stdout' WITH (FORMAT csv, HEADER)\" \\\n | uplot bar -d, -H -t \"GitHub Events for @dacort\"\n```\n\n![github-events](/images/guides/youplot/github-events.png)", "position": 5, "token_count": 246, "has_code": true, "section_hierarchy": ["Bonus Round! stdin + stdout"], "metadata": {"chunk_id": "guides-data_viewers-youplot-005", "document_id": "guides-data_viewers-youplot", "position": 5, "token_count": 246, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Bonus Round! stdin + stdout"], "file_path": "guides/data_viewers/youplot.md", "url": "/guides/data_viewers/youplot", "title": "CLI Charting with YouPlot", "category": null, "tags": [], "section_url": "/guides/data_viewers/youplot#bonus-round-stdin--stdout"}}

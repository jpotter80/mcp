{"chunk_id": "clients-python-overview-000", "document_id": "clients-python-overview", "content": "> The latest stable version of the DuckDB Python client is {{ site.current_duckdb_version }}.\n\n## Installation\n\nThe DuckDB Python API can be installed using [pip](https://pip.pypa.io): `pip install duckdb`. Please see the [installation page]({% link install/index.html %}?environment=python) for details. It is also possible to install DuckDB using [conda](https://docs.conda.io): `conda install python-duckdb -c conda-forge`.\n\n**Python version:**\nDuckDB requires Python 3.9 or newer.", "position": 0, "token_count": 149, "has_code": false, "section_hierarchy": ["Installation"], "metadata": {"chunk_id": "clients-python-overview-000", "document_id": "clients-python-overview", "position": 0, "token_count": 149, "has_code": false, "overlap_with_previous": false, "section_hierarchy": ["Installation"], "file_path": "clients/python/overview.md", "url": "/clients/python/overview", "title": "Python API", "category": null, "tags": [], "section_url": "/clients/python/overview#installation"}}
{"chunk_id": "clients-python-overview-001", "document_id": "clients-python-overview", "content": "## Basic API Usage\n\nThe most straight-forward manner of running SQL queries using DuckDB is using the `duckdb.sql` command.\n\n```python\nimport duckdb\n\nduckdb.sql(\"SELECT 42\").show()\n```\n\nThis will run queries using an **in-memory database** that is stored globally inside the Python module. The result of the query is returned as a **Relation**. A relation is a symbolic representation of the query. The query is not executed until the result is fetched or requested to be printed to the screen.\n\nRelations can be referenced in subsequent queries by storing them inside variables, and using them as tables. This way queries can be constructed incrementally.\n\n```python\nimport duckdb\n\nr1 = duckdb.sql(\"SELECT 42 AS i\")\nduckdb.sql(\"SELECT i * 2 AS k FROM r1\").show()\n```", "position": 1, "token_count": 203, "has_code": true, "section_hierarchy": ["Basic API Usage"], "metadata": {"chunk_id": "clients-python-overview-001", "document_id": "clients-python-overview", "position": 1, "token_count": 203, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Basic API Usage"], "file_path": "clients/python/overview.md", "url": "/clients/python/overview", "title": "Python API", "category": null, "tags": [], "section_url": "/clients/python/overview#basic-api-usage"}}
{"chunk_id": "clients-python-overview-002", "document_id": "clients-python-overview", "content": "## Data Input\n\nDuckDB can ingest data from a wide variety of formats – both on-disk and in-memory. See the [data ingestion page]({% link docs/stable/clients/python/data_ingestion.md %}) for more information.\n\n```python\nimport duckdb\n\nduckdb.read_csv(\"example.csv\") # read a CSV file into a Relation\nduckdb.read_parquet(\"example.parquet\") # read a Parquet file into a Relation\nduckdb.read_json(\"example.json\") # read a JSON file into a Relation\n\nduckdb.sql(\"SELECT * FROM 'example.csv'\") # directly query a CSV file\nduckdb.sql(\"SELECT * FROM 'example.parquet'\") # directly query a Parquet file\nduckdb.sql(\"SELECT * FROM 'example.json'\") # directly query a JSON file\n```", "position": 2, "token_count": 218, "has_code": true, "section_hierarchy": ["Data Input"], "metadata": {"chunk_id": "clients-python-overview-002", "document_id": "clients-python-overview", "position": 2, "token_count": 218, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Data Input"], "file_path": "clients/python/overview.md", "url": "/clients/python/overview", "title": "Python API", "category": null, "tags": [], "section_url": "/clients/python/overview#data-input"}}
{"chunk_id": "clients-python-overview-003", "document_id": "clients-python-overview", "content": "### DataFrames\n\nDuckDB can directly query Pandas DataFrames, Polars DataFrames and Arrow tables.\nNote that these are read-only, i.e., editing these tables via [`INSERT`]({% link docs/stable/sql/statements/insert.md %}) or [`UPDATE` statements]({% link docs/stable/sql/statements/update.md %}) is not possible.\n\n#### Pandas\n\nTo directly query a Pandas DataFrame, run:\n\n```python\nimport duckdb\nimport pandas as pd\n\npandas_df = pd.DataFrame({\"a\": [42]})\nduckdb.sql(\"SELECT * FROM pandas_df\")\n```\n\n```text\n┌───────┐\n│ a │\n│ int64 │\n├───────┤\n│ 42 │\n└───────┘\n```", "position": 3, "token_count": 188, "has_code": true, "section_hierarchy": ["Pandas"], "metadata": {"chunk_id": "clients-python-overview-003", "document_id": "clients-python-overview", "position": 3, "token_count": 188, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Pandas"], "file_path": "clients/python/overview.md", "url": "/clients/python/overview", "title": "Python API", "category": null, "tags": [], "section_url": "/clients/python/overview#pandas"}}
{"chunk_id": "clients-python-overview-004", "document_id": "clients-python-overview", "content": "#### Polars\n\nTo directly query a Polars DataFrame, run:\n\n```python\nimport duckdb\nimport polars as pl\n\npolars_df = pl.DataFrame({\"a\": [42]})\nduckdb.sql(\"SELECT * FROM polars_df\")\n```\n\n```text\n┌───────┐\n│ a │\n│ int64 │\n├───────┤\n│ 42 │\n└───────┘\n```\n\n#### PyArrow\n\nTo directly query a PyArrow table, run:\n\n```python\nimport duckdb\nimport pyarrow as pa\n\narrow_table = pa.Table.from_pydict({\"a\": [42]})\nduckdb.sql(\"SELECT * FROM arrow_table\")\n```\n\n```text\n┌───────┐\n│ a │\n│ int64 │\n├───────┤\n│ 42 │\n└───────┘\n```", "position": 4, "token_count": 184, "has_code": true, "section_hierarchy": ["PyArrow"], "metadata": {"chunk_id": "clients-python-overview-004", "document_id": "clients-python-overview", "position": 4, "token_count": 184, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["PyArrow"], "file_path": "clients/python/overview.md", "url": "/clients/python/overview", "title": "Python API", "category": null, "tags": [], "section_url": "/clients/python/overview#pyarrow"}}
{"chunk_id": "clients-python-overview-005", "document_id": "clients-python-overview", "content": "## Result Conversion\n\nDuckDB supports converting query results efficiently to a variety of formats. See the [result conversion page]({% link docs/stable/clients/python/conversion.md %}) for more information.\n\n```python\nimport duckdb\n\nduckdb.sql(\"SELECT 42\").fetchall() # Python objects\nduckdb.sql(\"SELECT 42\").df() # Pandas DataFrame\nduckdb.sql(\"SELECT 42\").pl() # Polars DataFrame\nduckdb.sql(\"SELECT 42\").arrow() # Arrow Table\nduckdb.sql(\"SELECT 42\").fetchnumpy() # NumPy Arrays\n```", "position": 5, "token_count": 154, "has_code": true, "section_hierarchy": ["Result Conversion"], "metadata": {"chunk_id": "clients-python-overview-005", "document_id": "clients-python-overview", "position": 5, "token_count": 154, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Result Conversion"], "file_path": "clients/python/overview.md", "url": "/clients/python/overview", "title": "Python API", "category": null, "tags": [], "section_url": "/clients/python/overview#result-conversion"}}
{"chunk_id": "clients-python-overview-006", "document_id": "clients-python-overview", "content": "## Writing Data to Disk\n\nDuckDB supports writing Relation objects directly to disk in a variety of formats. The [`COPY` statement]({% link docs/stable/sql/statements/copy.md %}) can be used to write data to disk using SQL as an alternative.\n\n```python\nimport duckdb\n\nduckdb.sql(\"SELECT 42\").write_parquet(\"out.parquet\") # Write to a Parquet file\nduckdb.sql(\"SELECT 42\").write_csv(\"out.csv\") # Write to a CSV file\nduckdb.sql(\"COPY (SELECT 42) TO 'out.parquet'\") # Copy to a Parquet file\n```", "position": 6, "token_count": 160, "has_code": true, "section_hierarchy": ["Writing Data to Disk"], "metadata": {"chunk_id": "clients-python-overview-006", "document_id": "clients-python-overview", "position": 6, "token_count": 160, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Writing Data to Disk"], "file_path": "clients/python/overview.md", "url": "/clients/python/overview", "title": "Python API", "category": null, "tags": [], "section_url": "/clients/python/overview#writing-data-to-disk"}}
{"chunk_id": "clients-python-overview-007", "document_id": "clients-python-overview", "content": "## Connection Options\n\nApplications can open a new DuckDB connection via the `duckdb.connect()` method.\n\n### Using an In-Memory Database\n\nWhen using DuckDB through `duckdb.sql()`, it operates on an **in-memory** database, i.e., no tables are persisted on disk.\nInvoking the `duckdb.connect()` method without arguments returns a connection, which also uses an in-memory database:\n\n```python\nimport duckdb\n\ncon = duckdb.connect()\ncon.sql(\"SELECT 42 AS x\").show()\n```\n\n### Persistent Storage\n\nThe `duckdb.connect(dbname)` creates a connection to a **persistent** database.\nAny data written to that connection will be persisted, and can be reloaded by reconnecting to the same file, both from Python and from other DuckDB clients.\n\n```python\nimport duckdb", "position": 7, "token_count": 203, "has_code": true, "section_hierarchy": ["Persistent Storage"], "metadata": {"chunk_id": "clients-python-overview-007", "document_id": "clients-python-overview", "position": 7, "token_count": 203, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Persistent Storage"], "file_path": "clients/python/overview.md", "url": "/clients/python/overview", "title": "Python API", "category": null, "tags": [], "section_url": "/clients/python/overview#persistent-storage"}}
{"chunk_id": "clients-python-overview-008", "document_id": "clients-python-overview", "content": "# create a connection to a file called 'file.db'\ncon = duckdb.connect(\"file.db\")\n# create a table and load data into it\ncon.sql(\"CREATE TABLE test (i INTEGER)\")\ncon.sql(\"INSERT INTO test VALUES (42)\")\n# query the table\ncon.table(\"test\").show()\n# explicitly close the connection\ncon.close()", "position": 8, "token_count": 91, "has_code": false, "section_hierarchy": ["explicitly close the connection"], "metadata": {"chunk_id": "clients-python-overview-008", "document_id": "clients-python-overview", "position": 8, "token_count": 91, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["explicitly close the connection"], "file_path": "clients/python/overview.md", "url": "/clients/python/overview", "title": "Python API", "category": null, "tags": [], "section_url": "/clients/python/overview#explicitly-close-the-connection"}}
{"chunk_id": "clients-python-overview-009", "document_id": "clients-python-overview", "content": "# Note: connections also closed implicitly when they go out of scope\n```\n\nYou can also use a context manager to ensure that the connection is closed:\n\n```python\nimport duckdb\n\nwith duckdb.connect(\"file.db\") as con:\n con.sql(\"CREATE TABLE test (i INTEGER)\")\n con.sql(\"INSERT INTO test VALUES (42)\")\n con.table(\"test\").show()\n # the context manager closes the connection automatically\n```\n\n### Configuration\n\nThe `duckdb.connect()` accepts a `config` dictionary, where [configuration options]({% link docs/stable/configuration/overview.md %}#configuration-reference) can be specified. For example:\n\n```python\nimport duckdb\n\ncon = duckdb.connect(config = {'threads': 1})\n```", "position": 9, "token_count": 191, "has_code": true, "section_hierarchy": ["Configuration"], "metadata": {"chunk_id": "clients-python-overview-009", "document_id": "clients-python-overview", "position": 9, "token_count": 191, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Configuration"], "file_path": "clients/python/overview.md", "url": "/clients/python/overview", "title": "Python API", "category": null, "tags": [], "section_url": "/clients/python/overview#configuration"}}
{"chunk_id": "clients-python-overview-010", "document_id": "clients-python-overview", "content": "### Connection Object and Module\n\nThe connection object and the `duckdb` module can be used interchangeably – they support the same methods. The only difference is that when using the `duckdb` module a global in-memory database is used.\n\n> If you are developing a package designed for others to use, and use DuckDB in the package, it is recommend that you create connection objects instead of using the methods on the `duckdb` module. That is because the `duckdb` module uses a shared global database – which can cause hard to debug issues if used from within multiple different packages.\n\n### Using Connections in Parallel Python Programs\n\nThe `DuckDBPyConnection` object is not thread-safe. If you would like to write to the same database from multiple threads, create a cursor for each thread with the [`DuckDBPyConnection.cursor()` method]({% link docs/stable/clients/python/reference/index.md %}#duckdb.DuckDBPyConnection.cursor).", "position": 10, "token_count": 229, "has_code": false, "section_hierarchy": ["Using Connections in Parallel Python Programs"], "metadata": {"chunk_id": "clients-python-overview-010", "document_id": "clients-python-overview", "position": 10, "token_count": 229, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Using Connections in Parallel Python Programs"], "file_path": "clients/python/overview.md", "url": "/clients/python/overview", "title": "Python API", "category": null, "tags": [], "section_url": "/clients/python/overview#using-connections-in-parallel-python-programs"}}
{"chunk_id": "clients-python-overview-011", "document_id": "clients-python-overview", "content": "## Loading and Installing Extensions\n\nDuckDB's Python API provides functions for installing and loading [extensions]({% link docs/stable/extensions/overview.md %}), which perform the equivalent operations to running the `INSTALL` and `LOAD` SQL commands, respectively. An example that installs and loads the [`spatial` extension]({% link docs/stable/core_extensions/spatial/overview.md %}) looks like follows:\n\n```python\nimport duckdb\n\ncon = duckdb.connect()\ncon.install_extension(\"spatial\")\ncon.load_extension(\"spatial\")\n```\n\n### Community Extensions\n\nTo load [community extensions]({% link community_extensions/index.md %}), use the `repository=\"community\"` argument with the `install_extension` method.\n\nFor example, install and load the `h3` community extension as follows:\n\n```python\nimport duckdb\n\ncon = duckdb.connect()\ncon.install_extension(\"h3\", repository=\"community\")\ncon.load_extension(\"h3\")\n```", "position": 11, "token_count": 245, "has_code": true, "section_hierarchy": ["Community Extensions"], "metadata": {"chunk_id": "clients-python-overview-011", "document_id": "clients-python-overview", "position": 11, "token_count": 245, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Community Extensions"], "file_path": "clients/python/overview.md", "url": "/clients/python/overview", "title": "Python API", "category": null, "tags": [], "section_url": "/clients/python/overview#community-extensions"}}
{"chunk_id": "clients-python-overview-012", "document_id": "clients-python-overview", "content": "### Unsigned Extensions\n\nTo load [unsigned extensions]({% link docs/stable/extensions/overview.md %}#unsigned-extensions), use:\n\n```python\ncon = duckdb.connect(config={\"allow_unsigned_extensions\": \"true\"})\n```\n\n> Warning Only load unsigned extensions from sources you trust.\n> Avoid loading unsigned extensions over HTTP.\n> Consult the [Securing DuckDB page]({% link docs/stable/operations_manual/securing_duckdb/securing_extensions.md %}) for guidelines on how set up DuckDB in a secure manner.", "position": 12, "token_count": 136, "has_code": true, "section_hierarchy": ["Unsigned Extensions"], "metadata": {"chunk_id": "clients-python-overview-012", "document_id": "clients-python-overview", "position": 12, "token_count": 136, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Unsigned Extensions"], "file_path": "clients/python/overview.md", "url": "/clients/python/overview", "title": "Python API", "category": null, "tags": [], "section_url": "/clients/python/overview#unsigned-extensions"}}

{"chunk_id": "clients-r-000", "document_id": "clients-r", "content": "> The latest stable version of the DuckDB R client is {{ site.current_duckdb_r_version }}.\n\n## Installation\n\n### `duckdb`: R Client\n\nThe DuckDB R client can be installed using the following command:\n\n```r\ninstall.packages(\"duckdb\")\n```\n\nPlease see the [installation page]({% link install/index.html %}?environment=r) for details.\n\n### `duckplyr`: dplyr Client\n\nDuckDB offers a [dplyr](https://dplyr.tidyverse.org/)-compatible API via the `duckplyr` package. It can be installed using `install.packages(\"duckplyr\")`. For details, see the [`duckplyr` documentation](https://tidyverse.github.io/duckplyr/).\n\n## Reference Manual\n\nThe reference manual for the DuckDB R client is available at [r.duckdb.org](https://r.duckdb.org).", "position": 0, "token_count": 234, "has_code": true, "section_hierarchy": ["Reference Manual"], "metadata": {"chunk_id": "clients-r-000", "document_id": "clients-r", "position": 0, "token_count": 234, "has_code": true, "overlap_with_previous": false, "section_hierarchy": ["Reference Manual"], "file_path": "clients/r.md", "url": "/clients/r", "title": "R Client", "category": null, "tags": [], "section_url": "/clients/r#reference-manual"}}
{"chunk_id": "clients-r-001", "document_id": "clients-r", "content": "## Basic Client Usage\n\nThe standard DuckDB R client implements the [DBI interface](https://cran.r-project.org/package=DBI) for R. If you are not familiar with DBI yet, see the [Using DBI page](https://solutions.rstudio.com/db/r-packages/DBI/) for an introduction.", "position": 1, "token_count": 87, "has_code": false, "section_hierarchy": ["Basic Client Usage"], "metadata": {"chunk_id": "clients-r-001", "document_id": "clients-r", "position": 1, "token_count": 87, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Basic Client Usage"], "file_path": "clients/r.md", "url": "/clients/r", "title": "R Client", "category": null, "tags": [], "section_url": "/clients/r#basic-client-usage"}}
{"chunk_id": "clients-r-002", "document_id": "clients-r", "content": "### Startup & Shutdown\n\nTo use DuckDB, you must first create a connection object that represents the database. The connection object takes as parameter the database file to read and write from. If the database file does not exist, it will be created (the file extension may be `.db`, `.duckdb`, or anything else). The special value `:memory:` (the default) can be used to create an **in-memory database**. Note that for an in-memory database no data is persisted to disk (i.e., all data is lost when you exit the R process). If you would like to connect to an existing database in read-only mode, set the `read_only` flag to `TRUE`. Read-only mode is required if multiple R processes want to access the same database file at the same time.\n\n```r\nlibrary(\"duckdb\")", "position": 2, "token_count": 196, "has_code": true, "section_hierarchy": ["Startup & Shutdown"], "metadata": {"chunk_id": "clients-r-002", "document_id": "clients-r", "position": 2, "token_count": 196, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Startup & Shutdown"], "file_path": "clients/r.md", "url": "/clients/r", "title": "R Client", "category": null, "tags": [], "section_url": "/clients/r#startup--shutdown"}}
{"chunk_id": "clients-r-003", "document_id": "clients-r", "content": "# to start an in-memory database\ncon ?\", list(400))\nprint(res)\n# item", "position": 3, "token_count": 25, "has_code": false, "section_hierarchy": ["item"], "metadata": {"chunk_id": "clients-r-003", "document_id": "clients-r", "position": 3, "token_count": 25, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["item"], "file_path": "clients/r.md", "url": "/clients/r", "title": "R Client", "category": null, "tags": [], "section_url": "/clients/r#item"}}
{"chunk_id": "clients-r-004", "document_id": "clients-r", "content": "# 1 laptop\n```\n\n> Warning Do **not** use prepared statements to insert large amounts of data into DuckDB. See below for better options.\n\n## Efficient Transfer\n\nTo write a R data frame into DuckDB, use the standard DBI function `dbWriteTable()`. This creates a table in DuckDB and populates it with the data frame contents. For example:\n\n```r\ndbWriteTable(con, \"iris_table\", iris)\nres DuckDB keeps a reference to the R data frame after registration. This prevents the data frame from being garbage-collected. The reference is cleared when the connection is closed, but can also be cleared manually using the `duckdb_unregister()` method.\n\nAlso refer to the [data import documentation]({% link docs/stable/data/overview.md %}) for more options of efficiently importing data.", "position": 4, "token_count": 192, "has_code": true, "section_hierarchy": ["Efficient Transfer"], "metadata": {"chunk_id": "clients-r-004", "document_id": "clients-r", "position": 4, "token_count": 192, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Efficient Transfer"], "file_path": "clients/r.md", "url": "/clients/r", "title": "R Client", "category": null, "tags": [], "section_url": "/clients/r#efficient-transfer"}}
{"chunk_id": "clients-r-005", "document_id": "clients-r", "content": "## dbplyr\n\nDuckDB also plays well with the [dbplyr](https://CRAN.R-project.org/package=dbplyr) / [dplyr](https://dplyr.tidyverse.org) packages for programmatic query construction from R. Here is an example:\n\n```r\nlibrary(\"duckdb\")\nlibrary(\"dplyr\")\ncon\n group_by(dest) |>\n summarise(delay = mean(dep_time, na.rm = TRUE)) |>\n collect()\n```\n\nWhen using dbplyr, CSV and Parquet files can be read using the `dplyr::tbl` function.\n\n```r", "position": 5, "token_count": 162, "has_code": true, "section_hierarchy": ["dbplyr"], "metadata": {"chunk_id": "clients-r-005", "document_id": "clients-r", "position": 5, "token_count": 162, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["dbplyr"], "file_path": "clients/r.md", "url": "/clients/r", "title": "R Client", "category": null, "tags": [], "section_url": "/clients/r#dbplyr"}}
{"chunk_id": "clients-r-006", "document_id": "clients-r", "content": "# Establish a CSV for the sake of this example\nwrite.csv(mtcars, \"mtcars.csv\")\n\n# Summarize the dataset in DuckDB to avoid reading the entire CSV into R's memory\ntbl(con, \"mtcars.csv\") |>\n group_by(cyl) |>\n summarise(across(disp:wt, .fns = mean)) |>\n collect()\n```\n\n```r\n# Establish a set of Parquet files\ndbExecute(con, \"COPY flights TO 'dataset' (FORMAT parquet, PARTITION_BY (year, month))\")", "position": 6, "token_count": 145, "has_code": true, "section_hierarchy": ["Establish a set of Parquet files"], "metadata": {"chunk_id": "clients-r-006", "document_id": "clients-r", "position": 6, "token_count": 145, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Establish a set of Parquet files"], "file_path": "clients/r.md", "url": "/clients/r", "title": "R Client", "category": null, "tags": [], "section_url": "/clients/r#establish-a-set-of-parquet-files"}}
{"chunk_id": "clients-r-007", "document_id": "clients-r", "content": "# Summarize the dataset in DuckDB to avoid reading 12 Parquet files into R's memory\ntbl(con, \"read_parquet('dataset/**/*.parquet', hive_partitioning = true)\") |>\n filter(month == \"3\") |>\n summarise(delay = mean(dep_time, na.rm = TRUE)) |>\n collect()\n```\n\n## Memory Limit\n\nYou can use the [`memory_limit` configuration option]({% link docs/stable/configuration/pragmas.md %}) to limit the memory use of DuckDB, e.g.:\n\n```sql\nSET memory_limit = '2GB';\n```\n\nNote that this limit is only applied to the memory DuckDB uses and it does not affect the memory use of other R libraries.\nTherefore, the total memory used by the R process may be higher than the configured `memory_limit`.", "position": 7, "token_count": 213, "has_code": true, "section_hierarchy": ["Memory Limit"], "metadata": {"chunk_id": "clients-r-007", "document_id": "clients-r", "position": 7, "token_count": 213, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Memory Limit"], "file_path": "clients/r.md", "url": "/clients/r", "title": "R Client", "category": null, "tags": [], "section_url": "/clients/r#memory-limit"}}
{"chunk_id": "clients-r-008", "document_id": "clients-r", "content": "## Troubleshooting", "position": 8, "token_count": 7, "has_code": false, "section_hierarchy": ["Troubleshooting"], "metadata": {"chunk_id": "clients-r-008", "document_id": "clients-r", "position": 8, "token_count": 7, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Troubleshooting"], "file_path": "clients/r.md", "url": "/clients/r", "title": "R Client", "category": null, "tags": [], "section_url": "/clients/r#troubleshooting"}}
{"chunk_id": "clients-r-009", "document_id": "clients-r", "content": "### Warning When Installing on macOS\n\nOn macOS, installing DuckDB may result in a warning `unable to load shared object '.../R_X11.so'`:\n\n```console\nWarning message:\nIn doTryCatch(return(expr), name, parentenv, handler) :\n unable to load shared object '/Library/Frameworks/R.framework/Resources/modules//R_X11.so':\n dlopen(/Library/Frameworks/R.framework/Resources/modules//R_X11.so, 0x0006): Library not loaded: /opt/X11/lib/libSM.6.dylib\n Referenced from: /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/modules/R_X11.so\n Reason: tried: '/opt/X11/lib/libSM.6.dylib' (no such file) ...\n> ')", "position": 9, "token_count": 221, "has_code": true, "section_hierarchy": ["Warning When Installing on macOS"], "metadata": {"chunk_id": "clients-r-009", "document_id": "clients-r", "position": 9, "token_count": 221, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Warning When Installing on macOS"], "file_path": "clients/r.md", "url": "/clients/r", "title": "R Client", "category": null, "tags": [], "section_url": "/clients/r#warning-when-installing-on-macos"}}
{"chunk_id": "clients-r-010", "document_id": "clients-r", "content": "```\n\nNote that this is just a warning, so the simplest solution is to ignore it. Alternatively, you can install DuckDB from the [R-universe](https://r-universe.dev/search):\n\n```R\ninstall.packages(\"duckdb\", repos = c(\"https://duckdb.r-universe.dev\", \"https://cloud.r-project.org\"))\n```\n\nYou may also install the optional [`xquartz` dependency via Homebrew](https://formulae.brew.sh/cask/xquartz).", "position": 10, "token_count": 141, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "clients-r-010", "document_id": "clients-r", "position": 10, "token_count": 141, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "clients/r.md", "url": "/clients/r", "title": "R Client", "category": null, "tags": [], "section_url": "/clients/r"}}

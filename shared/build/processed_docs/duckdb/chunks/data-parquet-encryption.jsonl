{"chunk_id": "data-parquet-encryption-000", "document_id": "data-parquet-encryption", "content": "Starting with version 0.10.0, DuckDB supports reading and writing encrypted Parquet files.\nDuckDB broadly follows the [Parquet Modular Encryption specification](https://github.com/apache/parquet-format/blob/master/Encryption.md) with some [limitations](#limitations).", "position": 0, "token_count": 75, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "data-parquet-encryption-000", "document_id": "data-parquet-encryption", "position": 0, "token_count": 75, "has_code": false, "overlap_with_previous": false, "section_hierarchy": [], "file_path": "data/parquet/encryption.md", "url": "/data/parquet/encryption", "title": "Parquet Encryption", "category": null, "tags": [], "section_url": "/data/parquet/encryption"}}
{"chunk_id": "data-parquet-encryption-001", "document_id": "data-parquet-encryption", "content": "## Reading and Writing Encrypted Files\n\nUsing the `PRAGMA add_parquet_key` function, named encryption keys of 128, 192, or 256 bits can be added to a session. These keys are stored in-memory:\n\n```sql\nPRAGMA add_parquet_key('key128', '0123456789112345');\nPRAGMA add_parquet_key('key192', '012345678911234501234567');\nPRAGMA add_parquet_key('key256', '01234567891123450123456789112345');\nPRAGMA add_parquet_key('key256base64', 'MDEyMzQ1Njc4OTExMjM0NTAxMjM0NTY3ODkxMTIzNDU=');\n```", "position": 1, "token_count": 217, "has_code": true, "section_hierarchy": ["Reading and Writing Encrypted Files"], "metadata": {"chunk_id": "data-parquet-encryption-001", "document_id": "data-parquet-encryption", "position": 1, "token_count": 217, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Reading and Writing Encrypted Files"], "file_path": "data/parquet/encryption.md", "url": "/data/parquet/encryption", "title": "Parquet Encryption", "category": null, "tags": [], "section_url": "/data/parquet/encryption#reading-and-writing-encrypted-files"}}
{"chunk_id": "data-parquet-encryption-002", "document_id": "data-parquet-encryption", "content": "### Writing Encrypted Parquet Files\n\nAfter specifying the key (e.g., `key256`), files can be encrypted as follows:\n\n```sql\nCOPY tbl TO 'tbl.parquet' (ENCRYPTION_CONFIG {footer_key: 'key256'});\n```\n\n### Reading Encrypted Parquet Files\n\nAn encrypted Parquet file using a specific key (e.g., `key256`), can then be read as follows:\n\n```sql\nCOPY tbl FROM 'tbl.parquet' (ENCRYPTION_CONFIG {footer_key: 'key256'});\n```\n\nOr:\n\n```sql\nSELECT *\nFROM read_parquet('tbl.parquet', encryption_config = {footer_key: 'key256'});\n```", "position": 2, "token_count": 205, "has_code": true, "section_hierarchy": ["Reading Encrypted Parquet Files"], "metadata": {"chunk_id": "data-parquet-encryption-002", "document_id": "data-parquet-encryption", "position": 2, "token_count": 205, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Reading Encrypted Parquet Files"], "file_path": "data/parquet/encryption.md", "url": "/data/parquet/encryption", "title": "Parquet Encryption", "category": null, "tags": [], "section_url": "/data/parquet/encryption#reading-encrypted-parquet-files"}}
{"chunk_id": "data-parquet-encryption-003", "document_id": "data-parquet-encryption", "content": "## Limitations\n\nDuckDB's Parquet encryption currently has the following limitations.\n\n1. It is not compatible with the encryption of, e.g., PyArrow, until the missing details are implemented.\n\n2. DuckDB encrypts the footer and all columns using the `footer_key`. The Parquet specification allows encryption of individual columns with different keys, e.g.:\n\n ```sql\n COPY tbl TO 'tbl.parquet'\n (ENCRYPTION_CONFIG {\n footer_key: 'key256',\n column_keys: {key256: ['col0', 'col1']}\n });\n ```\n\n However, this is unsupported at the moment and will cause an error to be thrown (for now):\n\n ```console\n Not implemented Error: Parquet encryption_config column_keys not yet implemented\n ```", "position": 3, "token_count": 194, "has_code": true, "section_hierarchy": ["Limitations"], "metadata": {"chunk_id": "data-parquet-encryption-003", "document_id": "data-parquet-encryption", "position": 3, "token_count": 194, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Limitations"], "file_path": "data/parquet/encryption.md", "url": "/data/parquet/encryption", "title": "Parquet Encryption", "category": null, "tags": [], "section_url": "/data/parquet/encryption#limitations"}}
{"chunk_id": "data-parquet-encryption-004", "document_id": "data-parquet-encryption", "content": "## Performance Implications\n\nNote that encryption has some performance implications.\nWithout encryption, reading/writing the `lineitem` table from [`TPC-H`]({% link docs/stable/core_extensions/tpch.md %}) at SF1, which is 6M rows and 15 columns, from/to a Parquet file takes 0.26 and 0.99 seconds, respectively.\nWith encryption, this takes 0.64 and 2.21 seconds, both approximately 2.5Ã— slower than the unencrypted version.", "position": 4, "token_count": 119, "has_code": false, "section_hierarchy": ["Performance Implications"], "metadata": {"chunk_id": "data-parquet-encryption-004", "document_id": "data-parquet-encryption", "position": 4, "token_count": 119, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Performance Implications"], "file_path": "data/parquet/encryption.md", "url": "/data/parquet/encryption", "title": "Parquet Encryption", "category": null, "tags": [], "section_url": "/data/parquet/encryption#performance-implications"}}

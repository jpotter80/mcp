{"chunk_id": "clients-swift-000", "document_id": "clients-swift", "content": "DuckDB has a Swift client. See the [announcement post]({% post_url 2023-04-21-swift %}) for details.\n\n## Instantiating DuckDB\n\nDuckDB supports both in-memory and persistent databases.\nTo work with an in-memory datatabase, run:\n\n```swift\nlet database = try Database(store: .inMemory)\n```\n\nTo work with a persistent database, run:\n\n```swift\nlet database = try Database(store: .file(at: \"test.db\"))\n```\n\nQueries can be issued through a database connection.\n\n```swift\nlet connection = try database.connect()\n```\n\nDuckDB supports multiple connections per database.", "position": 0, "token_count": 157, "has_code": true, "section_hierarchy": ["Instantiating DuckDB"], "metadata": {"chunk_id": "clients-swift-000", "document_id": "clients-swift", "position": 0, "token_count": 157, "has_code": true, "overlap_with_previous": false, "section_hierarchy": ["Instantiating DuckDB"], "file_path": "clients/swift.md", "url": "/clients/swift", "title": "Swift Client", "category": null, "tags": [], "section_url": "/clients/swift#instantiating-duckdb"}}
{"chunk_id": "clients-swift-001", "document_id": "clients-swift", "content": "## Application Example\n\nThe rest of the page is based on the example of our [announcement post]({% post_url 2023-04-21-swift %}), which uses raw data from [NASA's Exoplanet Archive](https://exoplanetarchive.ipac.caltech.edu) loaded directly into DuckDB.\n\n### Creating an Application-Specific Type\n\nWe first create an application-specific type that we'll use to house our database and connection and through which we'll eventually define our app-specific queries.\n\n```swift\nimport DuckDB\n\nfinal class ExoplanetStore {\n\n let database: Database\n let connection: Connection\n\n init(database: Database, connection: Connection) {\n self.database = database\n self.connection = connection\n }\n}\n```", "position": 1, "token_count": 176, "has_code": true, "section_hierarchy": ["Creating an Application-Specific Type"], "metadata": {"chunk_id": "clients-swift-001", "document_id": "clients-swift", "position": 1, "token_count": 176, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Creating an Application-Specific Type"], "file_path": "clients/swift.md", "url": "/clients/swift", "title": "Swift Client", "category": null, "tags": [], "section_url": "/clients/swift#creating-an-application-specific-type"}}
{"chunk_id": "clients-swift-002", "document_id": "clients-swift", "content": "### Loading a CSV File\n\nWe load the data from [NASA's Exoplanet Archive](https://exoplanetarchive.ipac.caltech.edu):\n\n```text\nwget https://exoplanetarchive.ipac.caltech.edu/TAP/sync?query=select+pl_name+,+disc_year+from+pscomppars&format=csv -O downloaded_exoplanets.csv\n```\n\nOnce we have our CSV downloaded locally, we can use the following SQL command to load it as a new table to DuckDB:\n\n```sql\nCREATE TABLE exoplanets AS\n SELECT * FROM read_csv('downloaded_exoplanets.csv');", "position": 2, "token_count": 175, "has_code": true, "section_hierarchy": ["Loading a CSV File"], "metadata": {"chunk_id": "clients-swift-002", "document_id": "clients-swift", "position": 2, "token_count": 175, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Loading a CSV File"], "file_path": "clients/swift.md", "url": "/clients/swift", "title": "Swift Client", "category": null, "tags": [], "section_url": "/clients/swift#loading-a-csv-file"}}
{"chunk_id": "clients-swift-003", "document_id": "clients-swift", "content": "```\n\nLet's package this up as a new asynchronous factory method on our `ExoplanetStore` type:\n\n```swift\nimport DuckDB\nimport Foundation\n\nfinal class ExoplanetStore {\n\n // Factory method to create and prepare a new ExoplanetStore\n static func create() async throws -> ExoplanetStore {\n\n // Create our database and connection as described above\n let database = try Database(store: .inMemory)\n let connection = try database.connect()\n\n // Download the CSV from the exoplanet archive\n let (csvFileURL, _) = try await URLSession.shared.download(\n from: URL(string: \"https://exoplanetarchive.ipac.caltech.edu/TAP/sync?query=select+pl_name+,+disc_year+from+pscomppars&format=csv\")!)", "position": 3, "token_count": 212, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "clients-swift-003", "document_id": "clients-swift", "position": 3, "token_count": 212, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "clients/swift.md", "url": "/clients/swift", "title": "Swift Client", "category": null, "tags": [], "section_url": "/clients/swift"}}
{"chunk_id": "clients-swift-004", "document_id": "clients-swift", "content": "// Issue our first query to DuckDB\n try connection.execute(\"\"\"\n CREATE TABLE exoplanets AS\n SELECT * FROM read_csv('\\(csvFileURL.path)');\n \"\"\")\n\n // Create our pre-populated ExoplanetStore instance\n return ExoplanetStore(\n database: database,\n connection: connection\n )\n }\n\n // Let's make the initializer we defined previously\n // private. This prevents anyone accidentally instantiating\n // the store without having pre-loaded our Exoplanet CSV\n // into the database\n private init(database: Database, connection: Connection) {\n ...\n }\n}", "position": 4, "token_count": 143, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "clients-swift-004", "document_id": "clients-swift", "position": 4, "token_count": 143, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "clients/swift.md", "url": "/clients/swift", "title": "Swift Client", "category": null, "tags": [], "section_url": "/clients/swift"}}
{"chunk_id": "clients-swift-005", "document_id": "clients-swift", "content": "```", "position": 5, "token_count": 5, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "clients-swift-005", "document_id": "clients-swift", "position": 5, "token_count": 5, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "clients/swift.md", "url": "/clients/swift", "title": "Swift Client", "category": null, "tags": [], "section_url": "/clients/swift"}}
{"chunk_id": "clients-swift-006", "document_id": "clients-swift", "content": "### Querying the Database\n\nThe following example queries DuckDB from within Swift via an async function. This means the callee won't be blocked while the query is executing. We'll then cast the result columns to Swift native types using DuckDB's `ResultSet` `cast(to:)` family of methods, before finally wrapping them up in a `DataFrame` from the TabularData framework.\n\n```swift\n...\n\nimport TabularData\n\nextension ExoplanetStore {\n\n // Retrieves the number of exoplanets discovered by year\n func groupedByDiscoveryYear() async throws -> DataFrame {\n\n // Issue the query we described above\n let result = try connection.query(\"\"\"\n SELECT disc_year, count(disc_year) AS Count\n FROM exoplanets\n GROUP BY disc_year\n ORDER BY disc_year\n \"\"\")", "position": 6, "token_count": 196, "has_code": true, "section_hierarchy": ["Querying the Database"], "metadata": {"chunk_id": "clients-swift-006", "document_id": "clients-swift", "position": 6, "token_count": 196, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Querying the Database"], "file_path": "clients/swift.md", "url": "/clients/swift", "title": "Swift Client", "category": null, "tags": [], "section_url": "/clients/swift#querying-the-database"}}
{"chunk_id": "clients-swift-007", "document_id": "clients-swift", "content": "// Cast our DuckDB columns to their native Swift\n // equivalent types\n let discoveryYearColumn = result[0].cast(to: Int.self)\n let countColumn = result[1].cast(to: Int.self)\n\n // Use our DuckDB columns to instantiate TabularData\n // columns and populate a TabularData DataFrame\n return DataFrame(columns: [\n TabularData.Column(discoveryYearColumn).eraseToAnyColumn(),\n TabularData.Column(countColumn).eraseToAnyColumn(),\n ])\n }\n}", "position": 7, "token_count": 139, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "clients-swift-007", "document_id": "clients-swift", "position": 7, "token_count": 139, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "clients/swift.md", "url": "/clients/swift", "title": "Swift Client", "category": null, "tags": [], "section_url": "/clients/swift"}}
{"chunk_id": "clients-swift-008", "document_id": "clients-swift", "content": "```", "position": 8, "token_count": 5, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "clients-swift-008", "document_id": "clients-swift", "position": 8, "token_count": 5, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "clients/swift.md", "url": "/clients/swift", "title": "Swift Client", "category": null, "tags": [], "section_url": "/clients/swift"}}
{"chunk_id": "clients-swift-009", "document_id": "clients-swift", "content": "### Complete Project\n\nFor the complete example project,Â clone the [DuckDB Swift repository](https://github.com/duckdb/duckdb-swift) and open up the runnable app project located in [`Examples/SwiftUI/ExoplanetExplorer.xcodeproj`](https://github.com/duckdb/duckdb-swift/tree/main/Examples/SwiftUI/ExoplanetExplorer.xcodeproj).", "position": 9, "token_count": 115, "has_code": false, "section_hierarchy": ["Complete Project"], "metadata": {"chunk_id": "clients-swift-009", "document_id": "clients-swift", "position": 9, "token_count": 115, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Complete Project"], "file_path": "clients/swift.md", "url": "/clients/swift", "title": "Swift Client", "category": null, "tags": [], "section_url": "/clients/swift#complete-project"}}

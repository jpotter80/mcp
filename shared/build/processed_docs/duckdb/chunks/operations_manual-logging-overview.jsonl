{"chunk_id": "operations_manual-logging-overview-000", "document_id": "operations_manual-logging-overview", "content": "DuckDB implements a logging mechanism that provides users with detailed information about events such as query execution,\nperformance metrics, and system events.\n\n## Basics\n\nThe DuckDB logging mechanism can be enabled or disabled using a special function, `enable_logging`. Logs are stored in a special view\nnamed `duckdb_logs`, which can be queried like any standard table.\n\nExample:\n\n```sql\nCALL enable_logging();\n-- Run some queries...\nSELECT * FROM duckdb_logs;\n```\n\nTo disable logging, run\n\n```sql\nCALL disable_logging();\n```\n\nTo clear the current log, run\n\n```sql\nCALL truncate_duckdb_logs();\n```", "position": 0, "token_count": 158, "has_code": true, "section_hierarchy": ["Basics"], "metadata": {"chunk_id": "operations_manual-logging-overview-000", "document_id": "operations_manual-logging-overview", "position": 0, "token_count": 158, "has_code": true, "overlap_with_previous": false, "section_hierarchy": ["Basics"], "file_path": "operations_manual/logging/overview.md", "url": "/operations_manual/logging/overview", "title": "Logging", "category": null, "tags": [], "section_url": "/operations_manual/logging/overview#basics"}}
{"chunk_id": "operations_manual-logging-overview-001", "document_id": "operations_manual-logging-overview", "content": "## Log Level\n\nDuckDB supports different logging levels that control the verbosity of the logs:\n\n* `ERROR`: Only logs error messages\n* `WARN`: Logs warnings and errors\n* `INFO`: Logs general information, warnings and errors (default)\n* `DEBUG`: Logs detailed debugging information\n* `TRACE`: Logs very detailed tracing information\n\nThe log level can be set using:\n\n```sql\nCALL enable_logging(level = 'debug');\n```", "position": 1, "token_count": 106, "has_code": true, "section_hierarchy": ["Log Level"], "metadata": {"chunk_id": "operations_manual-logging-overview-001", "document_id": "operations_manual-logging-overview", "position": 1, "token_count": 106, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Log Level"], "file_path": "operations_manual/logging/overview.md", "url": "/operations_manual/logging/overview", "title": "Logging", "category": null, "tags": [], "section_url": "/operations_manual/logging/overview#log-level"}}
{"chunk_id": "operations_manual-logging-overview-002", "document_id": "operations_manual-logging-overview", "content": "## Log Types\n\nIn DuckDB, log messages can have an associated log type. Log types allow two main things:\n\n* Fine-grained control over log message generation\n* Support for structured logging\n\n### Logging-Specific Types\n\nTo log only messages of a specific type:\n\n```sql\nCALL enable_logging('HTTP');\n```\n\nThe above function will automatically set the correct log level, and will add the `HTTP` type to the `enabled_log_types` settings. This ensures\nonly log messages of the 'HTTP' type will be written to the log.\n\nTo enable multiple log types, simply pass:\n\n```sql\nCALL enable_logging(['HTTP', 'QueryLog']);\n```", "position": 2, "token_count": 155, "has_code": true, "section_hierarchy": ["Logging-Specific Types"], "metadata": {"chunk_id": "operations_manual-logging-overview-002", "document_id": "operations_manual-logging-overview", "position": 2, "token_count": 155, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Logging-Specific Types"], "file_path": "operations_manual/logging/overview.md", "url": "/operations_manual/logging/overview", "title": "Logging", "category": null, "tags": [], "section_url": "/operations_manual/logging/overview#logging-specific-types"}}
{"chunk_id": "operations_manual-logging-overview-003", "document_id": "operations_manual-logging-overview", "content": "### Structured Logging\n\nSome log types like `HTTP` will have an associated message schema. To make DuckDB automatically parse the message, use the `duckdb_logs_parsed()` macro. For example:\n\n```sql\nSELECT request.headers FROM duckdb_logs_parsed('HTTP');\n```\n\nTo view the schema of each structure log type simply run:\n\n```sql\nDESCRIBE FROM duckdb_logs_parsed('HTTP');\n```", "position": 3, "token_count": 111, "has_code": true, "section_hierarchy": ["Structured Logging"], "metadata": {"chunk_id": "operations_manual-logging-overview-003", "document_id": "operations_manual-logging-overview", "position": 3, "token_count": 111, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Structured Logging"], "file_path": "operations_manual/logging/overview.md", "url": "/operations_manual/logging/overview", "title": "Logging", "category": null, "tags": [], "section_url": "/operations_manual/logging/overview#structured-logging"}}
{"chunk_id": "operations_manual-logging-overview-004", "document_id": "operations_manual-logging-overview", "content": "### List of Available Log Types\n\nThis is a (non-exhaustive) list of the available log types in DuckDB.\n\n| Log Type | Description | Structured |\n|--------------|----------------------------------------------------------|------------|\n| `QueryLog` | Logs which queries are executed in DuckDB | No |\n| `FileSystem` | Logs all FileSystem interaction with DuckDB's Filesystem | Yes |\n| `HTTP` | Logs all HTTP traffic from DuckDB's internal HTTP client | Yes |", "position": 4, "token_count": 187, "has_code": false, "section_hierarchy": ["List of Available Log Types"], "metadata": {"chunk_id": "operations_manual-logging-overview-004", "document_id": "operations_manual-logging-overview", "position": 4, "token_count": 187, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["List of Available Log Types"], "file_path": "operations_manual/logging/overview.md", "url": "/operations_manual/logging/overview", "title": "Logging", "category": null, "tags": [], "section_url": "/operations_manual/logging/overview#list-of-available-log-types"}}
{"chunk_id": "operations_manual-logging-overview-005", "document_id": "operations_manual-logging-overview", "content": "## Log Storages\n\nBy default, DuckDB logs to an in-memory log storage (`memory`). DuckDB supports different types of log storage. Currently\nthe following log storage types are implemented in core DuckDB\n\n| Log Storage | Description |\n|-------------|-----------------------------------------------------------|\n| `memory` | (default) Log to an in-memory buffer |\n| `stdout` | Log to the stdout of the current process (in CSV format) |\n| `file` | Log to (a) csv file(s) |\n\nNote that the `duckdb_logs` view is automatically updated to target the currently active log storage. This means that switching\nthe log storage may influence what is returned by the `duckdb_logs` function.", "position": 5, "token_count": 228, "has_code": false, "section_hierarchy": ["Log Storages"], "metadata": {"chunk_id": "operations_manual-logging-overview-005", "document_id": "operations_manual-logging-overview", "position": 5, "token_count": 228, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Log Storages"], "file_path": "operations_manual/logging/overview.md", "url": "/operations_manual/logging/overview", "title": "Logging", "category": null, "tags": [], "section_url": "/operations_manual/logging/overview#log-storages"}}
{"chunk_id": "operations_manual-logging-overview-006", "document_id": "operations_manual-logging-overview", "content": "### Logging to stdout\n\n```sql\nCALL enable_logging(storage = 'stdout');\n```\n\n### Logging to File\n\n```sql\nCALL enable_logging(storage = 'file', storage_config = {'path': 'path/to/store/logs'});\n```\n\nor using the equivalent shorthand:\n\n```sql\nCALL enable_logging(storage_path = 'path/to/store/logs');\n```", "position": 6, "token_count": 112, "has_code": true, "section_hierarchy": ["Logging to File"], "metadata": {"chunk_id": "operations_manual-logging-overview-006", "document_id": "operations_manual-logging-overview", "position": 6, "token_count": 112, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Logging to File"], "file_path": "operations_manual/logging/overview.md", "url": "/operations_manual/logging/overview", "title": "Logging", "category": null, "tags": [], "section_url": "/operations_manual/logging/overview#logging-to-file"}}
{"chunk_id": "operations_manual-logging-overview-007", "document_id": "operations_manual-logging-overview", "content": "## Advanced Usage", "position": 7, "token_count": 6, "has_code": false, "section_hierarchy": ["Advanced Usage"], "metadata": {"chunk_id": "operations_manual-logging-overview-007", "document_id": "operations_manual-logging-overview", "position": 7, "token_count": 6, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Advanced Usage"], "file_path": "operations_manual/logging/overview.md", "url": "/operations_manual/logging/overview", "title": "Logging", "category": null, "tags": [], "section_url": "/operations_manual/logging/overview#advanced-usage"}}
{"chunk_id": "operations_manual-logging-overview-008", "document_id": "operations_manual-logging-overview", "content": "### Normalized vs. Denormalized Logging\n\nDuckDB's log storages can log in two ways: normalized vs. denormalized.\n\nIn denormalized logging, the log context information is appended directly to each log entry, while in normalized logging\nthe log entries are stored separately with context_ids referencing the context information.\n\n| Log Storage | Normalized |\n|-------------|--------------|\n| `memory` | yes |\n| `file` | configurable |\n| `stdout` | no |\n\nFor file storage, you can switch between normalized and denormalized by providing a path ending in .csv (for normalized)\nor without .csv (for denormalized). For file logging, denormalized is generally recommended since this increases performance\nand reduces the total size of the logs. To configure normalization of `file` log storage:", "position": 8, "token_count": 220, "has_code": false, "section_hierarchy": ["Normalized vs. Denormalized Logging"], "metadata": {"chunk_id": "operations_manual-logging-overview-008", "document_id": "operations_manual-logging-overview", "position": 8, "token_count": 220, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Normalized vs. Denormalized Logging"], "file_path": "operations_manual/logging/overview.md", "url": "/operations_manual/logging/overview", "title": "Logging", "category": null, "tags": [], "section_url": "/operations_manual/logging/overview#normalized-vs-denormalized-logging"}}
{"chunk_id": "operations_manual-logging-overview-009", "document_id": "operations_manual-logging-overview", "content": "```sql\n-- normalized: creates `/tmp/duckdb_log_contexts.csv` and `/tmp/duckdb_log_entries.csv`\nCALL enable_logging(storage_path = '/tmp');\n-- denormalized: creates `/tmp/logs.csv`\nCALL enable_logging(storage_path = '/tmp/logs.csv');", "position": 9, "token_count": 98, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "operations_manual-logging-overview-009", "document_id": "operations_manual-logging-overview", "position": 9, "token_count": 98, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "operations_manual/logging/overview.md", "url": "/operations_manual/logging/overview", "title": "Logging", "category": null, "tags": [], "section_url": "/operations_manual/logging/overview"}}
{"chunk_id": "operations_manual-logging-overview-010", "document_id": "operations_manual-logging-overview", "content": "```\n\nNote that the difference between normalized and denormalized is typically hidden from users through the 'duckdb_logs' function,\nwhich automatically joins normalized tables into a single unified result. To illustrate, both configurations above will be\nqueryable using `FROM duckdb_logs;` and will produce identical results.", "position": 10, "token_count": 69, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "operations_manual-logging-overview-010", "document_id": "operations_manual-logging-overview", "position": 10, "token_count": 69, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "operations_manual/logging/overview.md", "url": "/operations_manual/logging/overview", "title": "Logging", "category": null, "tags": [], "section_url": "/operations_manual/logging/overview"}}
{"chunk_id": "operations_manual-logging-overview-011", "document_id": "operations_manual-logging-overview", "content": "### Buffer Size\n\nThe log storage in DuckDB implements a buffering mechanism to optimize logging performance. This implementation\nintroduces a potential delay between message logging and storage writing. This delay can obscure the actual message writing time,\nwhich is particularly problematic when debugging crashes, as messages generated immediately before a crash might not be\nwritten. To address this, the buffer size can be configured as follows:\n\n```sql\nCALL enable_logging(storage_config = {'buffer_size': 0});\n```\n\nor using the equivalent shorthand:\n\n```sql\nCALL enable_logging(storage_buffer_size = 0);", "position": 11, "token_count": 137, "has_code": true, "section_hierarchy": ["Buffer Size"], "metadata": {"chunk_id": "operations_manual-logging-overview-011", "document_id": "operations_manual-logging-overview", "position": 11, "token_count": 137, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Buffer Size"], "file_path": "operations_manual/logging/overview.md", "url": "/operations_manual/logging/overview", "title": "Logging", "category": null, "tags": [], "section_url": "/operations_manual/logging/overview#buffer-size"}}
{"chunk_id": "operations_manual-logging-overview-012", "document_id": "operations_manual-logging-overview", "content": "```\n\nor using the equivalent shorthand:\n\n```sql\nCALL enable_logging(storage_buffer_size = 0);\n```\n\nNote that the default buffer size is different for different log storages:\n\n| Log Storage | Default buffer size |\n|-------------|-------------------------------|\n| `memory` | `STANDARD_VECTOR_SIZE` (2048) |\n| `file` | `STANDARD_VECTOR_SIZE` (2048) |\n| `stdout` | Disabled (0) |\n\nSo for example, if you want to increase your `stdout` logging performance, simply enable buffering to greatly (>10x) speed up\nyour logging:\n\n```SQL\nCALL enable_logging(storage = 'stdout', storage_buffer_size = 2048);", "position": 12, "token_count": 209, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "operations_manual-logging-overview-012", "document_id": "operations_manual-logging-overview", "position": 12, "token_count": 209, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "operations_manual/logging/overview.md", "url": "/operations_manual/logging/overview", "title": "Logging", "category": null, "tags": [], "section_url": "/operations_manual/logging/overview"}}
{"chunk_id": "operations_manual-logging-overview-013", "document_id": "operations_manual-logging-overview", "content": "```\n\nOr imagine you are debugging a crash in DuckDB and you want to use the `file` logger to understand what's going on:\nSimply disable the\nbuffering using:\n\n```sql\nCALL enable_logging(storage_path = '/tmp/mylogs', storage_buffer_size = 2048);\n```", "position": 13, "token_count": 80, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "operations_manual-logging-overview-013", "document_id": "operations_manual-logging-overview", "position": 13, "token_count": 80, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "operations_manual/logging/overview.md", "url": "/operations_manual/logging/overview", "title": "Logging", "category": null, "tags": [], "section_url": "/operations_manual/logging/overview"}}
{"chunk_id": "operations_manual-logging-overview-014", "document_id": "operations_manual-logging-overview", "content": "### Syntactic Sugar\n\nDuckDB contains some syntactic sugar to make common paths. For example, the following statements are all equal:\n\n```sql\n-- regular invocation\nCALL enable_logging(storage = 'file', storage_config = {'path': 'path/to/store/logs'});\n-- using shorthand for common path storage config param\nCALL enable_logging(storage = 'file', storage_path = 'path/to/store/logs');\n-- omitting `storage = 'file'` -> is implied from presence of `storage_config`\nCALL enable_logging(storage_config = {'path': 'path/to/store/logs'});\n```", "position": 14, "token_count": 172, "has_code": true, "section_hierarchy": ["Syntactic Sugar"], "metadata": {"chunk_id": "operations_manual-logging-overview-014", "document_id": "operations_manual-logging-overview", "position": 14, "token_count": 172, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Syntactic Sugar"], "file_path": "operations_manual/logging/overview.md", "url": "/operations_manual/logging/overview", "title": "Logging", "category": null, "tags": [], "section_url": "/operations_manual/logging/overview#syntactic-sugar"}}

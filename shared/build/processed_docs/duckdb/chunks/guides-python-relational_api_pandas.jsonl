{"chunk_id": "guides-python-relational_api_pandas-000", "document_id": "guides-python-relational_api_pandas", "content": "DuckDB offers a relational API that can be used to chain together query operations. These are lazily evaluated so that DuckDB can optimize their execution. These operators can act on Pandas DataFrames, DuckDB tables or views (which can point to any underlying storage format that DuckDB can read, such as CSV or Parquet files, etc.). Here we show a simple example of reading from a Pandas DataFrame and returning a DataFrame.\n\n```python\nimport duckdb\nimport pandas\n\n# connect to an in-memory database\ncon = duckdb.connect()\n\ninput_df = pandas.DataFrame.from_dict({'i': [1, 2, 3, 4],\n 'j': [\"one\", \"two\", \"three\", \"four\"]})\n\n# create a DuckDB relation from a dataframe\nrel = con.from_df(input_df)\n\n# chain together relational operators (this is a lazy operation, so the operations are not yet executed)", "position": 0, "token_count": 223, "has_code": true, "section_hierarchy": ["chain together relational operators (this is a lazy operation, so the operations are not yet executed)"], "metadata": {"chunk_id": "guides-python-relational_api_pandas-000", "document_id": "guides-python-relational_api_pandas", "position": 0, "token_count": 223, "has_code": true, "overlap_with_previous": false, "section_hierarchy": ["chain together relational operators (this is a lazy operation, so the operations are not yet executed)"], "file_path": "guides/python/relational_api_pandas.md", "url": "/guides/python/relational_api_pandas", "title": "Relational API on Pandas", "category": null, "tags": [], "section_url": "/guides/python/relational_api_pandas#chain-together-relational-operators-this-is-a-lazy-operation-so-the-operations-are-not-yet-executed"}}
{"chunk_id": "guides-python-relational_api_pandas-001", "document_id": "guides-python-relational_api_pandas", "content": "# chain together relational operators (this is a lazy operation, so the operations are not yet executed)\n# equivalent to: SELECT i, j, i*2 AS two_i FROM input_df WHERE i >= 2 ORDER BY i DESC LIMIT 2\ntransformed_rel = rel.filter('i >= 2').project('i, j, i*2 AS two_i').order('i DESC').limit(2)\n\n# trigger execution by requesting .df() of the relation", "position": 1, "token_count": 116, "has_code": false, "section_hierarchy": ["trigger execution by requesting .df() of the relation"], "metadata": {"chunk_id": "guides-python-relational_api_pandas-001", "document_id": "guides-python-relational_api_pandas", "position": 1, "token_count": 116, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["trigger execution by requesting .df() of the relation"], "file_path": "guides/python/relational_api_pandas.md", "url": "/guides/python/relational_api_pandas", "title": "Relational API on Pandas", "category": null, "tags": [], "section_url": "/guides/python/relational_api_pandas#trigger-execution-by-requesting-df-of-the-relation"}}
{"chunk_id": "guides-python-relational_api_pandas-002", "document_id": "guides-python-relational_api_pandas", "content": "# trigger execution by requesting .df() of the relation\n# .df() could have been added to the end of the chain above - it was separated for clarity\noutput_df = transformed_rel.df()\n```\n\nRelational operators can also be used to group rows, aggregate, find distinct combinations of values, join, union, and more. They are also able to directly insert results into a DuckDB table or write to a CSV.\n\nPlease see [these additional examples](https://github.com/duckdb/duckdb/blob/main/examples/python/duckdb-python.py) and the [available relational methods on the `DuckDBPyRelation` class]({% link docs/stable/clients/python/reference/index.md %}#duckdb.DuckDBPyRelation).", "position": 2, "token_count": 190, "has_code": true, "section_hierarchy": [".df() could have been added to the end of the chain above - it was separated for clarity"], "metadata": {"chunk_id": "guides-python-relational_api_pandas-002", "document_id": "guides-python-relational_api_pandas", "position": 2, "token_count": 190, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [".df() could have been added to the end of the chain above - it was separated for clarity"], "file_path": "guides/python/relational_api_pandas.md", "url": "/guides/python/relational_api_pandas", "title": "Relational API on Pandas", "category": null, "tags": [], "section_url": "/guides/python/relational_api_pandas#df-could-have-been-added-to-the-end-of-the-chain-above---it-was-separated-for-clarity"}}

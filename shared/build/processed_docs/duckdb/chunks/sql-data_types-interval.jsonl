{"chunk_id": "sql-data_types-interval-000", "document_id": "sql-data_types-interval", "content": "`INTERVAL`s represent periods of time that can be added to or subtracted from `DATE`, `TIMESTAMP`, `TIMESTAMPTZ`, or `TIME` values.\n\n| Name | Description |\n|:---|:---|\n| `INTERVAL` | Period of time |\n\nAn `INTERVAL` can be constructed by providing amounts together with units.\nUnits that aren't *months*, *days*, or *microseconds* are converted to equivalent amounts in the next smaller of these three basis units.\n\n```sql\nSELECT\n INTERVAL 1 YEAR, -- single unit using YEAR keyword; stored as 12 months\n INTERVAL (random() * 10) YEAR, -- parentheses necessary for variable amounts;\n -- stored as integer number of months\n INTERVAL '1 month 1 day', -- string type necessary for multiple units; stored as (1 month, 1 day)\n '16 months'::INTERVAL, -- string cast supported; stored as 16 months\n '48:00:00'::INTERVAL, -- HH::MM::SS string supported; stored as (48 * 60 * 60 * 1e6 microseconds)\n;", "position": 0, "token_count": 250, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "sql-data_types-interval-000", "document_id": "sql-data_types-interval", "position": 0, "token_count": 250, "has_code": true, "overlap_with_previous": false, "section_hierarchy": [], "file_path": "sql/data_types/interval.md", "url": "/sql/data_types/interval", "title": "Interval Type", "category": null, "tags": [], "section_url": "/sql/data_types/interval"}}
{"chunk_id": "sql-data_types-interval-001", "document_id": "sql-data_types-interval", "content": "```\n\n> Warning Decimal values are truncated to integers when used with unit keywords (unless the unit is `SECONDS` or `MILLISECONDS`).\n>\n> ```sql\n> SELECT INTERVAL '1.5' YEARS;\n> -- Returns 12 months; equivalent to `to_years(CAST(trunc(1.5) AS INTEGER))`\n>", "position": 1, "token_count": 82, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "sql-data_types-interval-001", "document_id": "sql-data_types-interval", "position": 1, "token_count": 82, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "sql/data_types/interval.md", "url": "/sql/data_types/interval", "title": "Interval Type", "category": null, "tags": [], "section_url": "/sql/data_types/interval"}}
{"chunk_id": "sql-data_types-interval-002", "document_id": "sql-data_types-interval", "content": "```\n>\n> For more precision, include the unit in the string or use a more granular unit; e.g., `INTERVAL '1.5 years'` or `INTERVAL 18 MONTHS`.\n\nThree independent basis units are necessary because a month does not correspond to a fixed amount of days (February has fewer days than March) and a day doesn't correspond to a fixed amount of microseconds (days can be 25 hours or 23 hours long because of daylight saving time).\nThe division into components makes the `INTERVAL` class suitable for adding or subtracting specific time units to a date. For example, we can generate a table with the first day of every month using the following SQL query:\n\n```sql\nSELECT DATE '2000-01-01' + INTERVAL (i) MONTH\nFROM range(12) t(i);", "position": 2, "token_count": 179, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "sql-data_types-interval-002", "document_id": "sql-data_types-interval", "position": 2, "token_count": 179, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "sql/data_types/interval.md", "url": "/sql/data_types/interval", "title": "Interval Type", "category": null, "tags": [], "section_url": "/sql/data_types/interval"}}
{"chunk_id": "sql-data_types-interval-003", "document_id": "sql-data_types-interval", "content": "```\n\nWhen `INTERVAL`s are deconstructed via the `datepart` function, the *months* component is additionally split into years and months, and the *microseconds* component is split into hours, minutes, and microseconds. The *days* component is not split into additional units. To demonstrate this, the following query generates an `INTERVAL` called `period` by summing random amounts of the three basis units. It then extracts the aforementioned six parts from `period`, adds them back together, and confirms that the result is always equal to the original `period`.", "position": 3, "token_count": 130, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "sql-data_types-interval-003", "document_id": "sql-data_types-interval", "position": 3, "token_count": 130, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "sql/data_types/interval.md", "url": "/sql/data_types/interval", "title": "Interval Type", "category": null, "tags": [], "section_url": "/sql/data_types/interval"}}
{"chunk_id": "sql-data_types-interval-004", "document_id": "sql-data_types-interval", "content": "```sql\nSELECT\n period = list_reduce(\n [INTERVAL (datepart(part, period) || part) FOR part IN\n ['year', 'month', 'day', 'hour', 'minute', 'microsecond']\n ],\n (i1, i2) -> i1 + i2\n ) -- always true\nFROM (\n VALUES (\n INTERVAL (random() * 123_456_789_123) MICROSECONDS\n + INTERVAL (random() * 12_345) DAYS\n + INTERVAL (random() * 12_345) MONTHS\n )\n) _(period);", "position": 4, "token_count": 135, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "sql-data_types-interval-004", "document_id": "sql-data_types-interval", "position": 4, "token_count": 135, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "sql/data_types/interval.md", "url": "/sql/data_types/interval", "title": "Interval Type", "category": null, "tags": [], "section_url": "/sql/data_types/interval"}}
{"chunk_id": "sql-data_types-interval-005", "document_id": "sql-data_types-interval", "content": "```\n\n> Warning The *microseconds* component is split only into hours, minutes, and microseconds, rather than hours, minutes, *seconds*, and microseconds.\n\nThe following table describe how these parts are extracted by `datepart` in formulas, as a function of the three basis units.", "position": 5, "token_count": 72, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "sql-data_types-interval-005", "document_id": "sql-data_types-interval", "position": 5, "token_count": 72, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "sql/data_types/interval.md", "url": "/sql/data_types/interval", "title": "Interval Type", "category": null, "tags": [], "section_url": "/sql/data_types/interval"}}
{"chunk_id": "sql-data_types-interval-006", "document_id": "sql-data_types-interval", "content": "The following table describe how these parts are extracted by `datepart` in formulas, as a function of the three basis units.\n\n| Part | Formula |\n|----------------------|--------------------------------------------------|\n| `year` | `#months // 12` |\n| `month` | `#months % 12` |\n| `day` | `#days` |\n| `hour` | `#microseconds // (60 * 60 * 1_000_000)` |\n| `minute` | `(#microseconds // (60 * 1_000_000)) % 60` |\n| `microsecond` | `#microseconds % (60 * 1_000_000)` |", "position": 6, "token_count": 224, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "sql-data_types-interval-006", "document_id": "sql-data_types-interval", "position": 6, "token_count": 224, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "sql/data_types/interval.md", "url": "/sql/data_types/interval", "title": "Interval Type", "category": null, "tags": [], "section_url": "/sql/data_types/interval"}}
{"chunk_id": "sql-data_types-interval-007", "document_id": "sql-data_types-interval", "content": "Additionally, `datepart` may be used to extract centuries, decades, quarters, seconds, and milliseconds from `INTERVAL`s. However, these parts are not required when reassembling the original `INTERVAL`. In fact, if the previous query additionally extracted any of these additional parts, then the sum of the extracted parts would generally be larger than the original `period`.", "position": 7, "token_count": 83, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "sql-data_types-interval-007", "document_id": "sql-data_types-interval", "position": 7, "token_count": 83, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "sql/data_types/interval.md", "url": "/sql/data_types/interval", "title": "Interval Type", "category": null, "tags": [], "section_url": "/sql/data_types/interval"}}
{"chunk_id": "sql-data_types-interval-008", "document_id": "sql-data_types-interval", "content": "| Part | Formula |\n|----------------------|--------------------------------------------------|\n| `century` | `datepart('year', interval) // 100` |\n| `decade` | `datepart('year', interval) // 10` |\n| `quarter` | `datepart('month', interval) // 3 + 1` |\n| `second` | `datepart('microsecond', interval) // 1_000_000` |\n| `millisecond` | `datepart('microsecond', interval) // 1_000` |\n\n> All units use 0-based indexing, except for quarters, which use 1-based indexing.\n\nFor example:", "position": 8, "token_count": 229, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "sql-data_types-interval-008", "document_id": "sql-data_types-interval", "position": 8, "token_count": 229, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "sql/data_types/interval.md", "url": "/sql/data_types/interval", "title": "Interval Type", "category": null, "tags": [], "section_url": "/sql/data_types/interval"}}
{"chunk_id": "sql-data_types-interval-009", "document_id": "sql-data_types-interval", "content": "> All units use 0-based indexing, except for quarters, which use 1-based indexing.\n\nFor example:\n\n```sql\nSELECT\n datepart('decade', INTERVAL 12 YEARS), -- returns 1\n datepart('year', INTERVAL 12 YEARS), -- returns 12\n datepart('second', INTERVAL 1_234 MILLISECONDS), -- returns 1\n datepart('microsecond', INTERVAL 1_234 MILLISECONDS), -- returns 1_234_000\n;", "position": 9, "token_count": 118, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "sql-data_types-interval-009", "document_id": "sql-data_types-interval", "position": 9, "token_count": 118, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "sql/data_types/interval.md", "url": "/sql/data_types/interval", "title": "Interval Type", "category": null, "tags": [], "section_url": "/sql/data_types/interval"}}
{"chunk_id": "sql-data_types-interval-010", "document_id": "sql-data_types-interval", "content": "```", "position": 10, "token_count": 5, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "sql-data_types-interval-010", "document_id": "sql-data_types-interval", "position": 10, "token_count": 5, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "sql/data_types/interval.md", "url": "/sql/data_types/interval", "title": "Interval Type", "category": null, "tags": [], "section_url": "/sql/data_types/interval"}}
{"chunk_id": "sql-data_types-interval-011", "document_id": "sql-data_types-interval", "content": "## Arithmetic with Timestamps, Dates and Intervals\n\n`INTERVAL`s can be added to and subtracted from `TIMESTAMP`s, `TIMESTAMPTZ`s, `DATE`s, and `TIME`s using the `+` and `-` operators.\n\n```sql\nSELECT\n DATE '2000-01-01' + INTERVAL 1 YEAR,\n TIMESTAMP '2000-01-01 01:33:30' - INTERVAL '1 month 13 hours',\n TIME '02:00:00' - INTERVAL '3 days 23 hours', -- wraps; equals TIME '03:00:00'\n;", "position": 11, "token_count": 134, "has_code": true, "section_hierarchy": ["Arithmetic with Timestamps, Dates and Intervals"], "metadata": {"chunk_id": "sql-data_types-interval-011", "document_id": "sql-data_types-interval", "position": 11, "token_count": 134, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Arithmetic with Timestamps, Dates and Intervals"], "file_path": "sql/data_types/interval.md", "url": "/sql/data_types/interval", "title": "Interval Type", "category": null, "tags": [], "section_url": "/sql/data_types/interval#arithmetic-with-timestamps-dates-and-intervals"}}
{"chunk_id": "sql-data_types-interval-012", "document_id": "sql-data_types-interval", "content": "```\n\n> Adding an `INTERVAL` to a `DATE` returns a `TIMESTAMP` even when the `INTERVAL` has no microseconds component. The result is the same as if the `DATE` was cast to a `TIMESTAMP` (which sets the time component to `00:00:00`) before adding the `INTERVAL`.\n\nConversely, subtracting two `TIMESTAMP`s or two `TIMESTAMPTZ`s from one another creates an `INTERVAL` describing the difference between the timestamps with only the *days and microseconds* components. For example:\n\n```sql\nSELECT\n TIMESTAMP '2000-02-06 12:00:00' - TIMESTAMP '2000-01-01 11:00:00', -- 36 days 1 hour\n TIMESTAMP '2000-02-01' + (TIMESTAMP '2000-02-01' - TIMESTAMP '2000-01-01'), -- '2000-03-03', NOT '2000-03-01'\n;", "position": 12, "token_count": 229, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "sql-data_types-interval-012", "document_id": "sql-data_types-interval", "position": 12, "token_count": 229, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "sql/data_types/interval.md", "url": "/sql/data_types/interval", "title": "Interval Type", "category": null, "tags": [], "section_url": "/sql/data_types/interval"}}
{"chunk_id": "sql-data_types-interval-013", "document_id": "sql-data_types-interval", "content": "```\n\nSubtracting two `DATE`s from one another does not create an `INTERVAL` but rather returns the number of days between the given dates as integer value.\n\n> Warning Extracting a part of the `INTERVAL` difference between two `TIMESTAMP`s is not equivalent to computing the number of partition boundaries between the two `TIMESTAMP`s for the corresponding unit, as computed by the `datediff` function:\n>\n> ```sql\n> SELECT\n> datediff('day', TIMESTAMP '2020-01-01 01:00:00', TIMESTAMP '2020-01-02 00:00:00'), -- 1\n> datepart('day', TIMESTAMP '2020-01-02 00:00:00' - TIMESTAMP '2020-01-01 01:00:00'), -- 0\n> ;\n> ```", "position": 13, "token_count": 195, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "sql-data_types-interval-013", "document_id": "sql-data_types-interval", "position": 13, "token_count": 195, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "sql/data_types/interval.md", "url": "/sql/data_types/interval", "title": "Interval Type", "category": null, "tags": [], "section_url": "/sql/data_types/interval"}}
{"chunk_id": "sql-data_types-interval-014", "document_id": "sql-data_types-interval", "content": "## Equality and Comparison\n\nFor equality and ordering comparisons only, the total number of microseconds in an `INTERVAL` is computed by converting the days basis unit to `24 * 60 * 60 * 1e6` microseconds and the months basis unit to 30 days, or `30 * 24 * 60 * 60 * 1e6` microseconds.\n\nAs a result, `INTERVAL`s can compare equal even when they are functionally different, and the ordering of `INTERVAL`s is not always preserved when they are added to dates or timestamps.\n\nFor example:\n\n* `INTERVAL 30 DAYS = INTERVAL 1 MONTH`\n* but `DATE '2020-01-01' + INTERVAL 30 DAYS != DATE '2020-01-01' + INTERVAL 1 MONTH`.\n\nand\n\n* `INTERVAL '30 days 12 hours' > INTERVAL 1 MONTH`\n* but `DATE '2020-01-01' + INTERVAL '30 days 12 hours' < DATE '2020-01-01' + INTERVAL 1 MONTH`.", "position": 14, "token_count": 214, "has_code": false, "section_hierarchy": ["Equality and Comparison"], "metadata": {"chunk_id": "sql-data_types-interval-014", "document_id": "sql-data_types-interval", "position": 14, "token_count": 214, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Equality and Comparison"], "file_path": "sql/data_types/interval.md", "url": "/sql/data_types/interval", "title": "Interval Type", "category": null, "tags": [], "section_url": "/sql/data_types/interval#equality-and-comparison"}}
{"chunk_id": "sql-data_types-interval-015", "document_id": "sql-data_types-interval", "content": "## Functions\n\nSee the [Date Part Functions page]({% link docs/stable/sql/functions/datepart.md %}) for a list of available date parts for use with an `INTERVAL`.\n\nSee the [Interval Operators page]({% link docs/stable/sql/functions/interval.md %}) for functions that operate on intervals.", "position": 15, "token_count": 82, "has_code": false, "section_hierarchy": ["Functions"], "metadata": {"chunk_id": "sql-data_types-interval-015", "document_id": "sql-data_types-interval", "position": 15, "token_count": 82, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Functions"], "file_path": "sql/data_types/interval.md", "url": "/sql/data_types/interval", "title": "Interval Type", "category": null, "tags": [], "section_url": "/sql/data_types/interval#functions"}}

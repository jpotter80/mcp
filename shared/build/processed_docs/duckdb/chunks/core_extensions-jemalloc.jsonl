{"chunk_id": "core_extensions-jemalloc-000", "document_id": "core_extensions-jemalloc", "content": "The `jemalloc` extension replaces the system's memory allocator with [jemalloc](https://jemalloc.net/).\nUnlike other DuckDB extensions, the `jemalloc` extension is statically linked and cannot be installed or loaded during runtime.", "position": 0, "token_count": 64, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "core_extensions-jemalloc-000", "document_id": "core_extensions-jemalloc", "position": 0, "token_count": 64, "has_code": false, "overlap_with_previous": false, "section_hierarchy": [], "file_path": "core_extensions/jemalloc.md", "url": "/core_extensions/jemalloc", "title": "jemalloc Extension", "category": null, "tags": [], "section_url": "/core_extensions/jemalloc"}}
{"chunk_id": "core_extensions-jemalloc-001", "document_id": "core_extensions-jemalloc", "content": "## Operating System Support\n\nThe availability of the `jemalloc` extension depends on the operating system.\n\n### Linux\n\nLinux distributions of DuckDB ships with the `jemalloc` extension.\nTo disable the `jemalloc` extension, [build DuckDB from source]({% link docs/stable/dev/building/overview.md %}) and set the `SKIP_EXTENSIONS` flag as follows:\n\n```batch\nGEN=ninja SKIP_EXTENSIONS=\"jemalloc\" make\n```\n\n### macOS\n\nThe macOS version of DuckDB does not ship with the `jemalloc` extension but can be [built from source]({% link docs/stable/dev/building/macos.md %}) to include it:\n\n```batch\nGEN=ninja BUILD_JEMALLOC=1 make\n```\n\n### Windows\n\nOn Windows, this extension is not available.", "position": 1, "token_count": 197, "has_code": true, "section_hierarchy": ["Windows"], "metadata": {"chunk_id": "core_extensions-jemalloc-001", "document_id": "core_extensions-jemalloc", "position": 1, "token_count": 197, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Windows"], "file_path": "core_extensions/jemalloc.md", "url": "/core_extensions/jemalloc", "title": "jemalloc Extension", "category": null, "tags": [], "section_url": "/core_extensions/jemalloc#windows"}}
{"chunk_id": "core_extensions-jemalloc-002", "document_id": "core_extensions-jemalloc", "content": "## Configuration\n\n### Environment Variables\n\nThe jemalloc allocator in DuckDB can be configured via the `DUCKDB_JE_MALLOC_CONF` environment variable. Setting this is equivalent to setting the [`MALLOC_CONF` environment variable](https://jemalloc.net/jemalloc.3.html#environment) for jemalloc but DuckDB uses a different environment variable name to avoid potential name clashes with other applications.\n\n### Background Threads\n\nBy default, jemalloc's [background threads](https://jemalloc.net/jemalloc.3.html#background_thread) are disabled. To enable them, use the following configuration option:\n\n```sql\nSET allocator_background_threads = true;\n```\n\nBackground threads asynchronously purge outstanding allocations so that this doesn't have to be done synchronously by the foreground threads. This improves allocation performance, and should be noticeable in allocation-heavy workloads, especially on many-core CPUs.", "position": 2, "token_count": 228, "has_code": true, "section_hierarchy": ["Background Threads"], "metadata": {"chunk_id": "core_extensions-jemalloc-002", "document_id": "core_extensions-jemalloc", "position": 2, "token_count": 228, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Background Threads"], "file_path": "core_extensions/jemalloc.md", "url": "/core_extensions/jemalloc", "title": "jemalloc Extension", "category": null, "tags": [], "section_url": "/core_extensions/jemalloc#background-threads"}}

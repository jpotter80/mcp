{"chunk_id": "dev-sqllogictest-writing_tests-000", "document_id": "dev-sqllogictest-writing_tests", "content": "## Development and Testing\n\nIt is crucial that any new features that get added have correct tests that not only test the â€œhappy pathâ€, but also test edge cases and incorrect usage of the feature. In this section, we describe how DuckDB tests are structured and how to make new tests for DuckDB.\n\nThe tests can be run by running the `unittest` program located in the `test` folder. For the default compilations this is located in either `build/release/test/unittest` (release) or `build/debug/test/unittest` (debug).\n\n## Philosophy\n\nWhen testing DuckDB, we aim to route all the tests through SQL. We try to avoid testing components individually because that makes those components more difficult to change later on. As such, almost all of our tests can (and should) be expressed in pure SQL. There are certain exceptions to this, which we will discuss in [Catch Tests]({% link docs/stable/dev/sqllogictest/catch.md %}). However, in most cases you should write your tests in plain SQL.", "position": 0, "token_count": 234, "has_code": false, "section_hierarchy": ["Philosophy"], "metadata": {"chunk_id": "dev-sqllogictest-writing_tests-000", "document_id": "dev-sqllogictest-writing_tests", "position": 0, "token_count": 234, "has_code": false, "overlap_with_previous": false, "section_hierarchy": ["Philosophy"], "file_path": "dev/sqllogictest/writing_tests.md", "url": "/dev/sqllogictest/writing_tests", "title": "Writing Tests", "category": null, "tags": [], "section_url": "/dev/sqllogictest/writing_tests#philosophy"}}
{"chunk_id": "dev-sqllogictest-writing_tests-001", "document_id": "dev-sqllogictest-writing_tests", "content": "## Frameworks\n\nSQL tests should be written using the [sqllogictest framework]({% link docs/stable/dev/sqllogictest/intro.md %}).\n\nC++ tests can be written using the [Catch framework]({% link docs/stable/dev/sqllogictest/catch.md %}).\n\n## Client Connector Tests\n\nDuckDB also has tests for various client connectors. These are generally written in the relevant client language, and can be found in `tools/*/tests`.\nThey also double as documentation of what should be doable from a given client.", "position": 1, "token_count": 131, "has_code": false, "section_hierarchy": ["Client Connector Tests"], "metadata": {"chunk_id": "dev-sqllogictest-writing_tests-001", "document_id": "dev-sqllogictest-writing_tests", "position": 1, "token_count": 131, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Client Connector Tests"], "file_path": "dev/sqllogictest/writing_tests.md", "url": "/dev/sqllogictest/writing_tests", "title": "Writing Tests", "category": null, "tags": [], "section_url": "/dev/sqllogictest/writing_tests#client-connector-tests"}}
{"chunk_id": "dev-sqllogictest-writing_tests-002", "document_id": "dev-sqllogictest-writing_tests", "content": "## Functions for Generating Test Data\n\nDuckDB has built-in functions for generating test data.", "position": 2, "token_count": 21, "has_code": false, "section_hierarchy": ["Functions for Generating Test Data"], "metadata": {"chunk_id": "dev-sqllogictest-writing_tests-002", "document_id": "dev-sqllogictest-writing_tests", "position": 2, "token_count": 21, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Functions for Generating Test Data"], "file_path": "dev/sqllogictest/writing_tests.md", "url": "/dev/sqllogictest/writing_tests", "title": "Writing Tests", "category": null, "tags": [], "section_url": "/dev/sqllogictest/writing_tests#functions-for-generating-test-data"}}
{"chunk_id": "dev-sqllogictest-writing_tests-003", "document_id": "dev-sqllogictest-writing_tests", "content": "### `test_all_types` Function\n\nThe `test_all_types` table function generates a table whose columns correspond to types (`BOOL`, `TINYINT`, etc.).\nThe table has three rows encoding the minimum value, the maximum value, and the `NULL` value for each type.\n\n```sql\nFROM test_all_types();", "position": 3, "token_count": 83, "has_code": true, "section_hierarchy": ["`test_all_types` Function"], "metadata": {"chunk_id": "dev-sqllogictest-writing_tests-003", "document_id": "dev-sqllogictest-writing_tests", "position": 3, "token_count": 83, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["`test_all_types` Function"], "file_path": "dev/sqllogictest/writing_tests.md", "url": "/dev/sqllogictest/writing_tests", "title": "Writing Tests", "category": null, "tags": [], "section_url": "/dev/sqllogictest/writing_tests#testalltypes-function"}}
{"chunk_id": "dev-sqllogictest-writing_tests-004", "document_id": "dev-sqllogictest-writing_tests", "content": "```", "position": 4, "token_count": 5, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "dev-sqllogictest-writing_tests-004", "document_id": "dev-sqllogictest-writing_tests", "position": 4, "token_count": 5, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/sqllogictest/writing_tests.md", "url": "/dev/sqllogictest/writing_tests", "title": "Writing Tests", "category": null, "tags": [], "section_url": "/dev/sqllogictest/writing_tests"}}
{"chunk_id": "dev-sqllogictest-writing_tests-005", "document_id": "dev-sqllogictest-writing_tests", "content": "```text\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ bool â”‚ tinyint â”‚ smallint â”‚ int â”‚ bigint â”‚ hugeint â”‚ â€¦ â”‚ struct â”‚ struct_of_arrays â”‚ array_of_structs â”‚ map â”‚ union â”‚\nâ”‚ boolean â”‚ int8 â”‚ int16 â”‚ int32 â”‚ int64 â”‚ int128 â”‚ â”‚ struct(a integer, â€¦ â”‚ struct(a integer[]â€¦ â”‚ struct(a integer, â€¦ â”‚ map(varchar, varchâ€¦ â”‚ union(\"name\" varchâ€¦ â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ false â”‚ -128 â”‚ -32768 â”‚ -2147483648 â”‚ -9223372036854775808 â”‚ -17014118346046923â€¦ â”‚ â€¦ â”‚ {'a': NULL, 'b': Nâ€¦ â”‚ {'a': NULL, 'b': Nâ€¦ â”‚ [] â”‚ {} â”‚ Frank â”‚", "position": 5, "token_count": 199, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "dev-sqllogictest-writing_tests-005", "document_id": "dev-sqllogictest-writing_tests", "position": 5, "token_count": 199, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/sqllogictest/writing_tests.md", "url": "/dev/sqllogictest/writing_tests", "title": "Writing Tests", "category": null, "tags": [], "section_url": "/dev/sqllogictest/writing_tests"}}
{"chunk_id": "dev-sqllogictest-writing_tests-006", "document_id": "dev-sqllogictest-writing_tests", "content": "â”‚ true â”‚ 127 â”‚ 32767 â”‚ 2147483647 â”‚ 9223372036854775807 â”‚ 170141183460469231â€¦ â”‚ â€¦ â”‚ {'a': 42, 'b': ğŸ¦†â€¦ â”‚ {'a': [42, 999, NUâ€¦ â”‚ [{'a': NULL, 'b': â€¦ â”‚ {key1=ğŸ¦†ğŸ¦†ğŸ¦†ğŸ¦†ğŸ¦†ğŸ¦†â€¦ â”‚ 5 â”‚\nâ”‚ NULL â”‚ NULL â”‚ NULL â”‚ NULL â”‚ NULL â”‚ NULL â”‚ â€¦ â”‚ NULL â”‚ NULL â”‚ NULL â”‚ NULL â”‚ NULL â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ 3 rows 44 columns (11 shown) â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜", "position": 6, "token_count": 128, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "dev-sqllogictest-writing_tests-006", "document_id": "dev-sqllogictest-writing_tests", "position": 6, "token_count": 128, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/sqllogictest/writing_tests.md", "url": "/dev/sqllogictest/writing_tests", "title": "Writing Tests", "category": null, "tags": [], "section_url": "/dev/sqllogictest/writing_tests"}}
{"chunk_id": "dev-sqllogictest-writing_tests-007", "document_id": "dev-sqllogictest-writing_tests", "content": "```", "position": 7, "token_count": 5, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "dev-sqllogictest-writing_tests-007", "document_id": "dev-sqllogictest-writing_tests", "position": 7, "token_count": 5, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/sqllogictest/writing_tests.md", "url": "/dev/sqllogictest/writing_tests", "title": "Writing Tests", "category": null, "tags": [], "section_url": "/dev/sqllogictest/writing_tests"}}
{"chunk_id": "dev-sqllogictest-writing_tests-008", "document_id": "dev-sqllogictest-writing_tests", "content": "### `test_vector_types` Function\n\nThe `test_vector_types` table function takes _n_ arguments `col1`, ..., `coln` and an optional `BOOLEAN` argument `all_flat`.\nThe function generates a table with _n_ columns `test_vector`, `test_vector2`, ..., `test_vectorn`.\nIn each row, each field contains values conforming to the type of their respective column.\n\n```sql\nFROM test_vector_types(NULL::BIGINT);\n```\n\n```text\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ test_vector â”‚\nâ”‚ int64 â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ -9223372036854775808 â”‚\nâ”‚ 9223372036854775807 â”‚\nâ”‚ NULL â”‚\nâ”‚ ... â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n```sql\nFROM test_vector_types(NULL::ROW(i INTEGER, j VARCHAR, k DOUBLE), NULL::TIMESTAMP);", "position": 8, "token_count": 216, "has_code": true, "section_hierarchy": ["`test_vector_types` Function"], "metadata": {"chunk_id": "dev-sqllogictest-writing_tests-008", "document_id": "dev-sqllogictest-writing_tests", "position": 8, "token_count": 216, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["`test_vector_types` Function"], "file_path": "dev/sqllogictest/writing_tests.md", "url": "/dev/sqllogictest/writing_tests", "title": "Writing Tests", "category": null, "tags": [], "section_url": "/dev/sqllogictest/writing_tests#testvectortypes-function"}}
{"chunk_id": "dev-sqllogictest-writing_tests-009", "document_id": "dev-sqllogictest-writing_tests", "content": "```\n\n```sql\nFROM test_vector_types(NULL::ROW(i INTEGER, j VARCHAR, k DOUBLE), NULL::TIMESTAMP);\n```\n\n```text\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ test_vector â”‚ test_vector2 â”‚\nâ”‚ struct(i integer, j varchar, k double) â”‚ timestamp â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ {'i': -2147483648, 'j': ğŸ¦†ğŸ¦†ğŸ¦†ğŸ¦†ğŸ¦†ğŸ¦†, 'k': -1.7976931348623157e+308} â”‚ 290309-12-22 (BC) 00:00:00 â”‚\nâ”‚ {'i': 2147483647, 'j': goo\\0se, 'k': 1.7976931348623157e+308} â”‚ 294247-01-10 04:00:54.775806 â”‚\nâ”‚ {'i': NULL, 'j': NULL, 'k': NULL} â”‚ NULL â”‚\nâ”‚ ... â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜", "position": 9, "token_count": 227, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "dev-sqllogictest-writing_tests-009", "document_id": "dev-sqllogictest-writing_tests", "position": 9, "token_count": 227, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/sqllogictest/writing_tests.md", "url": "/dev/sqllogictest/writing_tests", "title": "Writing Tests", "category": null, "tags": [], "section_url": "/dev/sqllogictest/writing_tests"}}
{"chunk_id": "dev-sqllogictest-writing_tests-010", "document_id": "dev-sqllogictest-writing_tests", "content": "```\n\n`test_vector_types` has an optional argument called `all_flat` of type `BOOL`. This only affects the internal representation of the vector.\n\n```sql\nFROM test_vector_types(NULL::ROW(i INTEGER, j VARCHAR, k DOUBLE), NULL::TIMESTAMP, all_flat = true);\n-- the output is the same as above but with a different internal representation\n```", "position": 10, "token_count": 99, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "dev-sqllogictest-writing_tests-010", "document_id": "dev-sqllogictest-writing_tests", "position": 10, "token_count": 99, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "dev/sqllogictest/writing_tests.md", "url": "/dev/sqllogictest/writing_tests", "title": "Writing Tests", "category": null, "tags": [], "section_url": "/dev/sqllogictest/writing_tests"}}

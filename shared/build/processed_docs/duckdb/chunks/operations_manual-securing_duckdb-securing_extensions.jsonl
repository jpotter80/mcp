{"chunk_id": "operations_manual-securing_duckdb-securing_extensions-000", "document_id": "operations_manual-securing_duckdb-securing_extensions", "content": "DuckDB has a powerful extension mechanism, which have the same privileges as the user running DuckDB's (parent) process.\nThis introduces security considerations. Therefore, we recommend reviewing the configuration options listed on this page and setting them according to your attack models.\n\n## DuckDB Signature Checks\n\nDuckDB extensions are checked on every load using the signature of the binaries.\nThere are currently three categories of extensions:\n\n* Signed with a `core` key. Only extensions vetted by the core DuckDB team are signed with these keys.\n* Signed with a `community` key. These are open-source extensions distributed via the [DuckDB Community Extensions repository]({% link community_extensions/index.md %}).\n* Unsigned.", "position": 0, "token_count": 152, "has_code": false, "section_hierarchy": ["DuckDB Signature Checks"], "metadata": {"chunk_id": "operations_manual-securing_duckdb-securing_extensions-000", "document_id": "operations_manual-securing_duckdb-securing_extensions", "position": 0, "token_count": 152, "has_code": false, "overlap_with_previous": false, "section_hierarchy": ["DuckDB Signature Checks"], "file_path": "operations_manual/securing_duckdb/securing_extensions.md", "url": "/operations_manual/securing_duckdb/securing_extensions", "title": "Securing Extensions", "category": null, "tags": [], "section_url": "/operations_manual/securing_duckdb/securing_extensions#duckdb-signature-checks"}}
{"chunk_id": "operations_manual-securing_duckdb-securing_extensions-001", "document_id": "operations_manual-securing_duckdb-securing_extensions", "content": "## Overview of Security Levels for Extensions\n\nDuckDB offers the following security levels for extensions.\n\n| Usable extensions | Description | Configuration |\n|-----|---|---|\n| `core` | Extensions can only be loaded if signed from a `core` key. | `SET allow_community_extensions = false` |\n| `core` and `community` | Extensions can only be loaded if signed from a `core` or `community` key. | This is the default security level. |\n| Any extension including unsigned | Any extensions can be loaded. | `SET allow_unsigned_extensions = true` |\n\nSecurity-related configuration settings [lock themselves]({% link docs/stable/operations_manual/securing_duckdb/overview.md %}#locking-configurations), i.e., it is only possible to restrict capabilities in the current process.\n\nFor example, attempting the following configuration changes will result in an error:\n\n```sql\nSET allow_community_extensions = false;\nSET allow_community_extensions = true;\n```\n\n```console\nInvalid Input Error: Cannot upgrade allow_community_extensions setting while database is running\n```", "position": 1, "token_count": 251, "has_code": true, "section_hierarchy": ["Overview of Security Levels for Extensions"], "metadata": {"chunk_id": "operations_manual-securing_duckdb-securing_extensions-001", "document_id": "operations_manual-securing_duckdb-securing_extensions", "position": 1, "token_count": 251, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Overview of Security Levels for Extensions"], "file_path": "operations_manual/securing_duckdb/securing_extensions.md", "url": "/operations_manual/securing_duckdb/securing_extensions", "title": "Securing Extensions", "category": null, "tags": [], "section_url": "/operations_manual/securing_duckdb/securing_extensions#overview-of-security-levels-for-extensions"}}
{"chunk_id": "operations_manual-securing_duckdb-securing_extensions-002", "document_id": "operations_manual-securing_duckdb-securing_extensions", "content": "## Community Extensions\n\nDuckDB has a [Community Extensions repository]({% link community_extensions/index.md %}), which allows convenient installation of third-party extensions.\nCommunity extension repositories like pip or npm are essentially enabling remote code execution by design. This is less dramatic than it sounds. For better or worse, we are quite used to piping random scripts from the web into our shells, and routinely install a staggering amount of transitive dependencies without thinking twice. Some repositories like CRAN enforce a human inspection at some point, but that’s no guarantee for anything either.", "position": 2, "token_count": 130, "has_code": false, "section_hierarchy": ["Community Extensions"], "metadata": {"chunk_id": "operations_manual-securing_duckdb-securing_extensions-002", "document_id": "operations_manual-securing_duckdb-securing_extensions", "position": 2, "token_count": 130, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Community Extensions"], "file_path": "operations_manual/securing_duckdb/securing_extensions.md", "url": "/operations_manual/securing_duckdb/securing_extensions", "title": "Securing Extensions", "category": null, "tags": [], "section_url": "/operations_manual/securing_duckdb/securing_extensions#community-extensions"}}
{"chunk_id": "operations_manual-securing_duckdb-securing_extensions-003", "document_id": "operations_manual-securing_duckdb-securing_extensions", "content": "We’ve studied several different approaches to community extension repositories and have picked what we think is a sensible approach: we do not attempt to review the submissions, but require that the *source code of extensions is available*. We do take over the complete build, sign and distribution process. Note that this is a step up from pip and npm that allow uploading arbitrary binaries but a step down from reviewing everything manually. We allow users to [report malicious extensions](https://github.com/duckdb/community-extensions/security/advisories/new) and show adoption statistics like GitHub stars and download count. Because we manage the repository, we can remove problematic extensions from distribution quickly.\n\nDespite this, installing and loading DuckDB extensions from the community extension repository will execute code written by third party developers, and therefore *can* be dangerous. A malicious developer could create and register a harmless-looking DuckDB extension that steals your crypto coins.\nIf you’re running a web service that executes untrusted SQL from users with DuckDB, we recommend disabling community extensions. To do so, run:", "position": 3, "token_count": 239, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "operations_manual-securing_duckdb-securing_extensions-003", "document_id": "operations_manual-securing_duckdb-securing_extensions", "position": 3, "token_count": 239, "has_code": false, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "operations_manual/securing_duckdb/securing_extensions.md", "url": "/operations_manual/securing_duckdb/securing_extensions", "title": "Securing Extensions", "category": null, "tags": [], "section_url": "/operations_manual/securing_duckdb/securing_extensions"}}
{"chunk_id": "operations_manual-securing_duckdb-securing_extensions-004", "document_id": "operations_manual-securing_duckdb-securing_extensions", "content": "```sql\nSET allow_community_extensions = false;", "position": 4, "token_count": 15, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "operations_manual-securing_duckdb-securing_extensions-004", "document_id": "operations_manual-securing_duckdb-securing_extensions", "position": 4, "token_count": 15, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "operations_manual/securing_duckdb/securing_extensions.md", "url": "/operations_manual/securing_duckdb/securing_extensions", "title": "Securing Extensions", "category": null, "tags": [], "section_url": "/operations_manual/securing_duckdb/securing_extensions"}}
{"chunk_id": "operations_manual-securing_duckdb-securing_extensions-005", "document_id": "operations_manual-securing_duckdb-securing_extensions", "content": "```", "position": 5, "token_count": 5, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "operations_manual-securing_duckdb-securing_extensions-005", "document_id": "operations_manual-securing_duckdb-securing_extensions", "position": 5, "token_count": 5, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "operations_manual/securing_duckdb/securing_extensions.md", "url": "/operations_manual/securing_duckdb/securing_extensions", "title": "Securing Extensions", "category": null, "tags": [], "section_url": "/operations_manual/securing_duckdb/securing_extensions"}}
{"chunk_id": "operations_manual-securing_duckdb-securing_extensions-006", "document_id": "operations_manual-securing_duckdb-securing_extensions", "content": "## Disabling Autoinstalling and Autoloading Known Extensions\n\nBy default, DuckDB automatically installs and loads known extensions. To disable autoinstalling known extensions, run:\n\n```sql\nSET autoinstall_known_extensions = false;\n```\n\nTo disable autoloading known extensions, run:\n\n```sql\nSET autoload_known_extensions = false;\n```\n\nTo lock this configuration, use the [`lock_configuration` option]({% link docs/stable/operations_manual/securing_duckdb/overview.md %}#locking-configurations):\n\n```sql\nSET lock_configuration = true;\n```", "position": 6, "token_count": 145, "has_code": true, "section_hierarchy": ["Disabling Autoinstalling and Autoloading Known Extensions"], "metadata": {"chunk_id": "operations_manual-securing_duckdb-securing_extensions-006", "document_id": "operations_manual-securing_duckdb-securing_extensions", "position": 6, "token_count": 145, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Disabling Autoinstalling and Autoloading Known Extensions"], "file_path": "operations_manual/securing_duckdb/securing_extensions.md", "url": "/operations_manual/securing_duckdb/securing_extensions", "title": "Securing Extensions", "category": null, "tags": [], "section_url": "/operations_manual/securing_duckdb/securing_extensions#disabling-autoinstalling-and-autoloading-known-extensions"}}
{"chunk_id": "operations_manual-securing_duckdb-securing_extensions-007", "document_id": "operations_manual-securing_duckdb-securing_extensions", "content": "## Always Require Signed Extensions\n\nBy default, DuckDB requires extensions to be either signed as core extensions (created by the DuckDB developers) or community extensions (created by third-party developers but distributed by the DuckDB developers).\nThe [`allow_unsigned_extensions` setting]({% link docs/stable/extensions/overview.md %}#unsigned-extensions) can be enabled on start-up to allow loading unsigned extensions.\nWhile this setting is useful for extension development, enabling it will allow DuckDB to load _any extensions,_ which means more care must be taken to ensure malicious extensions are not loaded.", "position": 7, "token_count": 131, "has_code": false, "section_hierarchy": ["Always Require Signed Extensions"], "metadata": {"chunk_id": "operations_manual-securing_duckdb-securing_extensions-007", "document_id": "operations_manual-securing_duckdb-securing_extensions", "position": 7, "token_count": 131, "has_code": false, "overlap_with_previous": true, "section_hierarchy": ["Always Require Signed Extensions"], "file_path": "operations_manual/securing_duckdb/securing_extensions.md", "url": "/operations_manual/securing_duckdb/securing_extensions", "title": "Securing Extensions", "category": null, "tags": [], "section_url": "/operations_manual/securing_duckdb/securing_extensions#always-require-signed-extensions"}}

{"chunk_id": "clients-nodejs-overview-000", "document_id": "clients-nodejs-overview", "content": "> The latest stable version of the DuckDB Node.js (deprecated) client is {{ site.current_duckdb_nodejs_version }}.\n\n> Deprecated The old DuckDB Node.js package is deprecated.\n> Please use the [DuckDB Node Neo package]({% link docs/stable/clients/node_neo/overview.md %}) instead.\n\nThe [`duckdb`](https://www.npmjs.com/package/duckdb) package provides a Node.js API for DuckDB.\nThe API for this client is somewhat compliant to the SQLite Node.js client for easier transition.", "position": 0, "token_count": 148, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "clients-nodejs-overview-000", "document_id": "clients-nodejs-overview", "position": 0, "token_count": 148, "has_code": false, "overlap_with_previous": false, "section_hierarchy": [], "file_path": "clients/nodejs/overview.md", "url": "/clients/nodejs/overview", "title": "Node.js API", "category": null, "tags": [], "section_url": "/clients/nodejs/overview"}}
{"chunk_id": "clients-nodejs-overview-001", "document_id": "clients-nodejs-overview", "content": "## Initializing\n\nLoad the package and create a database object:\n\n```js\nconst duckdb = require('duckdb');\nconst db = new duckdb.Database(':memory:'); // or a file name for a persistent DB\n```\n\nAll options as described on [Database configuration]({% link docs/stable/configuration/overview.md %}#configuration-reference) can be (optionally) supplied to the `Database` constructor as second argument. The third argument can be optionally supplied to get feedback on the given options.\n\n```js\nconst db = new duckdb.Database(':memory:', {\n \"access_mode\": \"READ_WRITE\",\n \"max_memory\": \"512MB\",\n \"threads\": \"4\"\n}, (err) => {\n if (err) {\n console.error(err);\n }\n});\n```", "position": 1, "token_count": 209, "has_code": true, "section_hierarchy": ["Initializing"], "metadata": {"chunk_id": "clients-nodejs-overview-001", "document_id": "clients-nodejs-overview", "position": 1, "token_count": 209, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Initializing"], "file_path": "clients/nodejs/overview.md", "url": "/clients/nodejs/overview", "title": "Node.js API", "category": null, "tags": [], "section_url": "/clients/nodejs/overview#initializing"}}
{"chunk_id": "clients-nodejs-overview-002", "document_id": "clients-nodejs-overview", "content": "## Running a Query\n\nThe following code snippet runs a simple query using the `Database.all()` method.\n\n```js\ndb.all('SELECT 42 AS fortytwo', function(err, res) {\n if (err) {\n console.warn(err);\n return;\n }\n console.log(res[0].fortytwo)\n});", "position": 2, "token_count": 87, "has_code": true, "section_hierarchy": ["Running a Query"], "metadata": {"chunk_id": "clients-nodejs-overview-002", "document_id": "clients-nodejs-overview", "position": 2, "token_count": 87, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Running a Query"], "file_path": "clients/nodejs/overview.md", "url": "/clients/nodejs/overview", "title": "Node.js API", "category": null, "tags": [], "section_url": "/clients/nodejs/overview#running-a-query"}}
{"chunk_id": "clients-nodejs-overview-003", "document_id": "clients-nodejs-overview", "content": "```\n\nOther available methods are `each`, where the callback is invoked for each row, `run` to execute a single statement without results and `exec`, which can execute several SQL commands at once but also does not return results. All those commands can work with prepared statements, taking the values for the parameters as additional arguments. For example like so:\n\n```js\ndb.all('SELECT ?::INTEGER AS fortytwo, ?::VARCHAR AS hello', 42, 'Hello, World', function(err, res) {\n if (err) {\n console.warn(err);\n return;\n }\n console.log(res[0].fortytwo)\n console.log(res[0].hello)\n});\n```", "position": 3, "token_count": 171, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "clients-nodejs-overview-003", "document_id": "clients-nodejs-overview", "position": 3, "token_count": 171, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "clients/nodejs/overview.md", "url": "/clients/nodejs/overview", "title": "Node.js API", "category": null, "tags": [], "section_url": "/clients/nodejs/overview"}}
{"chunk_id": "clients-nodejs-overview-004", "document_id": "clients-nodejs-overview", "content": "## Connections\n\nA database can have multiple `Connection`s, those are created using `db.connect()`.\n\n```js\nconst con = db.connect();\n```\n\nYou can create multiple connections, each with their own transaction context.\n\n`Connection` objects also contain shorthands to directly call `run()`, `all()` and `each()` with parameters and callbacks, respectively, for example:\n\n```js\ncon.all('SELECT 42 AS fortytwo', function(err, res) {\n if (err) {\n console.warn(err);\n return;\n }\n console.log(res[0].fortytwo)\n});\n```", "position": 4, "token_count": 160, "has_code": true, "section_hierarchy": ["Connections"], "metadata": {"chunk_id": "clients-nodejs-overview-004", "document_id": "clients-nodejs-overview", "position": 4, "token_count": 160, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Connections"], "file_path": "clients/nodejs/overview.md", "url": "/clients/nodejs/overview", "title": "Node.js API", "category": null, "tags": [], "section_url": "/clients/nodejs/overview#connections"}}
{"chunk_id": "clients-nodejs-overview-005", "document_id": "clients-nodejs-overview", "content": "## Prepared Statements\n\nFrom connections, you can create prepared statements (and only that) using `con.prepare()`:\n\n```js\nconst stmt = con.prepare('SELECT ?::INTEGER AS fortytwo');\n```\n\nTo execute this statement, you can call for example `all()` on the `stmt` object:\n\n```js\nstmt.all(42, function(err, res) {\n if (err) {\n console.warn(err);\n } else {\n console.log(res[0].fortytwo)\n }\n});", "position": 5, "token_count": 135, "has_code": true, "section_hierarchy": ["Prepared Statements"], "metadata": {"chunk_id": "clients-nodejs-overview-005", "document_id": "clients-nodejs-overview", "position": 5, "token_count": 135, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Prepared Statements"], "file_path": "clients/nodejs/overview.md", "url": "/clients/nodejs/overview", "title": "Node.js API", "category": null, "tags": [], "section_url": "/clients/nodejs/overview#prepared-statements"}}
{"chunk_id": "clients-nodejs-overview-006", "document_id": "clients-nodejs-overview", "content": "```\n\nYou can also execute the prepared statement multiple times. This is for example useful to fill a table with data:\n\n```js\ncon.run('CREATE TABLE a (i INTEGER)');\nconst stmt = con.prepare('INSERT INTO a VALUES (?)');\nfor (let i = 0; i {\n if (err) {\n console.warn(err);\n return;\n }\n\n const arrowTable = arrow.tableFromJSON(jsonData);\n db.register_buffer(\"jsonDataTable\", [arrow.tableToIPC(arrowTable)], true, (err, res) => {\n if (err) {\n console.warn(err);\n return;\n }\n\n // `SELECT * FROM jsonDataTable` would return the entries in `jsonData`\n });\n});\n```", "position": 6, "token_count": 198, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "clients-nodejs-overview-006", "document_id": "clients-nodejs-overview", "position": 6, "token_count": 198, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "clients/nodejs/overview.md", "url": "/clients/nodejs/overview", "title": "Node.js API", "category": null, "tags": [], "section_url": "/clients/nodejs/overview"}}
{"chunk_id": "clients-nodejs-overview-007", "document_id": "clients-nodejs-overview", "content": "## Loading Unsigned Extensions\n\nTo load [unsigned extensions]({% link docs/stable/extensions/overview.md %}#unsigned-extensions), instantiate the database as follows:\n\n```js\ndb = new duckdb.Database(':memory:', {\"allow_unsigned_extensions\": \"true\"});\n```", "position": 7, "token_count": 79, "has_code": true, "section_hierarchy": ["Loading Unsigned Extensions"], "metadata": {"chunk_id": "clients-nodejs-overview-007", "document_id": "clients-nodejs-overview", "position": 7, "token_count": 79, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Loading Unsigned Extensions"], "file_path": "clients/nodejs/overview.md", "url": "/clients/nodejs/overview", "title": "Node.js API", "category": null, "tags": [], "section_url": "/clients/nodejs/overview#loading-unsigned-extensions"}}

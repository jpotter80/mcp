{"chunk_id": "sql-query_syntax-setops-000", "document_id": "sql-query_syntax-setops", "content": "Set operations allow queries to be combined according to [set operation semantics](https://en.wikipedia.org/wiki/Set_(mathematics)#Basic_operations). Set operations refer to the [`UNION [ALL]`](#union), [`INTERSECT [ALL]`](#intersect) and [`EXCEPT [ALL]`](#except) clauses. The vanilla variants use set semantics, i.e., they eliminate duplicates, while the variants with `ALL` use bag semantics.\n\nTraditional set operations unify queries **by column position**, and require the to-be-combined queries to have the same number of input columns. If the columns are not of the same type, casts may be added. The result will use the column names from the first query.\n\nDuckDB also supports [`UNION [ALL] BY NAME`](#union-all-by-name), which joins columns by name instead of by position. `UNION BY NAME` does not require the inputs to have the same number of columns. `NULL` values will be added in case of missing columns.", "position": 0, "token_count": 242, "has_code": false, "section_hierarchy": [], "metadata": {"chunk_id": "sql-query_syntax-setops-000", "document_id": "sql-query_syntax-setops", "position": 0, "token_count": 242, "has_code": false, "overlap_with_previous": false, "section_hierarchy": [], "file_path": "sql/query_syntax/setops.md", "url": "/sql/query_syntax/setops", "title": "Set Operations", "category": null, "tags": [], "section_url": "/sql/query_syntax/setops"}}
{"chunk_id": "sql-query_syntax-setops-001", "document_id": "sql-query_syntax-setops", "content": "## `UNION`\n\nThe `UNION` clause can be used to combine rows from multiple queries. The queries are required to return the same number of columns. [Implicit casting](https://duckdb.org/docs/sql/data_types/typecasting#implicit-casting) to one of the returned types is performed to combine columns of different types where necessary. If this is not possible, the `UNION` clause throws an error.\n\n### Vanilla `UNION` (Set Semantics)\n\nThe vanilla `UNION` clause follows set semantics, therefore it performs duplicate elimination, i.e., only unique rows will be included in the result.\n\n```sql\nSELECT * FROM range(2) t1(x)\nUNION\nSELECT * FROM range(3) t2(x);\n```\n\n| x |\n|--:|\n| 2 |\n| 1 |\n| 0 |", "position": 1, "token_count": 191, "has_code": true, "section_hierarchy": ["Vanilla `UNION` (Set Semantics)"], "metadata": {"chunk_id": "sql-query_syntax-setops-001", "document_id": "sql-query_syntax-setops", "position": 1, "token_count": 191, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Vanilla `UNION` (Set Semantics)"], "file_path": "sql/query_syntax/setops.md", "url": "/sql/query_syntax/setops", "title": "Set Operations", "category": null, "tags": [], "section_url": "/sql/query_syntax/setops#vanilla-union-set-semantics"}}
{"chunk_id": "sql-query_syntax-setops-002", "document_id": "sql-query_syntax-setops", "content": "### `UNION ALL` (Bag Semantics)\n\n`UNION ALL` returns all rows of both queries following bag semantics, i.e., *without* duplicate elimination.\n\n```sql\nSELECT * FROM range(2) t1(x)\nUNION ALL\nSELECT * FROM range(3) t2(x);\n```\n\n| x |\n|--:|\n| 0 |\n| 1 |\n| 0 |\n| 1 |\n| 2 |", "position": 2, "token_count": 96, "has_code": true, "section_hierarchy": ["`UNION ALL` (Bag Semantics)"], "metadata": {"chunk_id": "sql-query_syntax-setops-002", "document_id": "sql-query_syntax-setops", "position": 2, "token_count": 96, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["`UNION ALL` (Bag Semantics)"], "file_path": "sql/query_syntax/setops.md", "url": "/sql/query_syntax/setops", "title": "Set Operations", "category": null, "tags": [], "section_url": "/sql/query_syntax/setops#union-all-bag-semantics"}}
{"chunk_id": "sql-query_syntax-setops-003", "document_id": "sql-query_syntax-setops", "content": "### `UNION [ALL] BY NAME`\n\nThe `UNION [ALL] BY NAME` clause can be used to combine rows from different tables by name, instead of by position. `UNION BY NAME` does not require both queries to have the same number of columns. Any columns that are only found in one of the queries are filled with `NULL` values for the other query.\n\nTake the following tables for example:\n\n```sql\nCREATE TABLE capitals (city VARCHAR, country VARCHAR);\nINSERT INTO capitals VALUES\n ('Amsterdam', 'NL'),\n ('Berlin', 'Germany');\nCREATE TABLE weather (city VARCHAR, degrees INTEGER, date DATE);\nINSERT INTO weather VALUES\n ('Amsterdam', 10, '2022-10-14'),\n ('Seattle', 8, '2022-10-12');\n```\n\n```sql\nSELECT * FROM capitals\nUNION BY NAME\nSELECT * FROM weather;", "position": 3, "token_count": 206, "has_code": true, "section_hierarchy": ["`UNION [ALL] BY NAME`"], "metadata": {"chunk_id": "sql-query_syntax-setops-003", "document_id": "sql-query_syntax-setops", "position": 3, "token_count": 206, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["`UNION [ALL] BY NAME`"], "file_path": "sql/query_syntax/setops.md", "url": "/sql/query_syntax/setops", "title": "Set Operations", "category": null, "tags": [], "section_url": "/sql/query_syntax/setops#union-all-by-name"}}
{"chunk_id": "sql-query_syntax-setops-004", "document_id": "sql-query_syntax-setops", "content": "```\n\n```sql\nSELECT * FROM capitals\nUNION BY NAME\nSELECT * FROM weather;\n```\n\n| city | country | degrees | date |\n|-----------|---------|--------:|------------|\n| Seattle | NULL | 8 | 2022-10-12 |\n| Amsterdam | NL | NULL | NULL |\n| Berlin | Germany | NULL | NULL |\n| Amsterdam | NULL | 10 | 2022-10-14 |\n\n`UNION BY NAME` follows set semantics (therefore it performs duplicate elimination), whereas `UNION ALL BY NAME` follows bag semantics.", "position": 4, "token_count": 152, "has_code": true, "section_hierarchy": [], "metadata": {"chunk_id": "sql-query_syntax-setops-004", "document_id": "sql-query_syntax-setops", "position": 4, "token_count": 152, "has_code": true, "overlap_with_previous": true, "section_hierarchy": [], "file_path": "sql/query_syntax/setops.md", "url": "/sql/query_syntax/setops", "title": "Set Operations", "category": null, "tags": [], "section_url": "/sql/query_syntax/setops"}}
{"chunk_id": "sql-query_syntax-setops-005", "document_id": "sql-query_syntax-setops", "content": "## `INTERSECT`\n\nThe `INTERSECT` clause can be used to select all rows that occur in the result of **both** queries.\n\n### Vanilla `INTERSECT` (Set Semantics)\n\nVanilla `INTERSECT` performs duplicate elimination, so only unique rows are returned.\n\n```sql\nSELECT * FROM range(2) t1(x)\nINTERSECT\nSELECT * FROM range(6) t2(x);\n```\n\n| x |\n|--:|\n| 0 |\n| 1 |\n\n### `INTERSECT ALL` (Bag Semantics)\n\n`INTERSECT ALL` follows bag semantics, so duplicates are returned.\n\n```sql\nSELECT unnest([5, 5, 6, 6, 6, 6, 7, 8]) AS x\nINTERSECT ALL\nSELECT unnest([5, 6, 6, 7, 7, 9]);\n```\n\n| x |\n|--:|\n| 5 |\n| 6 |\n| 6 |\n| 7 |", "position": 5, "token_count": 205, "has_code": true, "section_hierarchy": ["`INTERSECT ALL` (Bag Semantics)"], "metadata": {"chunk_id": "sql-query_syntax-setops-005", "document_id": "sql-query_syntax-setops", "position": 5, "token_count": 205, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["`INTERSECT ALL` (Bag Semantics)"], "file_path": "sql/query_syntax/setops.md", "url": "/sql/query_syntax/setops", "title": "Set Operations", "category": null, "tags": [], "section_url": "/sql/query_syntax/setops#intersect-all-bag-semantics"}}
{"chunk_id": "sql-query_syntax-setops-006", "document_id": "sql-query_syntax-setops", "content": "## `EXCEPT`\n\nThe `EXCEPT` clause can be used to select all rows that **only** occur in the left query.\n\n### Vanilla `EXCEPT` (Set Semantics)\n\nVanilla `EXCEPT` follows set semantics, therefore, it performs duplicate elimination, so only unique rows are returned.\n\n```sql\nSELECT * FROM range(5) t1(x)\nEXCEPT\nSELECT * FROM range(2) t2(x);\n```\n\n| x |\n|--:|\n| 2 |\n| 3 |\n| 4 |\n\n### `EXCEPT ALL` (Bag Semantics)\n\n`EXCEPT ALL` uses bag semantics:\n\n```sql\nSELECT unnest([5, 5, 6, 6, 6, 6, 7, 8]) AS x\nEXCEPT ALL\nSELECT unnest([5, 6, 6, 7, 7, 9]);\n```\n\n| x |\n|--:|\n| 5 |\n| 8 |\n| 6 |\n| 6 |\n\n## Syntax", "position": 6, "token_count": 210, "has_code": true, "section_hierarchy": ["Syntax"], "metadata": {"chunk_id": "sql-query_syntax-setops-006", "document_id": "sql-query_syntax-setops", "position": 6, "token_count": 210, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Syntax"], "file_path": "sql/query_syntax/setops.md", "url": "/sql/query_syntax/setops", "title": "Set Operations", "category": null, "tags": [], "section_url": "/sql/query_syntax/setops#syntax"}}

{"chunk_id": "data-csv-tips-000", "document_id": "data-csv-tips", "content": "Below is a collection of tips to help when attempting to import complex CSV files. In the examples, we use the [`flights.csv`]({% link data/flights.csv %}) file.\n\n## Override the Header Flag if the Header Is Not Correctly Detected\n\nIf a file contains only string columns the `header` auto-detection might fail. Provide the `header` option to override this behavior.\n\n```sql\nSELECT * FROM read_csv('flights.csv', header = true);\n```\n\n## Provide Names if the File Does Not Contain a Header\n\nIf the file does not contain a header, names will be auto-generated by default. You can provide your own names with the `names` option.\n\n```sql\nSELECT * FROM read_csv('flights.csv', names = ['DateOfFlight', 'CarrierName']);\n```", "position": 0, "token_count": 200, "has_code": true, "section_hierarchy": ["Provide Names if the File Does Not Contain a Header"], "metadata": {"chunk_id": "data-csv-tips-000", "document_id": "data-csv-tips", "position": 0, "token_count": 200, "has_code": true, "overlap_with_previous": false, "section_hierarchy": ["Provide Names if the File Does Not Contain a Header"], "file_path": "data/csv/tips.md", "url": "/data/csv/tips", "title": "CSV Import Tips", "category": null, "tags": [], "section_url": "/data/csv/tips#provide-names-if-the-file-does-not-contain-a-header"}}
{"chunk_id": "data-csv-tips-001", "document_id": "data-csv-tips", "content": "## Override the Types of Specific Columns\n\nThe `types` flag can be used to override types of only certain columns by providing a struct of `name` â†’ `type` mappings.\n\n```sql\nSELECT * FROM read_csv('flights.csv', types = {'FlightDate': 'DATE'});\n```\n\n## Use `COPY` When Loading Data into a Table\n\nThe [`COPY` statement]({% link docs/stable/sql/statements/copy.md %}) copies data directly into a table. The CSV reader uses the schema of the table instead of auto-detecting types from the file. This speeds up the auto-detection, and prevents mistakes from being made during auto-detection.\n\n```sql\nCOPY tbl FROM 'test.csv';\n```", "position": 1, "token_count": 183, "has_code": true, "section_hierarchy": ["Use `COPY` When Loading Data into a Table"], "metadata": {"chunk_id": "data-csv-tips-001", "document_id": "data-csv-tips", "position": 1, "token_count": 183, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Use `COPY` When Loading Data into a Table"], "file_path": "data/csv/tips.md", "url": "/data/csv/tips", "title": "CSV Import Tips", "category": null, "tags": [], "section_url": "/data/csv/tips#use-copy-when-loading-data-into-a-table"}}
{"chunk_id": "data-csv-tips-002", "document_id": "data-csv-tips", "content": "## Use `union_by_name` When Loading Files with Different Schemas\n\nThe `union_by_name` option can be used to unify the schema of files that have different or missing columns. For files that do not have certain columns, `NULL` values are filled in.\n\n```sql\nSELECT * FROM read_csv('flights*.csv', union_by_name = true);\n```\n\nTo load data into _an existing table_ where the table has more columns than the CSV file, you can use the [`INSERT INTO ... BY NAME` clause]({% link docs/stable/sql/statements/insert.md %}#insert-into--by-name):\n\n```sql\nINSERT INTO tbl BY NAME\n SELECT * FROM read_csv('input.csv');\n```", "position": 2, "token_count": 191, "has_code": true, "section_hierarchy": ["Use `union_by_name` When Loading Files with Different Schemas"], "metadata": {"chunk_id": "data-csv-tips-002", "document_id": "data-csv-tips", "position": 2, "token_count": 191, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Use `union_by_name` When Loading Files with Different Schemas"], "file_path": "data/csv/tips.md", "url": "/data/csv/tips", "title": "CSV Import Tips", "category": null, "tags": [], "section_url": "/data/csv/tips#use-unionbyname-when-loading-files-with-different-schemas"}}
{"chunk_id": "data-csv-tips-003", "document_id": "data-csv-tips", "content": "## Sample Size\n\nIf the [CSV sniffer]({% post_url 2023-10-27-csv-sniffer %}) is not detecting the correct type, try increasing the sample size.\nThe option `sample_size = -1` forces the sniffer to read the entire file:\n\n```sql\nSELECT * FROM read_csv('my_csv_file.csv', sample_size = -1);\n```", "position": 3, "token_count": 104, "has_code": true, "section_hierarchy": ["Sample Size"], "metadata": {"chunk_id": "data-csv-tips-003", "document_id": "data-csv-tips", "position": 3, "token_count": 104, "has_code": true, "overlap_with_previous": true, "section_hierarchy": ["Sample Size"], "file_path": "data/csv/tips.md", "url": "/data/csv/tips", "title": "CSV Import Tips", "category": null, "tags": [], "section_url": "/data/csv/tips#sample-size"}}
